!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ActivityStats",[],e):"object"==typeof exports?exports.ActivityStats=e():t.ActivityStats=e()}(window,function(){return function(t){function e(e){for(var r,o,i=e[0],l=e[1],c=e[2],m=0,d=[];m<i.length;m++)o=i[m],s[o]&&d.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);for(u&&u(e);d.length;)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={0:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window.webpackJsonpActivityStats=window.webpackJsonpActivityStats||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;return a.push([177,1]),n()}({167:function(t,e,n){var r=n(168);"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,s);r.locals&&(t.exports=r.locals)},168:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".inner.summary-stats {\n  min-height: 180px;\n  padding: 20px; }\n  .inner.summary-stats td {\n    padding: 2px;\n    line-height: 19px;\n    font-size: 14px; }\n  .inner.summary-stats td:first-child {\n    font-size: 19px;\n    text-align: right; }\n  .inner.summary-stats td:last-child {\n    position: relative;\n    top: 2px; }\n  .inner.summary-stats #annotations-by-category {\n    position: absolute;\n    top: 15px;\n    right: 30px; }\n",""])},170:function(t,e,n){var r=n(171);"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,s);r.locals&&(t.exports=r.locals)},171:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".inner.contributors-chart {\n  height: 190px; }\n",""])},174:function(t,e,n){var r={"./af":17,"./af.js":17,"./ar":18,"./ar-dz":19,"./ar-dz.js":19,"./ar-kw":20,"./ar-kw.js":20,"./ar-ly":21,"./ar-ly.js":21,"./ar-ma":22,"./ar-ma.js":22,"./ar-sa":23,"./ar-sa.js":23,"./ar-tn":24,"./ar-tn.js":24,"./ar.js":18,"./az":25,"./az.js":25,"./be":26,"./be.js":26,"./bg":27,"./bg.js":27,"./bm":28,"./bm.js":28,"./bn":29,"./bn.js":29,"./bo":30,"./bo.js":30,"./br":31,"./br.js":31,"./bs":32,"./bs.js":32,"./ca":33,"./ca.js":33,"./cs":34,"./cs.js":34,"./cv":35,"./cv.js":35,"./cy":36,"./cy.js":36,"./da":37,"./da.js":37,"./de":38,"./de-at":39,"./de-at.js":39,"./de-ch":40,"./de-ch.js":40,"./de.js":38,"./dv":41,"./dv.js":41,"./el":42,"./el.js":42,"./en-SG":43,"./en-SG.js":43,"./en-au":44,"./en-au.js":44,"./en-ca":45,"./en-ca.js":45,"./en-gb":46,"./en-gb.js":46,"./en-ie":47,"./en-ie.js":47,"./en-il":48,"./en-il.js":48,"./en-nz":49,"./en-nz.js":49,"./eo":50,"./eo.js":50,"./es":51,"./es-do":52,"./es-do.js":52,"./es-us":53,"./es-us.js":53,"./es.js":51,"./et":54,"./et.js":54,"./eu":55,"./eu.js":55,"./fa":56,"./fa.js":56,"./fi":57,"./fi.js":57,"./fo":58,"./fo.js":58,"./fr":59,"./fr-ca":60,"./fr-ca.js":60,"./fr-ch":61,"./fr-ch.js":61,"./fr.js":59,"./fy":62,"./fy.js":62,"./ga":63,"./ga.js":63,"./gd":64,"./gd.js":64,"./gl":65,"./gl.js":65,"./gom-latn":66,"./gom-latn.js":66,"./gu":67,"./gu.js":67,"./he":68,"./he.js":68,"./hi":69,"./hi.js":69,"./hr":70,"./hr.js":70,"./hu":71,"./hu.js":71,"./hy-am":72,"./hy-am.js":72,"./id":73,"./id.js":73,"./is":74,"./is.js":74,"./it":75,"./it-ch":76,"./it-ch.js":76,"./it.js":75,"./ja":77,"./ja.js":77,"./jv":78,"./jv.js":78,"./ka":79,"./ka.js":79,"./kk":80,"./kk.js":80,"./km":81,"./km.js":81,"./kn":82,"./kn.js":82,"./ko":83,"./ko.js":83,"./ku":84,"./ku.js":84,"./ky":85,"./ky.js":85,"./lb":86,"./lb.js":86,"./lo":87,"./lo.js":87,"./lt":88,"./lt.js":88,"./lv":89,"./lv.js":89,"./me":90,"./me.js":90,"./mi":91,"./mi.js":91,"./mk":92,"./mk.js":92,"./ml":93,"./ml.js":93,"./mn":94,"./mn.js":94,"./mr":95,"./mr.js":95,"./ms":96,"./ms-my":97,"./ms-my.js":97,"./ms.js":96,"./mt":98,"./mt.js":98,"./my":99,"./my.js":99,"./nb":100,"./nb.js":100,"./ne":101,"./ne.js":101,"./nl":102,"./nl-be":103,"./nl-be.js":103,"./nl.js":102,"./nn":104,"./nn.js":104,"./pa-in":105,"./pa-in.js":105,"./pl":106,"./pl.js":106,"./pt":107,"./pt-br":108,"./pt-br.js":108,"./pt.js":107,"./ro":109,"./ro.js":109,"./ru":110,"./ru.js":110,"./sd":111,"./sd.js":111,"./se":112,"./se.js":112,"./si":113,"./si.js":113,"./sk":114,"./sk.js":114,"./sl":115,"./sl.js":115,"./sq":116,"./sq.js":116,"./sr":117,"./sr-cyrl":118,"./sr-cyrl.js":118,"./sr.js":117,"./ss":119,"./ss.js":119,"./sv":120,"./sv.js":120,"./sw":121,"./sw.js":121,"./ta":122,"./ta.js":122,"./te":123,"./te.js":123,"./tet":124,"./tet.js":124,"./tg":125,"./tg.js":125,"./th":126,"./th.js":126,"./tl-ph":127,"./tl-ph.js":127,"./tlh":128,"./tlh.js":128,"./tr":129,"./tr.js":129,"./tzl":130,"./tzl.js":130,"./tzm":131,"./tzm-latn":132,"./tzm-latn.js":132,"./tzm.js":131,"./ug-cn":133,"./ug-cn.js":133,"./uk":134,"./uk.js":134,"./ur":135,"./ur.js":135,"./uz":136,"./uz-latn":137,"./uz-latn.js":137,"./uz.js":136,"./vi":138,"./vi.js":138,"./x-pseudo":139,"./x-pseudo.js":139,"./yo":140,"./yo.js":140,"./zh-cn":141,"./zh-cn.js":141,"./zh-hk":142,"./zh-hk.js":142,"./zh-tw":143,"./zh-tw.js":143};function s(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=a,t.exports=s,s.id=174},175:function(t,e,n){var r=n(176);"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,s);r.locals&&(t.exports=r.locals)},176:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".panel {\n  display: inline-block;\n  max-width: 100% !important;\n  margin-right: 1%;\n  margin-bottom: 15px; }\n\n.panel.w2 {\n  width: 16.6%; }\n\n.panel.w3 {\n  width: 25%; }\n\n.panel.w4 {\n  width: 32%; }\n\n.panel.w5 {\n  width: 41.6%; }\n\n.panel.w6 {\n  width: 50%; }\n\n.panel.w7 {\n  width: 58.3%; }\n\n.panel.w8 {\n  width: 65%; }\n\n.panel.w12 {\n  width: 98.2%; }\n\n.panel.h2 {\n  height: 180px; }\n\n.panel.h3 {\n  height: 270px; }\n\n.panel.h4 {\n  height: 360px; }\n\n.content {\n  max-width: 1400px;\n  min-width: 960px; }\n\n.inner {\n  position: relative; }\n\n.inner .loading-mask {\n  background-color: rgba(255, 255, 255, 0.65);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n",""])},177:function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r),a=n(144),o=n.n(a),i=n(7),l=n.n(i);class c{constructor(t){this._a=t}getBodiesOfType(t){return Array.isArray(t)?this._a.bodies.filter(e=>t.includes(e.type)):this._a.bodies.filter(e=>e.type===t)}getCategoryBodies(){return this.getBodiesOfType(["PLACE","PERSON","EVENT"])}getTags(){return this.getBodiesOfType("TAG")}getComments(){return this.getBodiesOfType("COMMENT")}}class u{constructor(t){this._annotations=t}total(){return this._annotations.length}totalTags(){return this._totalTags||(this._totalTags=this._annotations.reduce((t,e)=>t+new c(e).getTags().length,0)),this._totalTags}totalComments(){return this._totalComments||(this._totalComments=this._annotations.reduce((t,e)=>t+new c(e).getComments().length,0)),this._totalComments}bodiesByType(){if(!this._bodiesByType){const t={PLACE:0,PERSON:0,EVENT:0,NONE:0};this._annotations.forEach(e=>{const n=new c(e).getCategoryBodies();n.length>0?n.forEach(e=>{t[e.type]++}):t.NONE++}),this._bodiesByType=[["Places",t.PLACE],["People",t.PERSON],["Events",t.EVENT],["Uncategorized",t.NONE]]}return this._bodiesByType}totalRelations(){return this._totalRelations||(this._totalRelations=this._annotations.reduce((t,e)=>e.relations?t+e.relations.length:t,0)),this._totalRelations}contributors(){return this._contributors||(this._contributors=this._annotations.reduce((t,e)=>{const n=new Set([...t,...e.contributors]);return Array.from(n)},[])),this._contributors}}var m=n(4),d=(n(167),["#57c17b","#6f87d8","#bc51bc","#afafaf"]),p=function(t){return s.a.createElement("div",{className:"panel w4"},s.a.createElement("h2",null,"Summary"),s.a.createElement("div",{className:"inner summary-stats"},s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,t.annotations),s.a.createElement("td",null,"Annotations")),s.a.createElement("tr",null,s.a.createElement("td",null,t.tags),s.a.createElement("td",null,"Tags")),s.a.createElement("tr",null,s.a.createElement("td",null,t.comments),s.a.createElement("td",null,"Comments")),s.a.createElement("tr",null,s.a.createElement("td",null,t.relations),s.a.createElement("td",null,"Relations")),s.a.createElement("tr",null,s.a.createElement("td",null,t.contributors),s.a.createElement("td",null,"Contributors"))))),s.a.createElement(m.c,{id:"annotations-by-category",width:"140px",height:"140px",legend:!1,colors:d,data:t.bodiesByType}),t.loading&&s.a.createElement("div",{className:"loading-mask"})))},f=(n(170),function(t){return s.a.createElement("div",{className:"panel w8"},s.a.createElement("h2",null,"Contributors"),s.a.createElement("div",{className:"inner contributors-chart"},s.a.createElement(m.a,{height:190,data:t.editsPerUser})),t.loading&&s.a.createElement("div",{className:"loading-mask"}))}),h=function(t){return s.a.createElement("div",{className:"panel w12"},s.a.createElement("h2",null,"Activity over time"),s.a.createElement("div",{className:"inner"},s.a.createElement(m.b,{stacked:!0,height:170,data:t.activityPerUser})),t.loading&&s.a.createElement("div",{className:"loading-mask"}))};n(172),n(175);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var w=function(t){function e(){var t,n,r,s,a,o,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return r=this,n=!(s=(t=g(e)).call.apply(t,[this].concat(c)))||"object"!==j(s)&&"function"!=typeof s?v(r):s,a=v(n),o="state",i={document:n.props.config.document||"asckvtl43e9jca",annotations:[],editsPerUser:[],activityPerUser:[]},o in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,n}var n,a,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,r["Component"]),n=e,(a=[{key:"componentDidMount",value:function(){var t=this;l.a.get("/api/document/".concat(this.state.document,"/annotations")).then(function(e){t.setState({annotations:e.data})}),l.a.get("/api/document/".concat(this.state.document,"/contributions")).then(function(e){var n=e.data.by_user.map(function(t){return[t.username,t.value]}),r=e.data.contribution_history.reduce(function(t,e){var n=e[2].map(function(t){return t.username}),r=new Set([].concat(y(t),y(n)));return Array.from(r)},[]).map(function(t){var n=e.data.contribution_history.map(function(e){var n=e[0],r=e[2].filter(function(e){return e.username===t});return 1===r.length?[n,r[0].value]:[n,0]});return{name:t,data:n}});t.setState({editsPerUser:n,activityPerUser:r})})}},{key:"render",value:function(){var t=new u(this.state.annotations);return s.a.createElement(s.a.Fragment,null,s.a.createElement(p,{annotations:t.total(),tags:t.totalTags(),comments:t.totalComments(),relations:t.totalRelations(),contributors:t.contributors().length,bodiesByType:t.bodiesByType()}),s.a.createElement(f,{editsPerUser:this.state.editsPerUser}),s.a.createElement(h,{activityPerUser:this.state.activityPerUser}))}}])&&b(n.prototype,a),o&&b(n,o),e}();n.d(e,"init",function(){return _});var _=function(t){o.a.render(s.a.createElement(w,{config:t}),document.getElementById(t.id))}}})});