!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ActivityStats",[],t):"object"==typeof exports?exports.ActivityStats=t():e.ActivityStats=t()}(window,function(){return function(e){function t(t){for(var r,s,i=t[0],l=t[1],c=t[2],f=0,p=[];f<i.length;f++)s=i[f],a[s]&&p.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={0:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonpActivityStats=window.webpackJsonpActivityStats||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;return o.push([510,1]),n()}({325:function(e,t,n){var r=n(326);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(39)(r,a);r.locals&&(e.exports=r.locals)},326:function(e,t,n){(e.exports=n(38)(!1)).push([e.i,".inner.summary-stats {\n  min-height: 180px;\n  padding: 20px; }\n  .inner.summary-stats td {\n    padding: 2px;\n    line-height: 19px;\n    font-size: 14px; }\n  .inner.summary-stats td:first-child {\n    font-size: 19px;\n    text-align: right; }\n  .inner.summary-stats td:last-child {\n    position: relative;\n    top: 2px; }\n  .inner.summary-stats #annotations-by-category {\n    position: absolute;\n    top: 15px;\n    right: 30px; }\n",""])},328:function(e,t,n){var r=n(329);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(39)(r,a);r.locals&&(e.exports=r.locals)},329:function(e,t,n){(e.exports=n(38)(!1)).push([e.i,".inner.contributors-chart {\n  height: 190px; }\n  .inner.contributors-chart table {\n    border-collapse: collapse;\n    margin: 0 auto; }\n  .inner.contributors-chart td {\n    padding: 0 8px; }\n  .inner.contributors-chart td:first-child, .inner.contributors-chart td:last-child {\n    text-align: right; }\n  .inner.contributors-chart .meter {\n    height: 8px;\n    width: 400px;\n    margin-top: 2px;\n    overflow: visible; }\n  .inner.contributors-chart .bar {\n    background-color: rgba(68, 131, 196, 0.6);\n    border: 1px solid #4483c4; }\n",""])},504:function(e,t,n){var r=n(505);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(39)(r,a);r.locals&&(e.exports=r.locals)},505:function(e,t,n){(e.exports=n(38)(!1)).push([e.i,".panel h2 .filter {\n  background-color: rgba(68, 131, 196, 0.8);\n  color: #fff;\n  border-radius: 3px;\n  border: 1px solid #4483c4;\n  display: inline-block;\n  padding: 0 6px;\n  font-size: 16px;\n  line-height: 21px;\n  margin: 0 6px; }\n\n.panel h2 .filter::after {\n  content: '\\f00d';\n  font-size: 14px;\n  font-family: FontAwesome;\n  margin-left: 4px; }\n\n.inner.timeline {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 35px 0 20px 0; }\n  .inner.timeline .recharts-wrapper {\n    margin: 0 auto; }\n  .inner.timeline svg {\n    font-family: PTSansNarrow;\n    font-size: 13px;\n    shape-rendering: crispEdges; }\n    .inner.timeline svg .recharts-layer {\n      shape-rendering: geometricPrecision; }\n",""])},507:function(e,t,n){var r={"./af":140,"./af.js":140,"./ar":141,"./ar-dz":142,"./ar-dz.js":142,"./ar-kw":143,"./ar-kw.js":143,"./ar-ly":144,"./ar-ly.js":144,"./ar-ma":145,"./ar-ma.js":145,"./ar-sa":146,"./ar-sa.js":146,"./ar-tn":147,"./ar-tn.js":147,"./ar.js":141,"./az":148,"./az.js":148,"./be":149,"./be.js":149,"./bg":150,"./bg.js":150,"./bm":151,"./bm.js":151,"./bn":152,"./bn.js":152,"./bo":153,"./bo.js":153,"./br":154,"./br.js":154,"./bs":155,"./bs.js":155,"./ca":156,"./ca.js":156,"./cs":157,"./cs.js":157,"./cv":158,"./cv.js":158,"./cy":159,"./cy.js":159,"./da":160,"./da.js":160,"./de":161,"./de-at":162,"./de-at.js":162,"./de-ch":163,"./de-ch.js":163,"./de.js":161,"./dv":164,"./dv.js":164,"./el":165,"./el.js":165,"./en-SG":166,"./en-SG.js":166,"./en-au":167,"./en-au.js":167,"./en-ca":168,"./en-ca.js":168,"./en-gb":169,"./en-gb.js":169,"./en-ie":170,"./en-ie.js":170,"./en-il":171,"./en-il.js":171,"./en-nz":172,"./en-nz.js":172,"./eo":173,"./eo.js":173,"./es":174,"./es-do":175,"./es-do.js":175,"./es-us":176,"./es-us.js":176,"./es.js":174,"./et":177,"./et.js":177,"./eu":178,"./eu.js":178,"./fa":179,"./fa.js":179,"./fi":180,"./fi.js":180,"./fo":181,"./fo.js":181,"./fr":182,"./fr-ca":183,"./fr-ca.js":183,"./fr-ch":184,"./fr-ch.js":184,"./fr.js":182,"./fy":185,"./fy.js":185,"./ga":186,"./ga.js":186,"./gd":187,"./gd.js":187,"./gl":188,"./gl.js":188,"./gom-latn":189,"./gom-latn.js":189,"./gu":190,"./gu.js":190,"./he":191,"./he.js":191,"./hi":192,"./hi.js":192,"./hr":193,"./hr.js":193,"./hu":194,"./hu.js":194,"./hy-am":195,"./hy-am.js":195,"./id":196,"./id.js":196,"./is":197,"./is.js":197,"./it":198,"./it-ch":199,"./it-ch.js":199,"./it.js":198,"./ja":200,"./ja.js":200,"./jv":201,"./jv.js":201,"./ka":202,"./ka.js":202,"./kk":203,"./kk.js":203,"./km":204,"./km.js":204,"./kn":205,"./kn.js":205,"./ko":206,"./ko.js":206,"./ku":207,"./ku.js":207,"./ky":208,"./ky.js":208,"./lb":209,"./lb.js":209,"./lo":210,"./lo.js":210,"./lt":211,"./lt.js":211,"./lv":212,"./lv.js":212,"./me":213,"./me.js":213,"./mi":214,"./mi.js":214,"./mk":215,"./mk.js":215,"./ml":216,"./ml.js":216,"./mn":217,"./mn.js":217,"./mr":218,"./mr.js":218,"./ms":219,"./ms-my":220,"./ms-my.js":220,"./ms.js":219,"./mt":221,"./mt.js":221,"./my":222,"./my.js":222,"./nb":223,"./nb.js":223,"./ne":224,"./ne.js":224,"./nl":225,"./nl-be":226,"./nl-be.js":226,"./nl.js":225,"./nn":227,"./nn.js":227,"./pa-in":228,"./pa-in.js":228,"./pl":229,"./pl.js":229,"./pt":230,"./pt-br":231,"./pt-br.js":231,"./pt.js":230,"./ro":232,"./ro.js":232,"./ru":233,"./ru.js":233,"./sd":234,"./sd.js":234,"./se":235,"./se.js":235,"./si":236,"./si.js":236,"./sk":237,"./sk.js":237,"./sl":238,"./sl.js":238,"./sq":239,"./sq.js":239,"./sr":240,"./sr-cyrl":241,"./sr-cyrl.js":241,"./sr.js":240,"./ss":242,"./ss.js":242,"./sv":243,"./sv.js":243,"./sw":244,"./sw.js":244,"./ta":245,"./ta.js":245,"./te":246,"./te.js":246,"./tet":247,"./tet.js":247,"./tg":248,"./tg.js":248,"./th":249,"./th.js":249,"./tl-ph":250,"./tl-ph.js":250,"./tlh":251,"./tlh.js":251,"./tr":252,"./tr.js":252,"./tzl":253,"./tzl.js":253,"./tzm":254,"./tzm-latn":255,"./tzm-latn.js":255,"./tzm.js":254,"./ug-cn":256,"./ug-cn.js":256,"./uk":257,"./uk.js":257,"./ur":258,"./ur.js":258,"./uz":259,"./uz-latn":260,"./uz-latn.js":260,"./uz.js":259,"./vi":261,"./vi.js":261,"./x-pseudo":262,"./x-pseudo.js":262,"./yo":263,"./yo.js":263,"./zh-cn":264,"./zh-cn.js":264,"./zh-hk":265,"./zh-hk.js":265,"./zh-tw":266,"./zh-tw.js":266};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=507},508:function(e,t,n){var r=n(509);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(39)(r,a);r.locals&&(e.exports=r.locals)},509:function(e,t,n){(e.exports=n(38)(!1)).push([e.i,".panel {\n  display: inline-block;\n  max-width: 100% !important;\n  margin-right: 1%;\n  margin-bottom: 15px; }\n\n.panel.w2 {\n  width: 16.6%; }\n\n.panel.w3 {\n  width: 25%; }\n\n.panel.w4 {\n  width: 32%; }\n\n.panel.w5 {\n  width: 41.6%; }\n\n.panel.w6 {\n  width: 50%; }\n\n.panel.w7 {\n  width: 58.3%; }\n\n.panel.w8 {\n  width: 65%; }\n\n.panel.w12 {\n  width: 98.2%; }\n\n.content {\n  max-width: 1100px;\n  min-width: 960px; }\n\n.inner {\n  position: relative; }\n\n.inner .loading-mask {\n  background-color: rgba(255, 255, 255, 0.85);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .inner .loading-mask .spinner {\n    position: absolute;\n    bottom: 50%;\n    left: 48%;\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    line-height: 20px;\n    border: 3px solid rgba(68, 131, 196, 0.3);\n    border-top: 3px solid #4483c4;\n    border-radius: 50%;\n    -webkit-animation: spin 1s infinite linear;\n    animation: spin 1s infinite linear; }\n\n@-moz-keyframes spin {\n  100% {\n    -moz-transform: rotate(360deg); } }\n\n@-webkit-keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg); } }\n\n@keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n",""])},510:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(51),s=n.n(o),i=n(80),l=n.n(i),c=n(267),u=n(52),f=n.n(u);class p{constructor(e){this._a=e}getBodiesOfType(e){return Array.isArray(e)?this._a.bodies.filter(t=>e.includes(t.type)):this._a.bodies.filter(t=>t.type===e)}getCategoryBodies(){return this.getBodiesOfType(["PLACE","PERSON","EVENT"])}getTags(){return this.getBodiesOfType("TAG")}getComments(){return this.getBodiesOfType("COMMENT")}}n(325);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=["#57c17b","#6f87d8","#bc51bc","#afafaf"],v=function(e){return a.a.createElement(f.a,{thousandSeparator:!0,displayType:"text",value:e.value})},E=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=this,n=!(a=(e=h(t)).call.apply(e,[this].concat(s)))||"object"!==m(a)&&"function"!=typeof a?y(r):a,j(y(n),"state",{computing:!0,tags:null,comments:null,relations:null,contributors:null,bodiesByType:{}}),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillReceiveProps",value:function(e){this.props.annotations!=e.annotations&&this.recompute(e.annotations)}},{key:"recompute",value:function(e){var t=this;new Promise(function(t){t({tags:function(e){return e.reduce((e,t)=>e+new p(t).getTags().length,0)}(e),comments:function(e){return e.reduce((e,t)=>e+new p(t).getComments().length,0)}(e),relations:function(e){return e.reduce((e,t)=>t.relations?e+t.relations.length:e,0)}(e),contributors:function(e){return e.reduce((e,t)=>{const n=new Set([...e,...t.contributors]);return Array.from(n)},[])}(e).length,bodiesByType:function(e){const t={PLACE:0,PERSON:0,EVENT:0,NONE:0};return e.forEach(e=>{const n=new p(e).getCategoryBodies();n.length>0?n.forEach(e=>{t[e.type]++}):t.NONE++}),[["Places",t.PLACE],["People",t.PERSON],["Events",t.EVENT],["Uncategorized",t.NONE]]}(e)})}).then(function(e){return t.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){j(e,t,n[t])})}return e}({},e,{computing:!1}))})}},{key:"render",value:function(){return a.a.createElement("div",{className:"panel w4"},a.a.createElement("h2",null,"Summary"),a.a.createElement("div",{className:"inner summary-stats"},a.a.createElement("div",null,a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(v,{value:this.props.annotations.length})),a.a.createElement("td",null,"Annotations")),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(v,{value:this.state.tags})),a.a.createElement("td",null,"Tags")),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(v,{value:this.state.comments})),a.a.createElement("td",null,"Comments")),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(v,{value:this.state.relations})),a.a.createElement("td",null,"Relations")),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(v,{value:this.state.contributors})),a.a.createElement("td",null,"Contributors"))))),a.a.createElement(c.a,{id:"annotations-by-category",width:"140px",height:"140px",legend:!1,colors:g,data:this.state.bodiesByType}),this.state.computing&&a.a.createElement("div",{className:"loading-mask"},a.a.createElement("div",{className:"spinner"}))))}}])&&d(n.prototype,o),s&&d(n,s),t}();n(328);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x=function(e){var t=Math.max.apply(Math,w(e.editsPerUser.map(function(e){return e[1]}))),n=e.editsPerUser.map(function(n){return a.a.createElement("tr",{key:n[0]},a.a.createElement("td",{onClick:function(){return e.onSelect(n[0])}},n[0]),a.a.createElement("td",null,a.a.createElement("div",{className:"meter"},a.a.createElement("div",{className:"bar rounded",style:{width:"".concat(100*n[1]/t,"%")}}))),a.a.createElement("td",null,a.a.createElement(f.a,{thousandSeparator:!0,displayType:"text",value:n[1]})," Edits"))});return a.a.createElement("div",{className:"panel w8"},a.a.createElement("h2",null,"Contributors"),a.a.createElement("div",{className:"inner contributors-chart"},a.a.createElement("table",null,a.a.createElement("tbody",null,n))))},k=n(24),O=(n(504),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]),S=function(e){var t=e.getDate(),n=e.getMonth();return"".concat(O[n]," ").concat(t)},P=function(e){var t=e.forUser?e.history.map(function(t){var n=t[2].find(function(t){return t.username===e.forUser}),r=n?n.value:0;return{date:S(new Date(t[0])),Edits:r}}):e.history.map(function(e){return{date:S(new Date(e[0])),Edits:e[1]}});return a.a.createElement("div",{className:"panel w12"},a.a.createElement("h2",null,"Activity over time",e.forUser&&a.a.createElement("span",{className:"filter",onClick:e.clearFilter},e.forUser)),a.a.createElement("div",{className:"inner timeline"},a.a.createElement(k.b,{data:t,width:920,height:180},a.a.createElement(k.c,{strokeDasharray:"3 3"}),a.a.createElement(k.e,{dataKey:"date"}),a.a.createElement(k.f,null),a.a.createElement(k.d,null),a.a.createElement(k.a,{type:"monotone",dataKey:"Edits",stroke:"#4483c4",fill:"#4483c4"}))))};n(506),n(508);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=this,a=(e=N(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==z(a)&&"function"!=typeof a?T(r):a,U(T(n),"state",{document:n.props.config.document||"oflmsfz9augu6l",annotations:[],editsPerUser:[],editHistory:[],selectedUser:null}),U(T(n),"selectUser",function(e){n.setState({selectedUser:e})}),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;l.a.get("/api/document/".concat(this.state.document,"/annotations")).then(function(t){return e.setState({annotations:t.data})}),l.a.get("/api/document/".concat(this.state.document,"/contributions")).then(function(t){var n=t.data.by_user.map(function(e){return[e.username,e.value]}),r=t.data.contribution_history;e.setState({editsPerUser:n,editHistory:r})})}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(E,{annotations:this.state.annotations}),a.a.createElement(x,{editsPerUser:this.state.editsPerUser,onSelect:this.selectUser}),a.a.createElement(P,{history:this.state.editHistory,forUser:this.state.selectedUser,clearFilter:function(){return e.selectUser()}}))}}])&&_(n.prototype,o),s&&_(n,s),t}();n.d(t,"init",function(){return M});var M=function(e){s.a.render(a.a.createElement(C,{config:e}),document.getElementById(e.id))}}})});