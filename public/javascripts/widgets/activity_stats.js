!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ActivityStats",[],e):"object"==typeof exports?exports.ActivityStats=e():t.ActivityStats=e()}(window,function(){return function(t){function e(e){for(var r,o,i=e[0],l=e[1],c=e[2],j=0,f=[];j<i.length;j++)o=i[j],s[o]&&f.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);for(u&&u(e);f.length;)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={0:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window.webpackJsonpActivityStats=window.webpackJsonpActivityStats||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;return a.push([173,1]),n()}({167:function(t,e,n){var r={"./af":15,"./af.js":15,"./ar":16,"./ar-dz":17,"./ar-dz.js":17,"./ar-kw":18,"./ar-kw.js":18,"./ar-ly":19,"./ar-ly.js":19,"./ar-ma":20,"./ar-ma.js":20,"./ar-sa":21,"./ar-sa.js":21,"./ar-tn":22,"./ar-tn.js":22,"./ar.js":16,"./az":23,"./az.js":23,"./be":24,"./be.js":24,"./bg":25,"./bg.js":25,"./bm":26,"./bm.js":26,"./bn":27,"./bn.js":27,"./bo":28,"./bo.js":28,"./br":29,"./br.js":29,"./bs":30,"./bs.js":30,"./ca":31,"./ca.js":31,"./cs":32,"./cs.js":32,"./cv":33,"./cv.js":33,"./cy":34,"./cy.js":34,"./da":35,"./da.js":35,"./de":36,"./de-at":37,"./de-at.js":37,"./de-ch":38,"./de-ch.js":38,"./de.js":36,"./dv":39,"./dv.js":39,"./el":40,"./el.js":40,"./en-SG":41,"./en-SG.js":41,"./en-au":42,"./en-au.js":42,"./en-ca":43,"./en-ca.js":43,"./en-gb":44,"./en-gb.js":44,"./en-ie":45,"./en-ie.js":45,"./en-il":46,"./en-il.js":46,"./en-nz":47,"./en-nz.js":47,"./eo":48,"./eo.js":48,"./es":49,"./es-do":50,"./es-do.js":50,"./es-us":51,"./es-us.js":51,"./es.js":49,"./et":52,"./et.js":52,"./eu":53,"./eu.js":53,"./fa":54,"./fa.js":54,"./fi":55,"./fi.js":55,"./fo":56,"./fo.js":56,"./fr":57,"./fr-ca":58,"./fr-ca.js":58,"./fr-ch":59,"./fr-ch.js":59,"./fr.js":57,"./fy":60,"./fy.js":60,"./ga":61,"./ga.js":61,"./gd":62,"./gd.js":62,"./gl":63,"./gl.js":63,"./gom-latn":64,"./gom-latn.js":64,"./gu":65,"./gu.js":65,"./he":66,"./he.js":66,"./hi":67,"./hi.js":67,"./hr":68,"./hr.js":68,"./hu":69,"./hu.js":69,"./hy-am":70,"./hy-am.js":70,"./id":71,"./id.js":71,"./is":72,"./is.js":72,"./it":73,"./it-ch":74,"./it-ch.js":74,"./it.js":73,"./ja":75,"./ja.js":75,"./jv":76,"./jv.js":76,"./ka":77,"./ka.js":77,"./kk":78,"./kk.js":78,"./km":79,"./km.js":79,"./kn":80,"./kn.js":80,"./ko":81,"./ko.js":81,"./ku":82,"./ku.js":82,"./ky":83,"./ky.js":83,"./lb":84,"./lb.js":84,"./lo":85,"./lo.js":85,"./lt":86,"./lt.js":86,"./lv":87,"./lv.js":87,"./me":88,"./me.js":88,"./mi":89,"./mi.js":89,"./mk":90,"./mk.js":90,"./ml":91,"./ml.js":91,"./mn":92,"./mn.js":92,"./mr":93,"./mr.js":93,"./ms":94,"./ms-my":95,"./ms-my.js":95,"./ms.js":94,"./mt":96,"./mt.js":96,"./my":97,"./my.js":97,"./nb":98,"./nb.js":98,"./ne":99,"./ne.js":99,"./nl":100,"./nl-be":101,"./nl-be.js":101,"./nl.js":100,"./nn":102,"./nn.js":102,"./pa-in":103,"./pa-in.js":103,"./pl":104,"./pl.js":104,"./pt":105,"./pt-br":106,"./pt-br.js":106,"./pt.js":105,"./ro":107,"./ro.js":107,"./ru":108,"./ru.js":108,"./sd":109,"./sd.js":109,"./se":110,"./se.js":110,"./si":111,"./si.js":111,"./sk":112,"./sk.js":112,"./sl":113,"./sl.js":113,"./sq":114,"./sq.js":114,"./sr":115,"./sr-cyrl":116,"./sr-cyrl.js":116,"./sr.js":115,"./ss":117,"./ss.js":117,"./sv":118,"./sv.js":118,"./sw":119,"./sw.js":119,"./ta":120,"./ta.js":120,"./te":121,"./te.js":121,"./tet":122,"./tet.js":122,"./tg":123,"./tg.js":123,"./th":124,"./th.js":124,"./tl-ph":125,"./tl-ph.js":125,"./tlh":126,"./tlh.js":126,"./tr":127,"./tr.js":127,"./tzl":128,"./tzl.js":128,"./tzm":129,"./tzm-latn":130,"./tzm-latn.js":130,"./tzm.js":129,"./ug-cn":131,"./ug-cn.js":131,"./uk":132,"./uk.js":132,"./ur":133,"./ur.js":133,"./uz":134,"./uz-latn":135,"./uz-latn.js":135,"./uz.js":134,"./vi":136,"./vi.js":136,"./x-pseudo":137,"./x-pseudo.js":137,"./yo":138,"./yo.js":138,"./zh-cn":139,"./zh-cn.js":139,"./zh-hk":140,"./zh-hk.js":140,"./zh-tw":141,"./zh-tw.js":141};function s(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=a,t.exports=s,s.id=167},168:function(t,e,n){var r=n(169);"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(171)(r,s);r.locals&&(t.exports=r.locals)},169:function(t,e,n){(t.exports=n(170)(!1)).push([t.i,".panel.w2 {\n  width: 16.6%; }\n\n.panel.w3 {\n  width: 25%; }\n\n.panel.w5 {\n  width: 41.6%; }\n\n.panel.w6 {\n  width: 50%; }\n\n.panel.w7 {\n  width: 58.3%; }\n\n.panel.w12 {\n  width: 100%; }\n\n.panel.h2 {\n  height: 180px; }\n\n.panel.h3 {\n  height: 270px; }\n\n.panel.h4 {\n  height: 360px; }\n\n.inner {\n  position: relative; }\n\n.inner.summary-stats {\n  min-height: 170px;\n  padding: 20px 30px; }\n  .inner.summary-stats td {\n    padding: 2px;\n    font-size: 18px;\n    line-height: 24px;\n    vertical-align: text-top; }\n  .inner.summary-stats td:first-child {\n    text-align: right;\n    font-size: 26px; }\n\n#annotations-by-category {\n  position: absolute;\n  top: 20px;\n  right: 30px; }\n",""])},173:function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r),a=n(142),o=n.n(a),i=n(5),l=n.n(i),c=n(4);n(165);class u{constructor(t){this._a=t}getBodiesOfType(t){return Array.isArray(t)?this._a.bodies.filter(e=>t.includes(e.type)):this._a.bodies.filter(e=>e.type===t)}getCategoryBodies(){return this.getBodiesOfType(["PLACE","PERSON","EVENT"])}getTags(){return this.getBodiesOfType("TAG")}getComments(){return this.getBodiesOfType("COMMENT")}}class j{constructor(t){this._annotations=t}total(){return this._annotations.length}totalTags(){return this._totalTags||(this._totalTags=this._annotations.reduce((t,e)=>t+new u(e).getTags().length,0)),this._totalTags}totalComments(){return this._totalComments||(this._totalComments=this._annotations.reduce((t,e)=>t+new u(e).getComments().length,0)),this._totalComments}bodiesByType(){if(!this._bodiesByType){const t={PLACE:0,PERSON:0,EVENT:0,NONE:0};this._annotations.forEach(e=>{const n=new u(e).getCategoryBodies();n.length>0?n.forEach(e=>{t[e.type]++}):t.NONE++}),this._bodiesByType=[["Places",t.PLACE],["People",t.PERSON],["Events",t.EVENT],["Uncategorized",t.NONE]]}return this._bodiesByType}totalRelations(){return this._totalRelations||(this._totalRelations=this._annotations.reduce((t,e)=>e.relations?t+e.relations.length:t,0)),this._totalRelations}contributors(){return this._contributors||(this._contributors=this._annotations.reduce((t,e)=>{const n=new Set([...t,...e.contributors]);return Array.from(n)},[])),this._contributors}}n(168);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=["#57c17b","#6f87d8","#bc51bc","#afafaf"],g=function(t){function e(){var t,n,r,s,a,o,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return r=this,n=!(s=(t=d(e)).call.apply(t,[this].concat(c)))||"object"!==f(s)&&"function"!=typeof s?h(r):s,a=h(n),o="state",i={document:n.props.config.document||"asckvtl43e9jca",annotations:[],editsPerUser:[],activityPerUser:[]},o in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,n}var n,a,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,r["Component"]),n=e,(a=[{key:"componentDidMount",value:function(){var t=this;l.a.get("/api/document/".concat(this.state.document,"/annotations")).then(function(e){t.setState({annotations:e.data})}),l.a.get("/api/document/".concat(this.state.document,"/contributions")).then(function(e){var n=e.data.by_user.map(function(t){return[t.username,t.value]}),r=e.data.contribution_history.reduce(function(t,e){var n=e[2].map(function(t){return t.username}),r=new Set([].concat(m(t),m(n)));return Array.from(r)},[]).map(function(t){var n=e.data.contribution_history.map(function(e){var n=e[0],r=e[2].filter(function(e){return e.username===t});return 1===r.length?[n,r[0].value]:[n,0]});return{name:t,data:n}});t.setState({editsPerUser:n,activityPerUser:r})})}},{key:"render",value:function(){var t=new j(this.state.annotations);return s.a.createElement("div",null,s.a.createElement("div",{className:"panel"},s.a.createElement("h2",null,"Summary"),s.a.createElement("div",{className:"inner summary-stats"},s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,t.total()),s.a.createElement("td",null,"Annotations")),s.a.createElement("tr",null,s.a.createElement("td",null,t.totalTags()),s.a.createElement("td",null,"Tags")),s.a.createElement("tr",null,s.a.createElement("td",null,t.totalComments()),s.a.createElement("td",null,"Comments")),s.a.createElement("tr",null,s.a.createElement("td",null,t.totalRelations()),s.a.createElement("td",null,"Relations")),s.a.createElement("tr",null,s.a.createElement("td",null,t.contributors().length),s.a.createElement("td",null,"Contributors"))))),s.a.createElement(c.c,{id:"annotations-by-category",width:"170px",height:"170px",legend:!1,colors:b,data:t.bodiesByType()}))),s.a.createElement("div",{className:"panel"},s.a.createElement("h2",null,"Contributors"),s.a.createElement("div",{className:"inner"},s.a.createElement(c.a,{xtitle:"Total edits",data:this.state.editsPerUser}))),s.a.createElement("div",{className:"panel"},s.a.createElement("h2",null,"Activity over time"),s.a.createElement("div",{className:"inner"},s.a.createElement(c.b,{stacked:!0,data:this.state.activityPerUser}))))}}])&&p(n.prototype,a),o&&p(n,o),e}();n.d(e,"init",function(){return v});var v=function(t){o.a.render(s.a.createElement(g,{config:t}),document.getElementById(t.id))}}})});