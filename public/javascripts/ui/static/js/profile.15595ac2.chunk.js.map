{"version":3,"sources":["common/account/ActivityHistory.jsx","common/account/TopCollaborators.jsx","common/documents/table/rows/BaseRowComponent.jsx","common/documents/table/rows/DocumentRow.jsx","common/documents/table/rows/FolderRow.jsx","common/documents/table/rows/HeaderRow.jsx","common/documents/table/preferences/ColumnOrder.jsx","common/documents/table/preferences/PreferencesModal.jsx","common/documents/table/TablePane.jsx","common/documents/grid/Document.jsx","common/documents/grid/Folder.jsx","common/documents/grid/GridPane.jsx","common/documents/table/Columns.js","common/Modal.jsx","common/account/Avatar.jsx","common/documents/FiledropHint.jsx","profile/initialState.js","profile/sidebar/Sidebar.jsx","profile/top/Search.jsx","profile/top/TopBar.jsx","profile/Profile.jsx","profile/App.jsx","common/header/HeaderIcon.jsx","common/header/Breadcrumbs.jsx","common/documents/Readme.jsx","common/account/IdentityInfo.jsx"],"names":["LINE_STYLE","stroke","strokeWidth","AXIS_STYLE","fontSize","color","tickFormatter","tick","Intl","DateTimeFormat","month","format","Date","ActivityHistory","n","toTimestamp","empty","Array","fill","reduce","arr","_","last","length","push","reverse","map","timestamp","value","t","toTime","getTime","this","createEmptySeries","concat","timeseries","props","stats","over_time","parse","date","padTimeseries","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","react_number_format__WEBPACK_IMPORTED_MODULE_10___default","displayType","total_contributions","thousandSeparator","recharts__WEBPACK_IMPORTED_MODULE_6__","width","height","barCategoryGap","data","computeChart","recharts__WEBPACK_IMPORTED_MODULE_7__","strokeDasharray","horizontal","recharts__WEBPACK_IMPORTED_MODULE_8__","type","dataKey","axisLine","tickSize","tickCount","tickLine","domain","padding","left","right","recharts__WEBPACK_IMPORTED_MODULE_9__","Component","TopCollaborators","state","collaborators","fetchCollaborators","_this2","username","axios","get","then","result","setState","Fragment","title","user","key","href","_Avatar_jsx__WEBPACK_IMPORTED_MODULE_7__","BaseRowComponent","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","updateTotalRowSpan","next","_totalSpan","columns","total","field","Columns","getSpan","ICONS","TEXT_PLAIN","TEXT_TEIXML","IMAGE_UPLOAD","IMAGE_IIIF","DATA_CSV","FORMATTERS","language","toUpperCase","uploaded_at","datetime","year","day","last_edit_at","react_default","lib_default","public_visibility","visibility","access_level","level","annotations","number_format_default","status_ratio","ratio","verified","unverified","not_identifiable","pctGreen","pctYellow","labels","tooltip","count","slice","style","AGGREGATE_FIELDS","agg_document","item","author","DocumentRow","url","substring","prototype","formatter","undefined","filetypes","id","selected","onClick","startsWith","createAggregateField","createField","src","alt","FolderRow","editable","makeEditable","evt","_input","select","preventDefault","stopPropagation","onChange","target","onKeyPress","which","onRename","ref","i","onKeyDown","HeaderRow","onSort","bind","HEADER_NAMES","sortColumn","sortAsc","SortableItem","SortableElement","_ref","label","SortableList","SortableContainer","_ref2","items","idx","index","ColumnOrder","onSortEnd","e","oldIndex","newIndex","PreferencesModal","states","COLUMNS","forEach","isChecked","includes","checked","_this3","toAppend","filter","checkAll","setAllRows","name","prev","indexOf","splice","arrayMove","_this4","Modal","onClose","onCancel","onClickAll","toggleOne","htmlFor","ColumnOrder_ColumnOrder","onSave","TablePane","drag","tablePreferencesOpen","showPreferences","visible","onSavePreferences","onChangeColumnConfig","sortBy","asc","config","sorting","by","onDrag","active","onDrop","files","dataTransfer","getData","hostname","document","onDropFiles","window","location","onDropSourceURL","args","selection","FolderRow_FolderRow","onRowClick","onRenameFolder","DocumentRow_DocumentRow","handleClick","onSelect","tablePane","es","rowCount","rowHeight","rowRenderer","FiledropHint","busy","HeaderRow_HeaderRow","enableFiledrop","dist_es","disableClick","onDragEnter","onDragLeave","PreferencesModal_PreferencesModal","Document","isStacked","fileCount","Folder","GridPane","itemsPerRow","fromIndex","itemsInRow","Math","min","renderedItems","rowIdx","Folder_Folder","onTileClick","Document_Document","file_count","gridPane","floor","ceil","disableFiledrop","COLUMNS_SHARED_WITH_ME","date_freeform","last_edit_by","activity","owner","shared_by","COLUMN_WIDTH","AGGREGATE_COLUMNS","_home_simonr_Workspaces_pelagios_recogito2_workspace_frontend_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_home_simonr_Workspaces_pelagios_recogito2_workspace_frontend_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","w","view","c","react_draggable__WEBPACK_IMPORTED_MODULE_6___default","handle","children","Avatar","str","hash","charCodeAt","stringToHslColor","backgroundColor","charAt","AnimatedDiv","posed","div","open","bottom","transition","ease","duration","closed","pose","DEFAULT_STATE","me","visitedAccount","presentation","page","breadcrumbs","readme","total_count","table_config","initialState","stored","localStorage","getItem","JSON","objectSpread","persistState","prefixed","setItem","stringify","Sidebar","IdentityInfo","account","Search","placeholder","TopBar","real_name","logged_in","Search_Search","loggedInAs","notLoggedIn","Profile","TopBar_TopBar","sidebar_Sidebar","Breadcrumbs","path","docCount","total_docs","HeaderIcon","icon","onTogglePresentation","Readme","content","tableConfig","onSortTable","App","refreshPage","folderId","_profileOwner","expandAggregatedColumns","sort","post","r","_r$data","togglePresentation","sortTable","changeColumConfig","pathname","onhashchange","b","Promise","all","profile_Profile","changeColumnConfig","render","App_App","getElementById","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","link","VIEW_LABELS","MY_DOCUMENTS","SHARED_WITH_ME","SEARCH","INITIAL_STATE","editing","modifiedContent","onKeydown","ctrlKey","addEventListener","removeEventListener","onDelete","onUpdate","react_markdown__WEBPACK_IMPORTED_MODULE_6___default","source","onEdit","react_sane_contenteditable__WEBPACK_IMPORTED_MODULE_7__","tagName","multiLine","editOnOpen","renderEdit","renderView","replace","dataAvailable","member_since","_Avatar_jsx__WEBPACK_IMPORTED_MODULE_6__","bio","website","formatURL"],"mappings":"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","file":"static/js/profile.15595ac2.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Bar, BarChart, CartesianGrid, XAxis } from 'recharts';\nimport NumberFormat from 'react-number-format';\n\nconst LINE_STYLE = {\n  stroke: '#c2c2c2', \n  strokeWidth:1\n}\n\nconst AXIS_STYLE = {\n  fontSize:\"12px\",\n  color:\"#3f3f3f\"\n}\n\nconst WEEK = 3600000 * 24 * 7; // A week in milliseconds\n\nconst tickFormatter = (tick) => new Intl.DateTimeFormat('en-GB', {\n  month: 'short'\n}).format(new Date(tick));\n\nexport default class ActivityHistory extends Component {\n\n  /** Helper that generates an empty time series of N buckets with value 0 */\n  createEmptySeries(n, toTimestamp) {\n    const empty = new Array(n);\n    empty.fill(0); // Needs to contain *something* for .reduce to work\n\n    const timestamps = empty.reduce((arr, _) => {\n      const last = arr[arr.length - 1];\n      arr.push(last - WEEK);\n      return arr;\n    }, [ toTimestamp - WEEK ]).reverse();\n\n    return timestamps.map(timestamp => {\n      return { timestamp: timestamp, value: 0 };\n    });\n  }\n\n  padTimeseries(t) {\n    const toTime = t.length > 0 ? t[0].timestamp : new Date().getTime();\n    const padding = this.createEmptySeries(19 - t.length, toTime);\n    return padding.concat(t);\n  }\n\n  computeChart() {\n    // Data comes as ISO strings - convert\n    const timeseries = this.props.stats.over_time.map(t => {\n      return { timestamp: Date.parse(t.date), value: t.value };\n    });\n\n    if (timeseries.length < 20) {\n      return this.padTimeseries(timeseries);\n    } else {\n      return timeseries;\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.props.className ? \n        `activity-widget ${this.props.className}` : \"activity-widget\"}>\n\n        <h2>Activity \n          {this.props.stats && \n            <span className=\"count\">\n              <NumberFormat \n                displayType=\"text\"\n                value={this.props.stats.total_contributions}\n                thousandSeparator={true} /> edits\n            </span>\n          }\n        </h2>\n\n        {this.props.stats &&\n          <BarChart \n            width={this.props.width} \n            height={this.props.height} \n            barCategoryGap={1.5}\n            data={this.computeChart()} >\n\n            <CartesianGrid \n              strokeDasharray=\"3\" \n              horizontal={false}/>\n\n            <XAxis \n              type=\"number\"\n              dataKey=\"timestamp\"\n\n              axisLine={LINE_STYLE} \n\n              tick={AXIS_STYLE}\n              tickSize={4}\n              tickCount={6}\n              tickLine={LINE_STYLE}\n              tickFormatter={tickFormatter}\n\n              height={20}\n              domain={['dataMin', 'dataMax']}\n              padding={{ left: 5, right: 5 }} />\n\n            <Bar \n              dataKey=\"value\" \n              fill={this.props.fill} />\n\n          </BarChart>\n        }\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport Avatar from './Avatar.jsx';\n\nexport default class TopCollaborators extends Component {\n\n  state = {\n    collaborators: []\n  }\n\n  componentWillMount() {\n    this.fetchCollaborators();\n  }\n\n  fetchCollaborators() {\n    if (this.props.username)\n      axios\n        .get(`/api/account/${this.props.username}/collaborators`)\n        .then(result => this.setState({ collaborators: result.data }));\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.state.collaborators.length > 0 &&\n          <div className={this.props.className ? `collaborator-list ${this.props.className}` : 'collaborator-list'}>\n            <h2>{this.props.title}</h2>\n            <ul>\n              {this.state.collaborators.map(user => \n                <li key={user.username}>\n                  <a href={`/${user.username}`} title={user.username}>\n                    <Avatar username={user.username} />\n                  </a>\n                </li>\n              )}\n            </ul>\n          </div>\n        }\n      </React.Fragment>\n    )\n  }\n\n}","import { Component } from 'react';\nimport { Columns } from '../Columns';\n\nexport default class BaseRowComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.updateTotalRowSpan(props);\n  }\n\n  componentWillReceiveProps(next) {\n    this.updateTotalRowSpan(next);\n  }\n\n  /** Updates total unit width requirement for current row layout **/\n  updateTotalRowSpan(props) {\n    this._totalSpan = props.columns.reduce((total, field) => total + Columns.getSpan(field), 0);\n  }\n\n  getWidth(field) {\n    const span = Columns.getSpan(field);\n    return span / this._totalSpan;\n  }\n  \n}","import React from 'react';\nimport NumberFormat from 'react-number-format';\nimport TimeAgo from 'react-timeago';\nimport BaseRowComponent from './BaseRowComponent';\n\n/** Icons for possible content type values **/\nconst ICONS = {\n  TEXT_PLAIN   : 'icon_text.png',\n  TEXT_TEIXML  : 'icon_tei.png',\n  IMAGE_UPLOAD : 'icon_image.png',\n  IMAGE_IIIF   : 'icon_iiif.png',\n  DATA_CSV     : 'icon_csv.png'\n};\n\n/** Formatting rules for possible field types **/\nconst FORMATTERS = {\n  language: (language) => \n    language.toUpperCase(),\n\n  uploaded_at: (datetime) => \n    new Intl.DateTimeFormat('en-GB', {\n      year : 'numeric',\n      month: 'short',\n      day  : '2-digit'\n    }).format(new Date(datetime)),\n  \n  last_edit_at: (datetime) => \n    <TimeAgo date={datetime} />,\n\n  public_visibility: (visibility) => {\n    if (visibility === 'PUBLIC') \n      return ( <span className=\"icon\" title=\"Open to anyone\">&#xf09c;</span> );\n    else if (visibility === 'WITH_LINK')\n      return ( <span className=\"icon\" title=\"Open to anyone with the link\">&#xf0c1;</span> );\n    else \n      return ( <span className=\"icon\" title=\"Private\">&#xf023;</span> );\n  },\n\n  access_level: (level) => {\n    if (level === 'ADMIN')\n      return ( <span className=\"icon\" title=\"ADMIN\">&#xf0ad;</span> );\n    else if (level === 'WRITE')\n      return ( <span className=\"icon\" title=\"WRITE\">&#xf040;</span> );\n    else\n      return ( <span className=\"icon\" title=\"READ\">&#xf06e;</span> );\n  },\n\n  annotations: (annotations) =>\n    <NumberFormat \n      displayType=\"text\"\n      value={annotations}\n      thousandSeparator={true} />,\n\n  status_ratio: (ratio) => {\n    const total = ratio.verified + ratio.unverified + ratio.not_identifiable;\n    const pctGreen = ratio.verified / total * 100;\n    const pctYellow = ratio.not_identifiable / total * 100;\n\n    const labels = {\n      'verified': 'verified',\n      'unverified': 'unverified',\n      'not_identifiable': 'flagged'\n    }\n\n    const tooltip = ['verified', 'unverified', 'not_identifiable'].reduce((tooltip, next) => {\n      const count = ratio[next];\n      if (count === 0)\n        return tooltip;\n      else\n        return `${tooltip} ${count} ${labels[next]},`;\n    }, '').slice(0, -1);\n\n    return (\n      <span className=\"bar\" title={tooltip}>\n        <span className=\"verified\" style={{ width: `${pctGreen}%` }} />\n        <span className=\"not_identifiable\" style={{ width: `${pctYellow}%` }} />\n      </span>\n    )\n  }\n\n};\n\n/** Rules for aggregate fields **/\nconst AGGREGATE_FIELDS = {\n  agg_document: (item) => (item.author) ?\n                            `${item.author}, ${item.title}` : item.title\n};\n\nexport default class DocumentRow extends BaseRowComponent {\n\n  createAggregateField(url, field) {\n    return (\n      <a \n        key={field}\n        href={url} \n        className={field.substring(4)}\n        style={{ width: `${100 * super.getWidth(field)}%` }}>\n\n        {AGGREGATE_FIELDS[field](this.props.item)}\n      </a>\n    )\n  }\n\n  createField(url, field) {\n    const formatter = FORMATTERS[field];\n\n    const value = this.props.item[field] !== undefined ? \n      (formatter ? formatter(this.props.item[field]) : this.props.item[field]) :\n      ''; // empty value\n\n    return (\n      <a \n        key={field}\n        href={url}\n        className={field}\n        style={{ width: `${100 * super.getWidth(field)}%` }}>{value}</a>\n    )\n  }\n\n  render() {\n    const type = this.props.item.filetypes[0];\n    const url = `document/${this.props.item.id}/part/1/edit`;\n\n    return (\n      <div\n        className={`row${(this.props.selected) ? ' selected' : ''}`}\n        style={this.props.style}\n        onClick={this.props.onClick} >\n        \n        { this.props.columns.map(field => field.startsWith('agg_') ? \n          this.createAggregateField(url, field) : this.createField(url, field)) }\n\n        <span className={`type icon ${type}`}>\n          <img src={`/assets/images/${ICONS[type]}`} alt={`icon type ${type}`} />\n        </span>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class FolderRow extends Component {\n\n  state = { \n    title: this.props.item.title,\n    editable: false\n  }\n\n  componentWillReceiveProps(next) {\n    this.setState({ \n      title: next.item.title,\n      editable: false\n    });\n  }\n\n  makeEditable = (evt) => {\n    this.setState({ editable: true },\n      () => this._input.select());\n\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n\n  onChange = (evt) => {\n    this.setState({ title: evt.target.value });\n  }\n\n  onKeyPress = (evt) => {\n    if (evt.which === 13) {\n      this.setState({ editable: false}, \n        () => this.props.onRename(this.props.item, this.state.title));\n    }\n  }\n\n  render() {\n    return (\n      <a\n        href={`#${this.props.item.id}`} \n        style={this.props.style}\n        className={`row folder${(this.props.selected) ? ' selected' : ''}`}\n        onClick={this.props.onClick}>\n\n        <span className=\"folder-title\">\n          { this.state.editable ? \n            <input \n              ref={i => this._input = i}\n              value={this.state.title}\n              onClick={this.makeEditable}\n              onChange={this.onChange}\n              onKeyDown={this.onKeyPress} />\n          : <span\n              className=\"editable\" \n              onClick={this.makeEditable} >{this.state.title}</span> }\n        </span>\n\n        <span className=\"type icon\">&#xf07b;</span>\n      </a>\n    )\n  }\n\n}\n","import React from 'react';\nimport BaseRowComponent from './BaseRowComponent';\nimport { HEADER_NAMES } from '../Columns';\n\nexport default class HeaderRow extends BaseRowComponent {\n\n  render() {\n    return (\n      <div className=\"column-labels\">\n        {this.props.columns.map(field =>\n          <span\n            key={field}\n            style={{ width: `${100 * super.getWidth(field)}%` }}\n            className={`label ${field}`}\n            onClick={this.props.onSort.bind(this, field)}>\n            <span className=\"inner-wrapper\">\n              <span className=\"inner\">\n                {HEADER_NAMES[field] || field}\n              </span>\n              {this.props.sortColumn === field &&\n                <span className=\"sort icon\">\n                  <span className=\"inner\">\n                    {(this.props.sortAsc) ? '\\ue688' : '\\ue682' }\n                  </span>\n                </span>\n              }\n            </span>\n          </span>\n        )}\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { HEADER_NAMES } from '../Columns.js';\n\nconst SortableItem = SortableElement(({ label }) =>\n  <div className=\"card\">{label}</div>\n);\n\nconst SortableList = SortableContainer(({ items }) =>\n  <div className=\"column-order\">\n    {items.map((item, idx) => (\n      <SortableItem key={`card-${idx}`} index={idx} label={HEADER_NAMES[item]} />\n    ))}\n  </div>\n);\n\nexport default class ColumnOrder extends Component {\n\n  render() {\n    return (\n      <SortableList\n        items={this.props.items}\n        onSortEnd={e => this.props.onSortEnd(e.oldIndex, e.newIndex)} />\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport { arrayMove } from 'react-sortable-hoc';\nimport Modal from '../../../Modal';\nimport ColumnOrder from './ColumnOrder';\nimport { COLUMNS, HEADER_NAMES } from '../Columns';\n\nexport default class PreferencesModal extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      columns: props.columns.slice(0)\n    }\n  }\n\n  componentWillReceiveProps(next) {\n    if (next.columns !== this.props.columns)\n      this.setState({ columns: next.columns.slice(0) });\n  }\n\n  /** Computes a map (fieldname -> checked) from the current columns state **/\n  getCheckboxStates(props) {\n    const states = {};\n\n    COLUMNS.forEach(field => {\n      const isChecked = this.state.columns.includes(field);\n      states[field] = isChecked;\n    });\n\n    return states;\n  }\n\n  /** Sets visibility for all rows to the given boolean value **/\n  setAllRows(checked) {\n    const checkAll = () => {\n      const toAppend = \n        COLUMNS.filter(field => !this.state.columns.includes(field));\n\n      this.setState({ columns: this.state.columns.concat(toAppend) });\n    };\n\n    const uncheckAll = () => {\n      this.setState({ columns: [] });\n    };\n\n    if (checked) \n      checkAll();\n    else\n      uncheckAll();\n  }\n\n  /**\n   * Clicking 'ALL' either checks all boxes or - if all are currently\n   * checked, unchecks them.\n   */\n  onClickAll() {\n    const allRowsChecked = COLUMNS.length === this.state.columns.length;\n    if (allRowsChecked)\n      this.setAllRows(false);\n    else\n      this.setAllRows(true);\n  }\n\n  /** Toggles the checkbox with the given name **/\n  toggleOne(name) {\n    this.setState(prev => {\n      const idx = prev.columns.indexOf(name);\n      if (idx < 0)\n        prev.columns.push(name);\n      else\n        prev.columns.splice(idx, 1);        \n    \n      return prev;\n    });\n  }\n\n  onSort(oldIndex, newIndex) {\n    this.setState({\n      columns: arrayMove(this.state.columns, oldIndex, newIndex)\n    });\n  }\n\n  render() {\n    // Helper to create a single checkbox + label row\n    const createRow = (field) =>\n      <li key={field}>\n        <input\n          type=\"checkbox\"\n          id={field}\n          name={field}\n          checked={this.state.columns.includes(field)}\n          onChange={this.toggleOne.bind(this, field)} />\n        <label htmlFor={field}>{HEADER_NAMES[field]}</label>\n      </li>\n\n    return (\n      <Modal\n        className=\"preferences\"\n        title=\"Configure Columns\"\n        onClose={this.props.onCancel}>\n\n        <div className=\"scroll-pane\">\n          <div className=\"selected-columns\">\n            <button\n              className=\"all nostyle\"\n              onClick={this.onClickAll.bind(this)}>All</button>\n            <ul>\n              { COLUMNS.map(createRow) }\n            </ul>\n          </div>\n\n          <ColumnOrder\n            items={this.state.columns} \n            onSortEnd={this.onSort.bind(this)} />\n        </div>\n\n        <div className=\"buttons\">\n          <button\n            className=\"btn\"\n            onClick={this.props.onSave.bind(this, this.state.columns)}>Save</button>\n\n          <button \n            className=\"btn outline\"\n            onClick={this.props.onCancel}>Cancel</button>\n        </div>\n      </Modal>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport { AutoSizer, List } from 'react-virtualized';\nimport Dropzone from 'react-dropzone'\nimport DocumentRow from './rows/DocumentRow';\nimport FiledropHint from '../FiledropHint';\nimport FolderRow from './rows/FolderRow';\nimport HeaderRow from './rows/HeaderRow';\nimport PreferencesModal from  './preferences/PreferencesModal';\n\nexport default class TablePane extends Component {\n\n  state = {\n    drag: false,\n    tablePreferencesOpen: false,\n  }\n\n  rowRenderer() {\n    return ((args) => {\n      const item = this.props.items[args.index];\n      const selected = this.props.selection && \n        this.props.selection.includes(item);\n\n      return (item.type === 'FOLDER') ?\n        <FolderRow \n          key={args.key} \n          style={args.style} \n          item={item} \n          selected={selected}\n          onClick={e => this.onRowClick(e, item, args.index)} \n          onRename={this.props.onRenameFolder} /> :\n\n        <DocumentRow\n          key={args.key}\n          style={args.style}\n          columns={this.props.config.columns}\n          item={item}\n          selected={selected}\n          onClick={e => this.onRowClick(e, item, args.index)} />\n    });\n  }\n\n  onRowClick(evt, item, idx) {\n    const selection = this.props.selection && \n      this.props.selection.handleClick(evt, item, idx, this.props.items);    \n      \n    if (selection)\n      this.props.onSelect(selection);\n  }\n\n  showPreferences = visible => {\n    this.setState({ tablePreferencesOpen: visible });\n  }\n\n  onSavePreferences = columns => {\n    this.setState({ tablePreferencesOpen: false });\n    this.props.onChangeColumnConfig(columns);\n  }\n\n  sortBy = field => {\n    const asc = this.props.config.sorting.by === field ? \n      ! this.props.config.sorting.asc : true;\n    this.props.onSort({ by: field, asc: asc });\n  }\n\n  onDrag = active => {\n    this.setState({ drag: active });\n  }\n\n  onDrop = (files, _, evt) => {\n    const url = evt.dataTransfer.getData('URL');\n\n    const hostname = url ? (() => {\n      const a = document.createElement('a');\n      a.href = url;\n      return a.hostname;\n    })() : null;\n\n    this.setState({ drag: false });\n\n    if (files.length > 0)\n      this.props.onDropFiles(files);\n    else if (url && hostname !== window.location.hostname) // Require external link\n      this.props.onDropSourceURL(url);\n  }\n\n  render() {\n    const tablePane =\n      <div className=\"documents-pane table-pane\">\n        <AutoSizer>\n          {({ height, width }) => (\n            <List\n              className=\"virtualized-list\"\n              width={width}\n              height={height}\n              rowCount={this.props.items.length}\n              rowHeight={47}\n              rowRenderer={this.rowRenderer()} />\n          )}\n        </AutoSizer>\n\n        { this.state.drag && \n          <FiledropHint /> }\n        \n        { this.props.busy &&\n           <div className=\"busy-mask\" /> }\n      </div>\n\n    return (\n      <React.Fragment>\n        <div className=\"documents-table-header\">\n          <HeaderRow \n            columns={this.props.config.columns} \n            sortColumn={this.props.config.sorting.by} \n            sortAsc={this.props.config.sorting.asc} \n            onSort={this.sortBy} />\n\n          <button\n            className=\"column-options-btn nostyle icon\"\n            onClick={() => this.showPreferences(true)} >&#xf141;</button>\n        </div>\n\n        { this.props.enableFiledrop ?\n          <Dropzone\n            className=\"dropzone\"\n            disableClick={true}\n            onDragEnter={() => this.onDrag(true)}\n            onDragLeave={() => this.onDrag(false)}\n            onDrop={this.onDrop}>\n            { tablePane }\n          </Dropzone> : tablePane\n        }\n\n        { this.state.tablePreferencesOpen &&\n          <PreferencesModal\n            columns={this.props.config.columns}\n            onCancel={() => this.showPreferences(false)} \n            onSave={this.onSavePreferences} />\n        }\n      </React.Fragment>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class Document extends Component {\n\n  render() {\n    const type = this.props.filetypes[0]; // TODO make more clever in the future\n    const isStacked = this.props.fileCount > 1;\n\n    return (\n      <a href={`document/${this.props.id}/part/1/edit`}\n        className={`cell${(this.props.selected) ? ' selected' : ''}`}\n        onClick={this.props.onClick} >\n        \n        <div className=\"inner\">\n          <div className={`item-wrapper${isStacked ? ' stacked' : ''}`}>\n            { isStacked && <div className=\"stack\" /> }\n            <div className={`document ${type}`}>\n              <div className=\"label\">\n                {this.props.title}\n              </div>\n            </div>\n          </div>\n        </div>\n      </a>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class Folder extends Component {\n\n  render() {\n    return (\n      <a href={`#${this.props.id}`} \n        className={`cell${(this.props.selected) ? ' selected' : ''}`}\n        onClick={this.props.onClick}>\n\n        <div className=\"inner\">\n          <div className=\"item-wrapper\">\n            <div className=\"folder\">\n              <div className=\"label\">\n                {this.props.title}\n              </div>\n            </div>\n          </div>\n        </div>\n      </a>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport Dropzone from 'react-dropzone'\nimport { AutoSizer, List } from 'react-virtualized';\nimport Document from './Document';\nimport Folder from './Folder';\nimport FiledropHint from '../FiledropHint';\n\nconst TILE_SIZE = 192;\n\n/**\n * Using the following example:\n *\n * https://stackoverflow.com/questions/46368305/how-to-make-a-list-grid-with-a-responsive-number-of-columns-using-react-virtuali\n * http://plnkr.co/edit/zjCwNeRZ7XtmFp1PDBsc?p=preview\n */\nexport default class GridPane extends Component {\n\n  state = {\n    drag: false\n  }\n\n  onTileClick(evt, item, idx) {\n    const selection = \n      this.props.selection && this.props.selection.handleClick(evt, item, idx, this.props.items);    \n\n    if (selection)\n      this.props.onSelect(selection);\n  }\n\n  rowRenderer(itemsPerRow) {\n    return (args => {\n      const fromIndex = args.index * itemsPerRow;\n      const toIndex = Math.min(fromIndex + itemsPerRow, this.props.items.length);\n      const itemsInRow = toIndex - fromIndex;\n\n      const renderedItems = new Array(itemsInRow).fill(undefined).map((_, rowIdx) => {\n        const idx = rowIdx + fromIndex;\n        const item = this.props.items[idx];\n        const selected = this.props.selection && this.props.selection.includes(item);\n\n        return (item.type === 'FOLDER') ?\n            <Folder\n              key={idx} \n              id={item.id}\n              title={item.title} \n              selected={selected}\n              onClick={e => this.onTileClick(e, item, idx)} /> :\n            \n            <Document\n              key={idx}\n              id={item.id}\n              title={item.title}\n              filetypes={item.filetypes}\n              fileCount={item.file_count}\n              selected={selected}\n              onClick={e => this.onTileClick(e, item, idx)} />\n      });\n\n      if (itemsInRow < itemsPerRow) { // Add dummies to preserve grid layout\n        renderedItems.push(new Array(itemsPerRow - itemsInRow).fill(undefined).map((_, idx) =>\n          <div className=\"cell dummy\" key={`dummy-${idx}`} />\n        ))\n      }\n\n      return (\n        <div\n          key={args.key}\n          style={args.style}\n          className=\"row\">\n          {renderedItems}\n        </div>\n      )\n    });\n  }\n\n  onDrag = (active) => {\n    this.setState({ drag: active });\n  }\n\n  onDrop = (files, _, evt) => {\n    const url = evt.dataTransfer.getData('URL');\n\n    this.setState({ drag: false });\n\n    if (files.length > 0) this.props.onDropFiles(files);\n    else if (url) this.props.onDropSourceURL(url);\n  }\n\n  render() {\n    const gridPane =\n      <AutoSizer>\n        {({ height, width }) => {\n          const itemsPerRow = Math.floor(width / TILE_SIZE);\n          const rowCount = Math.ceil(this.props.items.length / itemsPerRow);\n\n          return (\n            <List\n              className=\"virtualized-grid\"\n              width={width}\n              height={height}\n              rowCount={rowCount}\n              rowHeight={TILE_SIZE}\n              rowRenderer={this.rowRenderer(itemsPerRow)} />\n          )\n        }}\n      </AutoSizer>\n\n    return (\n      <React.Fragment>\n        <div className=\"documents-pane grid-pane\">\n          {this.props.disableFiledrop ? gridPane :\n            <Dropzone\n              className=\"dropzone\"\n              disableClick={true}\n              onDragEnter={() => this.onDrag(true)}\n              onDragLeave={() => this.onDrag(false)}\n              onDrop={this.onDrop}>\n\n              {gridPane}\n\n            </Dropzone>\n          }\n\n          { this.state.drag && <FiledropHint /> }\n        </div>\n      </React.Fragment>\n    )\n  }\n\n}\n","// Columns available in all views\nconst COLUMNS_GENERAL = [\n  // Aggregate fields\n  // 'agg_document',\n\n  // Common fields\n  'author',\n  'title',\n  'language',\n  'date_freeform',\n  'uploaded_at',\n  'last_edit_at',\n  'last_edit_by',\n  'annotations',\n  'public_visibility',\n  'status_ratio'\n  // 'activity'\n];\n\n// Columns specific to SHARED_WITH_ME view\nconst COLUMNS_SHARED_WITH_ME = [\n  'owner',\n  'shared_by',\n  'access_level'\n];\n\nexport const COLUMNS = COLUMNS_GENERAL.concat(COLUMNS_SHARED_WITH_ME);\n\n// Labels to use for fields\nexport const HEADER_NAMES = {\n  // agg_document    : 'Document',\n\n  author            : 'Author',\n  title             : 'Title',\n  language          : 'Language',\n  date_freeform     : 'Date',\n  uploaded_at       : 'Uploaded at',\n  last_edit_at      : 'Last edit',\n  last_edit_by      : 'Last edit by',\n  annotations       : 'Annotations',\n  public_visibility : 'Visibility',\n  status_ratio      : 'Verification ratio',\n  activity          : 'Activity graph',\n\n  owner             : 'Document owner',\n  shared_by         : 'Shared by',\n  access_level      : 'Access'\n};\n\n// Relative width requirements per column (XL, L, M, S)\nexport const COLUMN_WIDTH = {\n  agg_document    : 'XL',\n\n  author            : 'M',\n  title             : 'L',\n  language          : 'M',\n  date_freeform     : 'M',\n  uploaded_at       : 'M',\n  last_edit_at      : 'M',\n  last_edit_by      : 'M',\n  annotations       : 'M',\n  public_visibility : 'M',\n  status_ratio      : 'M',\n  activity          : 'M',\n\n  owner             : 'M',\n  shared_by         : 'M',\n  access_level      : 'M'\n};\n\nexport const AGGREGATE_COLUMNS = {\n  agg_document: [ 'author', 'document' ]\n};\n\n// Static helper methods \nexport class Columns {\n\n  static getSpan(field) {\n    const w = COLUMN_WIDTH[field];\n    if (w === 'XL') \n      return 6;\n    else if (w === 'L')\n      return 4;\n    else if (w === 'M')\n      return 2;\n    else if (w === 'S')\n      return 1;\n  }\n\n  /** Expands agg_ columns to those that are required to build them **/\n  static expandAggregatedColumns(columns) {\n    return columns.reduce((result, field) => {\n      if (field.startsWith('agg_'))\n        result = result.concat(AGGREGATE_COLUMNS[field]);\n      else\n        // Just append\n        result.push(field);\n\n      return result;\n    }, []);\n  }\n\n  /** Removes the columns that are not applicable in the given view **/\n  static filterByView(columns, view) { \n    if (view === 'MY_DOCUMENTS')\n      // Remove columns specific to 'Shared With Me'\n      return columns.filter(c => !COLUMNS_SHARED_WITH_ME.includes(c));\n    else\n      // All\n      return columns; \n  }\n\n}","import React, { Component } from 'react';\nimport Draggable from 'react-draggable';\n\nexport default class Modal extends Component {\n\n  render() {\n    return (\n      <div className={`clicktrap ${this.props.className}`}>\n        <div className=\"modal-wrapper\">\n          <Draggable handle=\".modal-header\">\n            <div className=\"modal\">\n              <div className=\"modal-header\">\n                <h1 className=\"title\">{this.props.title}</h1>\n                <button\n                  className=\"close nostyle\"\n                  onClick={this.props.onClose}>&#xe897;</button>\n              </div>\n\n              <div className=\"modal-body\">\n                {this.props.children}\n              </div>\n            </div>\n          </Draggable>\n        </div>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class Avatar extends Component {\n\n  // https://medium.com/@pppped/compute-an-arbitrary-color-for-user-avatar-starting-from-his-username-with-javascript-cd0675943b66\n  stringToHslColor(str) {\n    let hash = 0;\n    for (let i=0; i<str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    return hash % 360;\n  }\n\n  render() {\n    const color = this.props.username ? `hsl(${this.stringToHslColor(this.props.username)}, 35%, 65%)` : '#e2e2e2';\n\n    return (\n      <div className=\"avatar\" style={{ backgroundColor: color }}>\n        <div className=\"inner\">\n          { this.props.username && this.props.username.charAt(0).toUpperCase() }\n        </div>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport posed from 'react-pose';\n\nconst AnimatedDiv = posed.div({\n  open:   { \n    bottom: '30px',\n    transition: {\n      ease: 'easeOut',\n      duration:200\n    }\n  },\n  closed: { bottom: '-140px' }\n});\n\nexport default class FiledropHint extends Component {\n\n  state = { \n    visible: false \n  };\n\n  componentDidMount() {\n    this.setState({ visible: true });\n  }\n\n  render() {\n    return (\n      <div className=\"filedrop-hint\">\n        <AnimatedDiv className=\"inner\" pose={this.state.visible ? 'open' : 'closed'}>\n          <span className=\"icon\">&#xf0ee;</span>\n          <p className=\"instructions\">\n            Drop files or IIIF manifest URLs to add them to your workspace.\n          </p>\n          <p className=\"supported\">\n            Supported formats: plain text (UTF-8), TEI/XML, image files, CSV (UTF-8)\n          </p>\n        </AnimatedDiv>\n      </div>\n    )\n  }\n\n}\n","const DEFAULT_STATE = {\n  me             : null, // Login identity\n  visitedAccount : null, // Visited profile\n\n  presentation   : 'TABLE',\n\n  page: {\n    breadcrumbs   : [],\n    readme: null, \n    total_count: 0,\n    items: []\n  },\n\n  table_config  : {\n    columns: [\n      \"author\",\n      \"title\",\n      \"language\",\n      \"date_freeform\",\n      \"uploaded_at\",\n      \"last_edit_at\"\n    ],\n    sorting: { by: null, asc: true }\n  },\n\n  busy           : true\n}\n\nexport const initialState = () => {\n\n  const stored = {};\n\n  // Helper\n  const addIfDefined = (key) => {\n    const value = localStorage.getItem(`recogito.workspace.${key}`);\n    if (value) stored[key] = JSON.parse(value);\n  }\n\n  ['view', 'presentation', 'table_config'].map(addIfDefined)\n\n  return { ...DEFAULT_STATE, ...stored };\n}\n\nexport const persistState = (key, value) => {\n  const prefixed = `recogito.workspace.${key}`\n  localStorage.setItem(prefixed, JSON.stringify(value));\n}","import React from 'react';\nimport ActivityHistory from '../../common/account/ActivityHistory';\nimport IdentityInfo from '../../common/account/IdentityInfo';\nimport TopCollaborators from '../../common/account/TopCollaborators';\n\nconst Sidebar = props => {\n\n  return (\n    <div className=\"sidebar\"> \n      <div className=\"section identity\">\n        <IdentityInfo account={props.account} />\n      </div>\n\n      <ActivityHistory \n        className=\"section\" \n        width={237}\n        height={55}\n        fill=\"#4483c4\"\n        stats={props.account && props.account.stats} />\n\n      <TopCollaborators \n        className=\"section collaborators\"\n        title=\"Top collaborators\"\n        username={props.account && props.account.username} />\n    </div>\n  );\n\n}\n\nexport default Sidebar;","import React, { Component } from 'react';\n\nexport default class Search extends Component {\n\n  render() {\n    return (\n      <div className=\"search\">\n        <div className=\"wrapper\">\n          <input placeholder=\"Search Recogito...\"/>\n        </div>\n        <span className=\"icon hand-lens\">&#xf002;</span>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport Search from './Search';\n\nexport default class TopBar extends Component {\n\n  notLoggedIn() {\n    return (\n      <div className=\"not logged-in\">\n        <a href=\"/login\">Log in</a>&nbsp; | &nbsp;New to Recogito? &nbsp;<a href=\"/\">Learn more</a>\n      </div>\n    )\n  }\n\n  loggedInAs() {\n    const name = this.props.me.real_name ? this.props.me.real_name : this.props.me.username;\n\n    return (\n      <div className=\"logged-in\">\n        Logged in as <a href={`/${this.props.me.username}`}>{name}</a>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"top-bar\">\n          <div className=\"top-left\">\n            <a href=\"/my\" className=\"home\">\n              <img src=\"/assets/images/logo-recogito-small.png\" alt=\"Recogito logo\" />\n            </a>\n            { this.props.me && this.props.me.logged_in && <a href=\"/my\">My Workspace</a> }\n            <a href=\"/help\">Help</a>\n            <a href=\"/help/about\">About</a>\n\n            <Search></Search>\n          </div>\n\n          <div className=\"top-right\">\n            {this.props.me && \n              this.props.me.logged_in ? this.loggedInAs() : this.notLoggedIn()\n            }\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n\n}","import React from 'react';\nimport Breadcrumbs from '../common/header/Breadcrumbs';\nimport GridPane from '../common/documents/grid/GridPane';\nimport HeaderIcon from '../common/header/HeaderIcon';\nimport Readme from '../common/documents/Readme';\nimport Sidebar from './sidebar/Sidebar';\nimport TablePane from '../common/documents/table/TablePane';\nimport TopBar from './top/TopBar';\n\nconst Profile = props => {\n\n  return (\n    <React.Fragment>\n      <TopBar me={props.me} />\n\n      <Sidebar account={props.visitedAccount}/>\n\n      <div className=\"main-content\">\n        <Breadcrumbs \n          label=\"Public Documents\"\n          path={props.page.breadcrumbs}\n          docCount={props.page.total_docs} />\n\n        <HeaderIcon\n          className=\"presentation-toggle stroke7\"\n          icon={(props.presentation === 'TABLE') ? '\\ue645' : '\\ue636'} \n          onClick={props.onTogglePresentation} />\n\n        { props.visitedAccount && props.page.readme && \n          <Readme content={props.page.readme} />\n        }\n\n        { props.visitedAccount && props.page.items.length === 0 &&\n          <div className=\"no-public-documents\">\n            {props.visitedAccount.username} has not shared any documents yet\n          </div>\n        }\n\n        { props.visitedAccount && props.page.items.length > 0 && props.presentation === 'TABLE' &&\n          <TablePane\n            items={props.page.items}\n            config={props.tableConfig}\n            busy={props.busy}\n            enableFiledrop={false} \n            onSort={props.onSortTable}\n            onChangeColumnConfig={props.onChangeColumnConfig} />\n        }\n\n        { props.visitedAccount && props.page.items.length > 0 && props.presentation === 'GRID' &&\n          <GridPane\n            items={props.page.items}\n            busy={props.busy}\n            enableFiledrop={false} />         \n        }\n      </div>\n    </React.Fragment>\n  );\n\n}\n\nexport default Profile;","import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport axios from 'axios';\nimport { Columns } from '../common/documents/table/Columns';\nimport { initialState, persistState } from './initialState';\nimport Profile from './Profile';\n\nimport '../../assets/style/profile/index.scss';\n\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props);\n    \n    this.state = initialState();\n\n    this._profileOwner = (process.env.NODE_ENV === 'development') ? 'rainer' : window.location.pathname.substring(1);\n\n    window.onhashchange = this.refreshPage;\n  }\n\n  componentDidMount() {\n    const a = axios.get(`/api/account/${this._profileOwner}`).then(r => {\n      this.setState({ visitedAccount: r.data });\n    });\n\n    const b = axios.get('/api/me').then(r => {\n      this.setState({ me: r.data });\n    });\n\n    Promise.all([a, b]).then(() => this.refreshPage());\n  }\n\n  refreshPage = () => {\n    this.setState({ busy: true });\n\n    const folderId = document.location.hash.substring(1);\n\n    const path = folderId ? \n      `${this._profileOwner}/${folderId}` :\n      `${this._profileOwner}`;\n\n    const config = this.state.presentation === 'GRID' ? null :\n      {\n        columns: Columns.expandAggregatedColumns(this.state.table_config.columns),\n        sort: this.state.table_config.sorting\n      }\n\n    return axios.post(`/api/directory/${path}`, config).then(r => {\n      const { breadcrumbs, readme, total_count, items } = r.data;\n      this.setState(prev => {\n        return { \n          page: {\n            ...prev.page,\n            ...{\n              breadcrumbs,\n              readme,\n              total_count,\n              items\n            }\n          },\n          busy: false\n        }\n      })\n    });\n  }\n\n  togglePresentation = () => {\n    this.setState(prev => { \n      const presentation = (prev.presentation === 'TABLE') ? 'GRID' : 'TABLE';\n      persistState('presentation', presentation);\n      return { presentation: presentation };\n    });\n  }\n\n  sortTable = (sorting) => {\n    this.setState(prev => {\n      const config = { ...prev.table_config, ...{ sorting: sorting } };\n      persistState('table_config', config);\n      return { table_config: config };\n    }, () => {\n      this.refreshPage();\n    });      \n  }\n\n  changeColumConfig = columns => {\n    this.setState(prev => { \n      const config = {...prev.table_config, ...{ columns: columns } };\n      persistState('table_config', config);\n      return { table_config: config };\n    });\n  }\n\n  render() {\n    return (\n      <Profile \n        me={this.state.me} \n        visitedAccount={this.state.visitedAccount} \n        presentation={this.state.presentation}\n        page={this.state.page} \n        tableConfig={this.state.table_config}\n        busy={this.state.busy} \n        onTogglePresentation={this.togglePresentation} \n        onSort={this.sortTable}\n        onChangeColumnConfig={this.changeColumnConfig} />\n    );\n  }\n}\n\nrender(<App />, document.getElementById('app'));\n","import React from 'react';\n\nconst HeaderIcon = props => {\n\n  return (\n    <div\n      className={`header-icon ${props.className}`}\n      onClick={props.onClick}>\n      {(props.link) ? \n        <a href={props.link} className=\"icon inner\">\n          {props.icon}\n        </a> :\n\n        <span className=\"icon inner\">\n          {props.icon}\n        </span>\n      }\n    </div>\n  );\n\n}\n\nexport default HeaderIcon;","import React from 'react';\n\nconst VIEW_LABELS = {\n  MY_DOCUMENTS: 'My Documents',\n  SHARED_WITH_ME: 'Shared with me',\n  SEARCH: 'Search results'\n}\n\nconst Breadcrumbs = props => {\n  const title = props.view ? VIEW_LABELS[props.view] : props.label;\n\n  return (\n    <div className=\"breadcrumbs\">\n      <h2>\n        <a className=\"root\" href=\"#\">{title}</a>\n        {props.path && props.path.map(b => \n          <a className=\"folder\" href={`#${b.id}`} key={b.id}>{b.title}</a>\n        )}\n      </h2>\n      \n      { props.docCount !== null && props.docCount !== undefined &&\n        <span className=\"count\">{`(${props.docCount})`}</span> }\n\n      { props.children }\n    </div>\n  );\n\n}\n\nexport default Breadcrumbs;","import React, { Component } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport ContentEditable from 'react-sane-contenteditable';\n\nconst INITIAL_STATE = {\n  editing: false,\n  modifiedContent: null\n}\n\nexport default class Readme extends Component {\n\n  state = {};\n\n  onKeydown = (evt) => {\n    if (evt.which === 27) // Esc\n      this.onCancel(); \n    else if (evt.ctrlKey && evt.which === 13) // Ctrl+Enter \n      this.onSave();\n  }\n\n  onEdit() {\n    document.addEventListener('keydown', this.onKeydown, false);\n    this.setState({ editing: true });\n  }\n\n  onChange(_, value) {\n    this.setState({ modifiedContent: value });\n  }\n\n  onDelete() {\n    document.removeEventListener('keydown', this.onKeydown, false);\n    this.props.onDelete && this.props.onDelete();\n  }\n\n  onSave() {\n    document.removeEventListener('keydown', this.onKeydown, false);\n    this.props.onUpdate && this.props.onUpdate(this.state.modifiedContent);\n    this.setState(INITIAL_STATE);\n  }\n\n  onCancel() {\n    document.removeEventListener('keydown', this.onKeydown, false);\n    if (typeof this.props.content === 'boolean')\n      this.onDelete();\n    else\n      this.setState(INITIAL_STATE);\n  }\n\n  renderView(content) {\n    return (\n      <div className=\"readme\">\n        <div className=\"wrapper\">\n          <div className=\"textbox\">\n            <ReactMarkdown source={content} />       \n          </div>\n\n          {this.props.onUpdate && this.props.onDelete &&\n            <span className=\"buttons modify\">\n              <button\n                className=\"icon nostyle\"\n                title=\"Edit\"\n                onClick={this.onEdit.bind(this)}>&#xf040;</button>\n            </span>\n          }\n        </div>\n      </div>\n    )\n  }\n\n  renderEdit(content) {\n    return (\n      <div className=\"readme editing\">\n        <div className=\"wrapper\">\n          <ContentEditable \n            tagName=\"div\"\n            className=\"textbox\"\n            content={content} \n            editable={true} \n            multiLine={true}\n            onChange={this.onChange.bind(this)}/>            \n\n          <div className=\"editbar\">\n            <span className=\"hint\">Supports styling with <a href=\"# \">Markdown</a></span>\n            <span className=\"buttons\">\n              <button\n                className=\"label nostyle\"\n                onClick={this.onDelete.bind(this)}>Delete description</button>\n\n              <button \n                className=\"icon nostyle\"\n                onClick={this.onSave.bind(this)}>&#xf00c;</button>\n\n              <button \n                className=\"icon nostyle\"\n                onClick={this.onCancel.bind(this)}>&#xf00d;</button>\n            </span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    const editOnOpen = typeof this.props.content === 'boolean';\n\n    if (editOnOpen)\n      document.addEventListener('keydown', this.onKeydown, false);\n\n    const content = editOnOpen ? '' : \n      (this.state.modifiedContent ? this.state.modifiedContent : this.props.content);\n\n    return (this.state.editing || editOnOpen) ? this.renderEdit(content) : this.renderView(content);\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport Avatar from './Avatar.jsx';\n\nexport default class IdentityInfo extends Component {\n\n  formatURL(url) {\n    return url.replace(/^https?:\\/\\//i, '');\n  }\n\n  render() {\n    const dataAvailable = \n      this.props.account && \n      this.props.account.username &&\n      this.props.account.member_since;\n      \n    return (\n      <div className=\"identity\">\n        <div className=\"user\">\n          <Avatar username={dataAvailable && this.props.account.username} />\n\n          <h1>\n            { dataAvailable ?\n                ((this.props.account.real_name) ? \n                  this.props.account.real_name : this.props.account.username) :\n\n                (<span className=\"placeholder\" />) }\n          </h1>\n\n          <p className=\"member-since\">\n            { dataAvailable ?\n              <React.Fragment>\n                Joined on { new Intl.DateTimeFormat('en-GB', {\n                  year : 'numeric',\n                  month: 'short',\n                  day  : '2-digit'\n                }).format(new Date(this.props.account.member_since)) }\n              </React.Fragment> : <span className=\"placeholder\" />\n            }\n          </p>\n        </div>\n\n        <div className=\"user-extended\">\n          { dataAvailable && this.props.account.bio &&\n            <p className=\"bio\">{this.props.account.bio}</p> }\n\n          { dataAvailable && this.props.account.website && \n            <p className=\"homepage\">\n              <a href={this.props.account.website}>{this.formatURL(this.props.account.website)}</a>\n            </p>\n          }\n        </div>\n      </div>\n    )\n  }\n\n}\n"],"sourceRoot":""}