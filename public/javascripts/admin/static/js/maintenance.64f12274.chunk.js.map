{"version":3,"sources":["common/components/navigationmenu/NavigationMenu.jsx","common/components/panel/FoldablePanel.jsx","admin/maintenance/restore/RestoreBackup.jsx","admin/maintenance/pending_uploads/PendingUploads.jsx","admin/maintenance/database/Database.jsx","admin/maintenance/filestore/Filestore.jsx","admin/maintenance/elasticsearch/ElasticSearch.jsx","admin/maintenance/logs/Logs.jsx","admin/maintenance/App.jsx","common/components/form/FileField.jsx"],"names":["NavigationMenu","state","open","onMousedown","evt","_this","_node","contains","target","setState","onKeydown","which","toggle","prev","document","addEventListener","this","removeEventListener","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","ref","n","react_transition_group__WEBPACK_IMPORTED_MODULE_6__","classNames","in","timeout","href","onClick","Component","FoldablePanel","props","push","react_default","join","title","react_transition_group","children","RestoreBackup","file","successMessage","errorMessage","handleAttachBackup","f","handleRestoreBackup","formdata","FormData","append","axios","post","headers","Content-Type","then","result","catch","error","concat","response","statusText","FoldablePanel_FoldablePanel","el","_form","onSubmit","FileField","name","buttonOnly","label","onChange","buttonClass","PendingUploads","uploads","handleDeleteAll","delete","refresh","get","data","rows","map","upload","owner","created_at","length","colSpan","Database","rel","Filestore","size","toFixed","number_format_default","displayType","value","thousandSeparator","ElasticSearch","total_docs","total_documents","Logs","log_path","path","App","Fragment","PendingUploads_PendingUploads","Filestore_Filestore","Database_Database","ElasticSearch_ElasticSearch","Logs_Logs","RestoreBackup_RestoreBackup","render","App_App","getElementById","onAttachFile","files","htmlFor","type","id","disabled","style","display"],"mappings":"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","file":"static/js/maintenance.64f12274.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport './NavigationMenu.scss';\n\nexport default class NavigationMenu extends Component {\n\n  state = {\n    open: false\n  };\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.onMousedown, false);\n    document.addEventListener('keydown', this.onKeydown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.onMousedown, false);\n    document.removeEventListener('keydown', this.onKeydown, false);\n  }\n\n  onMousedown = (evt) => {\n    const isClickOutside = !this._node.contains(evt.target);\n    if (isClickOutside) this.setState({ open: false });\n  }\n\n  onKeydown= (evt) => {\n    if (evt.which === 27) this.setState({ open: false });\n  }\n\n  toggle = () => {\n    this.setState(prev => {\n      return { open: !prev.open }\n    });\n  }\n\n  render() {\n    return (\n      <div \n        className=\"nav-menu\"\n        ref={n => this._node = n}>\n\n        <CSSTransition\n          classNames=\"menu-options\"\n          in={this.state.open}\n          timeout={150}>\n\n          <ul className=\"menu-options\">\n            <li><a href=\"/admin\">Activity Dashboard</a></li>\n            <li><a href=\"/admin/users\">User Management</a></li>\n            <li><a href=\"/admin/authorities\">Authority Management</a></li>\n            <li><a href=\"/admin/maintenance\">Maintenance</a></li>\n          </ul>\n        </CSSTransition>\n        \n        <div className=\"tab\" onClick={this.toggle}>\n          <span className=\"icon\">&#xf0c9;</span>\n        </div>\n      </div>\n    );\n  }\n\n}","import React, { Component } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport './FoldablePanel.scss';\n\nexport default class FoldablePanel extends Component {\n\n  state = {\n    open: false\n  }\n\n  toggle = () => {\n    this.setState(prev => { return { open: !prev.open } });\n  }\n\n  render() {\n    const classNames = ['foldable-panel'];\n\n    if (this.props.className)\n      classNames.push(this.props.className);\n\n    if (this.state.open)\n      classNames.push('open');\n    else \n      classNames.push('closed');\n\n    return (\n      <div className={classNames.join(' ')}>\n        <h2 onClick={this.toggle}>\n          <span className=\"icon toggle\">{this.state.open ? '\\uf106' : '\\uf107'}</span>\n          {this.props.title}\n        </h2>\n        <CSSTransition\n          classNames=\"inner\"\n          in={this.state.open}\n          timeout={250}>\n\n          <div className=\"inner\">\n            {this.props.children}\n          </div>\n        </CSSTransition>\n      </div>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport FoldablePanel from '../../../common/components/panel/FoldablePanel.jsx';\nimport FileField from '../../../common/components/form/FileField.jsx';\n\nimport './RestoreBackup.scss';\n\nexport default class RestoreBackup extends Component {\n\n  state = {\n    file: null,\n    successMessage: null,\n    errorMessage: null\n  }\n\n  handleAttachBackup = (f) => {\n    this.setState({ file: f }, () => this.handleRestoreBackup());\n  }\n\n  handleRestoreBackup = () => {\n    const formdata = new FormData();\n    formdata.append('backup', this.state.file);\n\n    const config =  { headers: { 'Content-Type': 'multipart/form-data' } };\n    axios.post('/admin/maintenance/restore', formdata,  config)\n      .then(result => {\n        this.setState({ successMessage: 'Ok.' });\n      })\n      .catch(error => {\n        this.setState({ errorMessage: `Error: ${error.response.statusText}` });\n      });    \n  }\n\n  render() {\n    return (\n      <FoldablePanel title=\"Restore Document Backup\">\n        <form \n          ref={el => this._form = el}\n          className=\"crud restore-backup\" \n          onSubmit={this.handleRestoreBackup}>\n\n          <div className=\"instructions\">\n            Restore a document from a ZIP backup package. Unlike the\n            normal <strong>Restore</strong> feature, which is available to every user, this Admin version \n            allows you to: \n          \n            <ul>\n              <li>restore <strong>modified</strong> backup packages</li>\n              <li>restore to any users' workspace - just modify the owner metadata in the ZIP accordingly</li>\n            </ul>\n          </div>\n\n          <FileField\n            name=\"file\"\n            buttonOnly\n            label=\"Upload ZIP backup package\"\n            onChange={this.handleAttachBackup}\n            buttonClass=\"btn add-file\" />\n\n          {this.state.successMessage && <span className=\"success message\">{this.state.successMessage}</span> }\n          {this.state.errorMessage && <span className=\"error message\">{this.state.errorMessage}</span> }\n        </form>\n      </FoldablePanel>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport FoldablePanel from '../../../common/components/panel/FoldablePanel.jsx';\n\nimport './PendingUploads.scss';\n\nexport default class PendingUploads extends Component {\n\n  state = {\n    uploads: []\n  }\n\n  refresh() {\n    axios.get('/admin/maintenance/uploads.json')\n      .then(result => {\n        this.setState({ uploads: result.data });\n      });\n  }\n\n  componentDidMount() {\n    this.refresh();\n  }\n\n  handleDeleteAll = () => {\n    axios.delete('/admin/maintenance/uploads')\n      .then(result => {\n        this.refresh();\n      });\n  }\n\n  render() {\n    const rows = this.state.uploads.map(upload =>\n      <tr>\n        <td>{upload.owner}</td>\n        <td>{upload.title}</td>\n        <td>{upload.created_at}</td>\n      </tr>\n    );\n\n    return (\n      <FoldablePanel\n        className=\"pending-uploads\"\n        title=\"Pending Uploads\">\n\n        <table>\n          <thead>\n            <tr>\n              <th>Owner</th>\n              <th>Title</th>\n              <th>Created at</th>\n            </tr>\n          </thead>\n\n          {\n            rows.length > 0 ?\n              <tbody>{rows}</tbody> :\n            \n              <tbody>\n                <tr><td colSpan=\"3\" className=\"no-pending-uploads\">There are no pending uploads</td></tr>\n              </tbody>\n           }\n\n        </table>\n        <div className=\"footer\">\n          <button className=\"btn red\" onClick={this.handleDeleteAll}>Delete All</button>\n        </div>\n      </FoldablePanel>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport FoldablePanel from '../../../common/components/panel/FoldablePanel.jsx';\n\nexport default class Database extends Component {\n\n  render() {\n    return (\n      <FoldablePanel\n        className=\"database\"\n        title=\"Database\">\n\n        <div className=\"instructions\">\n          Recogito stores the following data in the database:\n          <ul>\n            <li>User account information</li>\n            <li>User folder hierarchies</li>\n            <li>Document metadata</li> \n            <li>Document sharing information</li>\n            <li>Auxiliary information such as authority file metadata, georesolution and NER task progress, etc.</li>\n          </ul>\n          Make sure you perform regular backups of your database. Instructions for set up backups \n          are <a href=\"https://github.com/pelagios/recogito2/wiki/Notes-on-Postgres-backup\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.\n        </div>\n\n      </FoldablePanel>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport NumberFormat from 'react-number-format';\nimport FoldablePanel from '../../../common/components/panel/FoldablePanel.jsx';\n\nimport './Filestore.scss';\n\nexport default class Filestore extends Component {\n\n  state = {\n    size: null\n  }\n\n  componentDidMount() {\n    axios.get('/admin/maintenance/filestore/size.json')\n      .then(result => {\n        this.setState({ size: result.data.size });\n      })\n  }\n\n  render() {\n    const size = this.state.size ? (this.state.size / 1024).toFixed(2) : null;\n    return (\n      <FoldablePanel\n        className=\"filestore\"\n        title=\"File Storage\">\n\n        <div className=\"instructions\">\n          The <strong>file storage</strong> is the folder where user uploads \n          get stored. This folder will take up the most space of your installation.\n          Make sure you reserve enough space.\n        </div>\n\n        <span className=\"label\">\n          Current usage: \n        </span>\n\n        <span className=\"value\">\n          <NumberFormat\n            displayType=\"text\"\n            value={size}\n            thousandSeparator={true} /> MB\n        </span>\n      </FoldablePanel>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport NumberFormat from 'react-number-format';\nimport FoldablePanel from '../../../common/components/panel/FoldablePanel.jsx';\n\nimport './ElasticSearch.scss';\n\nexport default class ElasticSearch extends Component {\n\n  state = {\n    total_docs: null\n  }\n\n  componentDidMount() {\n    axios.get('/admin/maintenance/elasticsearch/props.json')\n      .then(result => {\n        this.setState({ total_docs: result.data.total_documents });\n      });\n  }\n\n  render() {\n    return (\n      <FoldablePanel\n        className=\"elasticsearch\"\n        title=\"ElasticSearch\">\n\n        <div className=\"instructions\">\n          Recogito stores the following data in the ElasticSearch index:\n\n          <ul>\n            <li>Annotations and previous annotation versions</li>\n            <li>Entities from authority files</li>\n            <li>Activity stats</li> \n            <li>User visit stats</li>\n          </ul>\n\n          The total number of records in your ElasticSearch index is currently:\n\n          <span className=\"total-records\">\n            <NumberFormat\n              displayType=\"text\"\n              value={this.state.total_docs}\n              thousandSeparator={true} />\n          </span>\n\n          <p>\n            You can back up your index by creating snapshots. Instructions for how to do this \n            are <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.6/modules-snapshots.html\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.\n          </p>\n        </div>\n\n      </FoldablePanel>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport FoldablePanel from '../../../common/components/panel/FoldablePanel.jsx';\n\nimport './Logs.scss';\n\nexport default class Logs extends Component {\n\n  state = {\n    log_path: null\n  }\n\n  componentDidMount() {\n    axios.get('/admin/maintenance/logs/path.json')\n      .then(result => {\n        this.setState({ log_path: result.data.path });\n      });\n  }\n\n  render() {\n    return (\n      <FoldablePanel\n        className=\"logs\"\n        title=\"Logs\">\n\n        <div className=\"instructions\">\n          Your system logs can give you information in case errors occur\n          during operation. For the time being, you cannot see your logs\n          in the Web interface. Recogito keeps the system logs at the\n          following location:\n\n          <p className=\"log-path\">{this.state.log_path}</p>\n        </div>\n      </FoldablePanel>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport NavigationMenu from '../../common/components/navigationmenu/NavigationMenu.jsx';\nimport RestoreBackup from './restore/RestoreBackup.jsx';\nimport PendingUploads from './pending_uploads/PendingUploads.jsx';\nimport Database from './database/Database.jsx';\nimport Filestore from './filestore/Filestore.jsx';\nimport ElasticSearch from './elasticsearch/ElasticSearch.jsx';\nimport Logs from './logs/Logs.jsx';\n\nimport './App.scss';\n\nexport default class App extends Component {\n\n  render() {\n    return (\n      <React.Fragment>\n        <NavigationMenu />\n        <h1 className=\"page-title\">System Maintenance</h1>\n\n        <div className=\"panels\">\n          <PendingUploads />\n          <Filestore />\n          <Database />\n          <ElasticSearch />\n          <Logs />\n          <RestoreBackup />\n        </div>\n      </React.Fragment>\n    );\n  }\n\n}\n\nrender(<App />, document.getElementById('app'));","import React, { Component } from 'react';\n\nexport default class FileField extends Component {\n\n  state = {\n    file: null  \n  }\n\n  onAttachFile = (evt) => {\n    const f = evt.target.files[0];\n    this.setState({ file: f });\n    this.props.onChange(f);\n  }\n\n  render() {\n    return (\n      <dl className=\"fileupload\">\n        <dt><label htmlFor={`${this.props.name}_name`}>{this.props.label}</label></dt>\n        <dd>\n          {!this.props.buttonOnly &&\n            <input\n              type=\"text\"\n              id={`${this.props.name}_name`}\n              name={`${this.props.name}_name`}\n              disabled={true}\n              value={(this.state.file && this.state.file.name) || ''} />\n          }\n\n          <input\n            type=\"file\"\n            id={this.props.name}\n            name={this.props.name}\n            style={{display:'none'}}\n            onChange={this.onAttachFile} />\n\n          <label className={this.props.buttonClass} htmlFor={this.props.name}>\n            <span className=\"icon\">&#xf055;</span>\n          </label>\n        </dd>\n      </dl>\n    );\n  }\n\n}"],"sourceRoot":""}