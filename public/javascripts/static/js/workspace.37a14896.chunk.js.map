{"version":3,"sources":["workspace/API.js","common/components/Meter.jsx","common/content/upload/Uploader.jsx","common/content/job/JobProgress.jsx","workspace/header/search/AdvancedSearch.jsx","workspace/header/search/Search.jsx","common/components/MenuPopup.jsx","common/components/Prompt.jsx","workspace/actions/DeleteAction.jsx","common/content/ner/authorities/AuthoritySelection.jsx","common/content/ner/engines/EngineSelection.jsx","common/content/ner/NERModal.jsx","workspace/actions/NERAction.jsx","workspace/header/Header.jsx","workspace/sidebar/sections/Account.jsx","workspace/sidebar/sections/CreateNew.jsx","workspace/sidebar/sections/Views.jsx","workspace/sidebar/sections/Storage.jsx","workspace/sidebar/Sidebar.jsx","workspace/App.jsx"],"names":["fetchDocuments","path","config","axios","post","concat","API","get","opt_folder","title","parentId","parent","id","put","delete","ids","data","content","opt_folder_id","Meter","react_default","a","createElement","className","style","position","width","this","props","value","height","Component","Uploader","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_emptyState","start","files","remoteSource","url","phase","totalSize","reduce","total","f","size","filepartIds","length","map","uploadId","uploadStatus","progress","errors","next","_this2","setState","_this3","initNewDocument","then","result","uploadFiles","registerURL","catch","error","prev","slice","push","response","finalizeDocument","bind","name","formdata","FormData","append","headers","X-Requested-With","_this4","requests","file","idx","onUploadProgress","evt","loaded","uuid","uploadOne","Promise","all","_this5","currentFolder","document","location","hash","substring","tasks","running_tasks","pollTaskProgress","document_id","onUploadComplete","filepartId","pollResult","_this6","subtasks","find","t","filepart_id","indexOf","setUploadStatus","status","documentId","taskTypes","_this7","updateStatusForFile","setTimeout","complete","isUploadComplete","_this8","totalLoaded","onClick","onCancel","key","message","Meter_Meter","JobProgress","tasksCompleted","pollProgress","jobId","filter","tasksFailed","ReactDOM","createPortal","onClose","body","AdvancedSearch","onMousedown","assertThisInitialized","onKeydown","addEventListener","removeEventListener","isClickOutside","_node","contains","target","isClickOnToggle","classList","which","ref","n","type","Search","advancedSearchOpen","placeholder","AdvancedSearch_AdvancedSearch","toggleAdvancedSearch","MenuPopup","menu","group","options","option","link","disabled","onSelect","href","icon","label","Fragment","Prompt","onNo","toLowerCase","react_draggable_default","handle","onYes","DeleteAction","folders","deleteFolder","bulkDeleteFolders","resolve","documents","d","view","deleteDocument","unshareDocument","bulkDeleteDocuments","bulkUnshareDocuments","selection","i","onStart","deleteDocuments","deleteFolders","onSuccess","onError","Prompt_Prompt","executeDelete","AuthoritySelection","identifier","selected","currentIdx","splice","onChange","checked","useAll","onToggleAll","htmlFor","authorities","authority","includes","backgroundColor","color","homepage","shortname","fullname","EngineSelection","cellSpacing","engines","engine","languages","lang","description","NERModal","available_engines","available_authorities","selected_engine","selected_all_authorities","selected_authorities","initAvailableAuthorities","initAvailableEngines","diff","all_authorities","Modal","EngineSelection_EngineSelection","changeEngine","AuthoritySelection_AuthoritySelection","toggleAllAuthorities","changeAuthorities","NERAction","running","isDocument","hasTextParts","filetypes","startsWith","taskDefinition","assign","task_type","job_id","JobProgress_JobProgress","NERModal_NERModal","startNER","Header","action","menuVisible","deleteAction","DeleteAction_DeleteAction","onDelete","onDeleteSuccess","onDeleteError","cancelAction","afterDelete","NERAction_NERAction","onStarted","actionStarted","isOpen","readme","Search_Search","HeaderIcon","Breadcrumbs","breadcrumbs","count","docCount","onCreateReadme","react_transition_group","in","timeout","classNames","startDeleteAction","showActionsMenu","MenuPopup_MenuPopup","onSelectMenuOption","onCancelMenu","presentation","onTogglePresentation","Account","window","showMenu","ProfileInfo","account","closeMenu","CreateNew","currentFolderId","createFolder","onFolderCreated","_input","click","Array","from","onUploadFiles","onShowOptions","c","multiple","display","onSelectOption","ViewListItem","current","children","ViewList","Views_ViewListItem","currentView","onChangeView","Storage","dataAvailable","storage","quota","quota_mb","used","used_mb","number_format_default","displayType","thousandSeparator","Sidebar","collaborators","Account_Account","CreateNew_CreateNew","Views_ViewList","Storage_Storage","ActivityWidget","fill","stats","CollaboratorList","username","App","table_columns","table_sorting","busy","total_docs","fileUploads","urlUpload","StoredUIState","load","_root","getElementById","onhashchange","changeFolder","querySelector","fetchAccountData","refreshCurrentView","columns","Columns","expandAggregatedColumns","sort","accountData","myDocuments","getDisplayConfig","items","sharedWithMe","save","fetchMyDocuments","fetchSharedWithMe","before","p","sorting","folder","renameFolder","updateReadme","deleteReadme","_this9","_this10","isUploading","Sidebar_Sidebar","startUpload","changeView","Header_Header","setBusy","togglePresentation","createReadme","TablePane","disableFiledrop","onSort","onSortTable","onDropFiles","onDropURL","startRegisterRemoteSource","onChangeColumnPrefs","onRenameFolder","Readme","onUpdate","onUpdateReadme","onDeleteReadme","GridPane","Uploader_Uploader","render","App_App"],"mappings":"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","file":"static/js/workspace.37a14896.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst fetchDocuments = (path, config) => {\n  return axios.post(`/api/directory/${path}`, config);\n};\n\nexport default class API {\n\n  static accountData() {\n    return axios.get('/api/account/my');\n  }\n\n  static myDocuments(config, opt_folder) {\n    return opt_folder ?\n      fetchDocuments(`my/${opt_folder}`, config) : fetchDocuments('my', config);\n  }\n\n  static sharedWithMe(config) {\n    return fetchDocuments('my/shared', config);\n  }\n\n  // ~~~ Folder actions ~~~\n  static createFolder(title, parentId) {\n    return axios.post('/api/folder', {\n      title: title,\n      parent: parentId\n    });\n  }\n\n  static renameFolder(id, title) {\n    return axios.put(`/api/folder/${id}?title=${title}`);\n  }\n\n  static deleteFolder(id) {\n    return axios.delete(`/api/folder/${id}`);\n  }\n\n  // ~~~ Document actions ~~~\n  static bulkDeleteFolders(ids) {\n    return axios.delete(`/api/folder/bulk`, { data: ids });\n  }\n\n  // Deletes one document via the API\n  static deleteDocument(id) {\n    return axios.delete(`/api/document/${id}`);\n  }\n\n  // Deletes multiple documents in one go via the bulk API\n  static bulkDeleteDocuments(ids) {\n    return axios.delete('/api/document/bulk', { data: ids });\n  }\n\n  static unshareDocument(id) {\n    return axios.delete(`/api/shared/document/${id}`);\n  }\n\n  static bulkUnshareDocuments(ids) {\n    return axios.delete('/api/shared/document/bulk', { data: ids });\n  }\n\n  // ~~~ Readme actions ~~~\n  static updateReadme(content, opt_folder_id) {\n    if (opt_folder_id)\n      return axios.post(`/api/folder/${opt_folder_id}/readme`, { data: content });\n    else\n      return axios.post('/api/directory/my/readme', { data: content });\n  }\n\n  static deleteReadme(opt_folder_id) {\n    if (opt_folder_id)\n      return axios.delete(`/api/folder/${opt_folder_id}/readme`);\n    else\n      return axios.delete('/api/directory/my/readme');\n  }\n\n}","import React, { Component } from 'react';\n\nexport default class Meter extends Component {\n\n  render() {\n    return (\n      <div\n        className=\"meter\"\n        style={{ position: 'relative' }}>\n\n        <div\n          className=\"bar\"\n          style={{\n            width: `${100 * this.props.value}%`,\n            height: '100%'\n          }} />\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport Meter from '../../components/Meter.jsx';\n\nexport default class Uploader extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = this._emptyState(props);\n    this.start();\n  }\n\n  _emptyState(props) {\n    return {\n      files: props.files,\n      remoteSource: props.url,\n      phase: 'Uploading',\n      totalSize: props.files.reduce((total, f) => total + f.size, 0),\n      filepartIds: (props.files.length > 0) ? props.files.map(() => null) : [ null ],\n      uploadId: null,\n      uploadStatus: (props.files.length > 0) ? props.files.map(() => 'UPLOADING') : [ 'UPLOADING'],\n      progress: (props.files.length > 0) ? props.files.map(() => 0) : [ 0 ],\n      errors: []\n    };\n  }\n\n  componentWillReceiveProps(next) {\n    if (this.props.files === next.files && this.props.url === next.url)\n      return;\n\n    this.setState(this._emptyState(next), () => this.start());\n  }\n\n  /** \n   * Starts a new upload.\n   * \n   * Since one document generally consists of multiple files, the \n   * upload process is multi-stage: \n   * \n   * - first, the new document is initialized, and assigned an ID on the server\n   * - then, all files are uploaded to this document\n   * - finally, a finalization requests closes the document, and waits for any\n   *   processing (image tiling, TEI conversion) to finish\n   */\n  start() {\n    this.initNewDocument()\n      .then((result) => { \n        this.setState({ uploadId: result.data.id });\n\n        // Branch based on files vs. remote URL\n        if (this.state.files.length > 0)\n          return this.uploadFiles() \n        else if (this.state.remoteSource)\n          return this.registerURL()\n      })\n      .catch(error => {\n        this.setState(prev => {\n          const errors = prev.errors.slice(0);\n          errors.push(error.response.data);\n          return { errors: errors };\n        });\n      })\n      .then(this.finalizeDocument.bind(this));\n  }\n\n  /**\n   * Initializes a new document, using the filename as title,\n   * or a 'New document' placeholder in case there are multiple files.\n   */\n  initNewDocument() {\n    const title = (this.state.files.length === 1) ? this.state.files[0].name : 'New document';\n    const formdata = new FormData();\n    formdata.append('title', title);\n\n    return axios.post('/my/upload', formdata, {\n      headers: { 'X-Requested-With': 'XMLHttpRequest' }\n    });\n  }\n\n  registerURL() {\n    this.setState({ phase: 'Importing' });\n\n    const formdata = new FormData();\n    formdata.append('url', this.state.remoteSource);\n\n    return axios.post(`/my/upload/${this.state.uploadId}/file`, formdata, {\n      headers: { 'X-Requested-With': 'XMLHttpRequest' }\n    });\n  }\n\n  /**\n   * Uploads the files in parallel.\n   */\n  uploadFiles() {\n    // Helper: handles upload for one file\n    const uploadOne = (file, idx) => {\n      const formdata = new FormData();\n      formdata.append('file', file);\n\n      const onUploadProgress = (evt) => {\n        const progress = this.state.progress.slice(0); // Clone progress array\n        progress[idx] = evt.loaded;\n        this.setState({ progress: progress });\n      }\n\n      return axios.post(`/my/upload/${this.state.uploadId}/file`, formdata, {\n        headers: { 'X-Requested-With': 'XMLHttpRequest' },\n        onUploadProgress: onUploadProgress\n      }).then(result => {\n        this.setState(prev => {\n          const filepartIds = prev.filepartIds.slice(0);\n          filepartIds[idx] = result.data.uuid;\n          return { filepartIds: filepartIds };\n        });\n\n        return result;\n      }).catch(error => {\n        this.setState(prev => {\n          const uploadStatus = prev.uploadStatus.slice(0);\n          uploadStatus[idx] = 'FAILED';\n\n          const errors = prev.errors.slice(0);\n          errors.push(error.response.data);\n\n          return { \n            uploadStatus: uploadStatus,\n            errors: errors \n          };\n        });\n      });\n    }\n    \n    // The list of request promises...\n    const requests = this.state.files.map((file, idx) => uploadOne(file, idx));\n\n    // ... rolled into a promise of the list of request results\n    return Promise.all(requests);\n  }\n\n  /**\n   * Finalizes the upload, creating the document and starting processing tasks (if any)\n   */\n  finalizeDocument()  {\n    const currentFolder = document.location.hash.substring(1);\n\n    const url = currentFolder ?\n      `/my/upload/${this.state.uploadId}/finalize?folder=${currentFolder}` :\n      `/my/upload/${this.state.uploadId}/finalize`;\n\n    return axios.post(url, {\n      headers: { 'X-Requested-With': 'XMLHttpRequest' }\n    }).then(result => {\n      const tasks = result.data.running_tasks;\n      if (tasks.length > 0) {\n        this.setState({ phase: 'Importing...' });\n        this.pollTaskProgress(result.data.document_id, tasks);\n      } else {\n        this.props.onUploadComplete();\n      }\n    }).catch(error => {\n      // console.log('Upload contained errors');\n    });\n  }\n\n  updateStatusForFile(filepartId, pollResult) {\n    const progress = pollResult.subtasks.find(t => t.filepart_id === filepartId);\n    const idx = this.state.filepartIds.indexOf(filepartId);\n\n    const setUploadStatus = (value) => {\n      this.setState(prev => {\n        const uploadStatus = prev.uploadStatus.slice(0);\n        uploadStatus[idx] = value;\n        return { uploadStatus: uploadStatus };\n      })\n    }\n\n    if (progress)\n      setUploadStatus(progress.status);\n    else // No task running for this file - complete\n      setUploadStatus('COMPLETED');\n  }\n\n  /**\n   * Polls import task progress\n   */\n  pollTaskProgress(documentId, taskTypes) {    \n    axios.get(`/api/task?id=${documentId}`)\n      .then(result => {\n        // Update status per file\n        this.state.filepartIds.map(id => this.updateStatusForFile(id, result.data));\n        const isDone = result.data.status === 'COMPLETED' || result.data.status === 'FAILED';\n        if (isDone)\n          this.props.onUploadComplete()\n        else\n          setTimeout(() => this.pollTaskProgress(documentId, taskTypes), 1000);\n      });\n  }\n\n  isUploadComplete() {\n    return this.state.uploadStatus\n      .reduce((complete, next) => complete && (next === 'COMPLETED' || next === 'FAILED'));\n  }\n\n  onCancel(evt) {\n    if (this.isUploadComplete())\n      this.props.onUploadComplete();\n  }\n\n  render() {\n    const totalLoaded = this.state.progress.reduce((total, next) => total + next, 0);\n\n    return (\n      <div className=\"upload-progress\">\n        <div className=\"phase\">\n          {this.state.phase}\n          <button \n            className=\"close nostyle\"\n            onClick={this.onCancel.bind(this)}>&#xe897;</button>\n        </div>\n        <ul className={`files${(this.state.errors.length > 0) ? ' has-errors' : ''}`}>\n          {this.state.files.map((f, idx) =>\n            <li key={idx}>\n              {f.name}\n              <span className={`icon spinner ${this.state.uploadStatus[idx]}`}></span>\n            </li>\n          )}\n\n          {this.state.remoteSource &&\n            <li>\n              Fetching content from remote source...\n              <span className=\"icon spinner RUNNING\"></span>\n            </li>\n          }\n        </ul>\n        {this.state.errors.length > 0 && \n          <ul className=\"errors\">\n            {this.state.errors.map((message, idx) => <li key={idx}>{message}</li>)}\n          </ul>\n        }\n        <div className=\"progress\">\n          <Meter value={totalLoaded / this.state.totalSize} />\n        </div>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\n\nimport Meter from '../../components/Meter.jsx';\n\nexport default class JobProgress extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      status: 'PENDING',\n      progress: 0, // 0 - 100\n      tasks: 0,\n      tasksCompleted: 0\n    };\n\n    this.pollProgress();\n  }\n\n  pollProgress() { \n    axios.get(`/api/job/${this.props.jobId}`)\n      .then(result => {\n        this.setState({\n          status: result.data.status,\n          progress: result.data.progress,\n          tasks: result.data.subtasks.length,\n          tasksCompleted: result.data.subtasks.filter(t => t.status === 'COMPLETED').length,\n          tasksFailed: result.data.subtasks.filter(t => t.status === 'FAILED').length\n        });\n\n        const isDone = result.data.status === 'COMPLETED' || result.data.status === 'FAILED';\n        if (isDone) {\n          \n        } else {\n          setTimeout(() => this.pollProgress(), 1000);\n        }\n      });\n  }\n\n  onClose() {\n\n  }\n\n  render() {\n    return ReactDOM.createPortal(\n      <div className=\"job-progress\">\n        <div className=\"header\">\n          {this.props.title}\n          <button \n            className=\"close nostyle\"\n            onClick={this.onClose.bind(this)}>&#xe897;</button>\n        </div>\n\n        <div className=\"body\">\n          <div className=\"message\">\n            Completed {this.state.tasksCompleted} of {this.state.tasks} tasks\n          </div>\n\n          <div className=\"progress\">\n            <Meter value={this.state.progress / 100} />\n          </div>\n        </div>\n      </div>,\n      document.body\n    )\n  }\n\n}","import React, { Component } from 'react';\n\nexport default class AdvancedSearch extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.onMousedown = this.onMousedown.bind(this);\n    this.onKeydown = this.onKeydown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.onMousedown, false);\n    document.addEventListener('keydown', this.onKeydown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.onMousedown, false);\n    document.removeEventListener('keydown', this.onKeydown, false);\n  }\n\n  onMousedown(evt) {\n    const isClickOutside = !this._node.contains(evt.target);\n    const isClickOnToggle = evt.target.classList.contains('advanced');\n    if (isClickOutside && !isClickOnToggle) this.props.onClose();\n  }\n\n  onKeydown(evt) {\n    if (evt.which === 27) this.props.onClose();\n  }\n\n  render() {\n    return (\n      <div\n        ref={n => this._node = n}\n        className=\"advanced-search\">\n        <button\n          className=\"close nostyle\"\n          onClick={this.props.onClose}>&#xe897;</button>\n\n        <form>\n          <fieldset>\n            <p>\n              <label>Search in</label>\n              <select>\n                <option>All of Recogito</option>\n                <option>My documents</option>\n                <option>Shared with me</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Document type</label>\n              <select>\n                <option>Any</option>\n                <option>Text</option>\n                <option>Image</option>\n                <option>Table</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Owner</label>\n              <select>\n                <option>Anyone</option>\n                <option>me</option>\n                <option>specific user</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Metadata contains</label>\n              <input type=\"text\" />\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Last modified</label>\n              <select>\n                <option>Any time</option>\n                <option>this week</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n          </fieldset>\n          <fieldset className=\"buttons\">\n            <button className=\"nostyle clear\">Clear</button>\n            <button type=\"submit\" className=\"btn\">Search</button>\n          </fieldset>\n        </form>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport AdvancedSearch from './AdvancedSearch.jsx';\n\nexport default class Search extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { advancedSearchOpen: false }\n  }\n\n  toggleAdvancedSearch() {\n    this.setState(prev => (\n      { advancedSearchOpen: !prev.advancedSearchOpen }\n    ));\n  }\n\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <div className=\"search\">\n          <div className=\"wrapper\">\n            <input placeholder=\"Search Recogito...\"/>\n            {/* <button\n              className=\"icon nostyle advanced\"\n            onClick={this.toggleAdvancedSearch.bind(this)}>{'\\ue688'}</button> */}\n          </div>\n          <span className=\"icon hand-lens\">&#xf002;</span>\n        </div>\n        {this.state.advancedSearchOpen &&\n          <AdvancedSearch onClose={this.toggleAdvancedSearch.bind(this)}/>\n        }\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class MenuPopup extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.onMousedown = this.onMousedown.bind(this);\n    this.onKeydown = this.onKeydown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.onMousedown, false);\n    document.addEventListener('keydown', this.onKeydown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.onMousedown, false);\n    document.removeEventListener('keydown', this.onKeydown, false);\n  }\n\n  onMousedown(evt) {\n    const isClickOutside = !this._node.contains(evt.target);\n    if (isClickOutside) this.props.onCancel();\n  }\n\n  onKeydown(evt) {\n    if (evt.which === 27) this.props.onCancel();\n  }\n\n  render() {\n    return (\n      <div\n        ref={n => this._node = n}\n        className={`modal-menu ${this.props.className}`}>\n        <ul>\n          {this.props.menu.map(group =>\n            <li\n              key={group.group}\n              className={`group ${group.group}`}>\n\n              <ul>\n                {group.options.map(option =>\n                  <li\n                    key={option.value || option.link}\n                    className={`option${option.disabled ? ' disabled' : '' }`}\n                    onClick={(option.disabled || !option.value) ? null : this.props.onSelect.bind(this, option.value) }>\n\n                    {(option.link) ? \n                      <a href={option.link}>\n                        <span className=\"icon\">{option.icon}</span> {option.label}\n                      </a>\n                      : \n                      <React.Fragment>\n                        <span className=\"icon\">{option.icon}</span> {option.label}\n                      </React.Fragment>\n                    }\n                  </li>\n                )}\n              </ul>\n            </li>\n          )}\n        </ul>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport Draggable from 'react-draggable';\n\nexport default class Prompt extends Component {\n\n  constructor(props) {\n    super(props);\n    this.onKeydown = this.onKeydown.bind(this);\n  }\n\n  /** Clear selection on ESC **/\n  onKeydown(evt) {\n    if (evt.which === 27) this.props.onNo();\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.onKeydown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.onKeydown, false);\n  }\n\n  render() {\n    const className = (this.props.type) ? `prompt ${this.props.type.toLowerCase()}` : 'prompt';\n\n    return (\n      <div className=\"clicktrap\">\n        <Draggable handle=\".prompt-header\">\n          <div className={className}>\n            <div className=\"prompt-header\">\n              <h1 className=\"title\">{this.props.title}</h1>\n            </div>\n\n            <div className=\"prompt-body\">\n              <p className=\"message\">{this.props.message}</p>\n              <p className=\"buttons\">\n                 <button className=\"btn yes\" onClick={this.props.onYes}>YES</button>\n                 <button className=\"btn outline no\" onClick={this.props.onNo}>NO</button>\n              </p>\n            </div>\n          </div>\n        </Draggable>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport API from '../API.js';\nimport Prompt from '../../common/components/Prompt.jsx';\n\nexport default class DeleteAction extends Component {\n\n  deleteFolders(folders) {\n    const ids = folders.map(f => f.id);\n    if (ids.length > 0) {\n      return ids.length === 1 ?\n        API.deleteFolder(ids[0]) : API.bulkDeleteFolders(ids);\n    } else {\n      return new Promise((resolve) => { resolve(); });\n    }\n  }\n\n  deleteDocuments(documents) {\n    const ids = documents.map(d => d.id);\n\n    if (ids.length > 0) {\n      return ids.length === 1 ? (\n        this.props.view === 'MY_DOCUMENTS' ?\n          API.deleteDocument(ids[0]) : API.unshareDocument(ids[0]) \n      ) : (\n        this.props.view === 'MY_DOCUMENTS' ?\n          API.bulkDeleteDocuments(ids) : API.bulkUnshareDocuments(ids)\n      )\n    } else {\n      return new Promise((resolve) => { resolve(); });\n    }\n  }\n\n  executeDelete() {\n    const folders = this.props.selection.filter(i => i.type === 'FOLDER');\n    const documents = this.props.selection.filter(i => i.type === 'DOCUMENT');\n\n    if (folders.length + documents.length > 0) {\n      this.props.onStart();\n\n      this.deleteDocuments(documents)\n          .then(() => this.deleteFolders(folders))\n          .then(() => {\n            this.props.onSuccess();\n          }).catch((error) => {\n            this.props.onError(error);\n          });\n    } else {\n      this.props.onCancel();\n    }\n  }\n\n  render() {\n    const message = (this.props.view === 'MY_DOCUMENTS') ?\n      \"You are about to permanently delete the selected documents. Are you sure?\" :\n      \"This will remove the selected documents from your shared documents list. Are you sure?\";\n\n    return ReactDOM.createPortal(\n      <Prompt \n        title=\"Delete\"\n        type=\"WARNING\"\n        message={message}\n        onNo={this.props.onCancel}\n        onYes={this.executeDelete.bind(this)} />,\n\n      document.body\n    )\n  }\n\n}","import React, { Component } from 'react';\n\nexport default class AuthoritySelection extends Component {\n\n  onChange(identifier) {   \n    const selection = this.props.selected; \n    const currentIdx = selection.indexOf(identifier);\n\n    if (currentIdx < 0)\n      selection.push(identifier);\n    else\n      selection.splice(currentIdx, 1); \n\n    this.props.onChange(selection);\n  }\n\n  render() {    \n    return (\n      <div className=\"authorities\">\n        <h2>Authority Files</h2>\n\n        <input\n          type=\"checkbox\" \n          id=\"use-all-authorities\"\n          checked={this.props.useAll} \n          onChange={this.props.onToggleAll} />\n        <label htmlFor=\"use-all-authorities\">identify entities against all available authority files</label>\n\n        <div className={`authority-list${this.props.useAll ? ' disabled' : ''}`}>\n          <table>\n            <tbody>\n              {this.props.authorities.map(authority => \n                <tr key={authority.identifier}>\n                  <td>\n                    <input \n                      type=\"checkbox\" \n                      id={authority.identifier} \n                      checked={this.props.selected.includes(authority.identifier)} \n                      onChange={this.onChange.bind(this, authority.identifier)} />\n                    <label htmlFor={authority.identifier} />\n                  </td>\n\n                  <td className=\"shortname\">\n                    <span style={{ backgroundColor: authority.color}}>\n                      {authority.homepage ? \n                        <a href={authority.homepage} target=\"_blank\">{authority.shortname}</a>\n                        : \n                        authority.shortname\n                      }\n                    </span>\n                  </td>\n\n                  <td className=\"fullname\">\n                    {authority.fullname}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class EngineSelection extends Component {\n\n  render() {\n    return (\n      <div className=\"engines\">\n        <h2>Recognition Engines</h2>\n        <table cellSpacing=\"0\">\n          <tbody>\n            {this.props.engines.map(engine =>\n              <React.Fragment>\n                <tr\n                  key={engine.name}>\n                  <td className=\"name\">\n                    <input \n                      id={engine.identifier}\n                      type=\"radio\" \n                      group=\"engines\" \n                      checked={this.props.selected === engine.identifier}\n                      onChange={this.props.onChange.bind(this, engine.identifier)} />\n                    \n                    <label htmlFor={engine.identifier}>\n                      <span className=\"name\">{engine.name}</span>\n                    </label>\n                  </td>\n\n                  <td className=\"languages\">\n                    { engine.languages.map(lang => <span key={lang}>{lang}</span>) }\n                  </td>\n\n                  <td className=\"description\">\n                    {engine.description}\n                  </td>\n                </tr>\n                \n                <tr className=\"spacer\"></tr>\n              </React.Fragment>\n            )}\n          </tbody>\n        </table>\n        <p className=\"note\">\n          Note: different engines can provide different results and are generally \n          optimized for a specific language.\n        </p>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport Modal from '../../components/Modal.jsx';\nimport AuthoritySelection from './authorities/AuthoritySelection.jsx';\nimport EngineSelection from './engines/EngineSelection.jsx';\n\nexport default class NERModal extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      available_engines: [],\n      available_authorities: [],\n\n      selected_engine: null,\n      selected_all_authorities: true,\n      selected_authorities: []\n    };\n\n    this.initAvailableAuthorities();\n    this.initAvailableEngines();\n  }\n\n  isInitComplete() {\n    return this.state.available_engines.length > 0 &&\n      this.state.available_authorities.length > 0;\n  }\n\n  initAvailableEngines() {\n    if (this.state.available_engines.length === 0)\n      axios.get('/api/plugins/ner')\n        .then(result => {\n          const diff = { available_engines: result.data };\n\n          if (!this.state.selected_engine) // Select first as default\n            diff.selected_engine = result.data[0] && result.data[0].identifier;\n\n          this.setState(diff);\n        });\n  }\n\n  initAvailableAuthorities() {\n    axios.get('/api/authorities/gazetteers')\n      .then(result => {\n        const diff = { available_authorities: result.data };\n\n        if (this.state.selected_all_authorities || \n             (!this.state.selected_all_authorities && this.state.selected_authorities.length === 0))\n          diff.selected_authorities = result.data.map(a => a.identifier);\n\n        this.setState(diff);\n      });\n  }\n\n  changeEngine(identifier) {\n    this.setState({ selected_engine: identifier });\n  }\n\n  toggleAllAuthorities() {\n    this.setState(prev => {\n      return { selected_all_authorities: !prev.selected_all_authorities }\n    });\n  }\n\n  changeAuthorities(authorities) {\n    this.setState({ selected_authorities: authorities });\n  }\n\n  onStart() {\n    const response = { engine: this.state.selected_engine };\n\n    if (this.state.selected_all_authorities)\n      response.all_authorities = true;\n    else \n      response.authorities = this.state.selected_authorities;\n\n    this.props.onStart(response);\n  }\n\n  render() {\n    return (\n      <Modal\n        className=\"ner\" \n        title=\"Named Entity Recognition (NER)\"\n        onClose={this.props.onCancel}>\n\n        <p>\n          NER identifies places and persons in your text automatically. \n          Depending on the length of your text, this may take a while. \n        </p>\n\n        <EngineSelection \n          engines={this.state.available_engines} \n          selected={this.state.selected_engine}\n          onChange={this.changeEngine.bind(this)} />\n\n        <AuthoritySelection \n          authorities={this.state.available_authorities} \n          useAll={this.state.selected_all_authorities}\n          selected={this.state.selected_authorities}\n          onToggleAll={this.toggleAllAuthorities.bind(this)} \n          onChange={this.changeAuthorities.bind(this)} />\n\n        <div className=\"buttons\">\n          <button\n            className=\"btn start\"\n            onClick={this.onStart.bind(this)}>Start NER</button>\n\n          <button \n            className=\"btn outline cancel\"\n            onClick={this.props.onCancel}>Cancel</button>\n        </div>\n      </Modal>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\n\nimport JobProgress from '../../common/content/job/JobProgress.jsx';\nimport NERModal from '../../common/content/ner/NERModal.jsx';\n\nexport default class NERAction extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { running: false };\n  }\n\n  startNER(config) {\n    const documents = this.props.selection.filter(d => {\n      const isDocument = d.type === 'DOCUMENT'\n      const hasTextParts = d.filetypes.filter(t => t.startsWith('TEXT_')).length > 0;\n      return isDocument && hasTextParts\n    });\n\n    const taskDefinition = Object.assign(\n      { task_type: 'NER', documents: documents.map(d => d.id) }, \n      config\n    );\n\n    axios.post('/api/job', taskDefinition)\n      .then(response => {\n        this.setState({\n          running: true,\n          jobId: response.data.job_id\n        });\n\n        // this.props.onStarted();\n      });\n  }\n\n  render() {\n    if (this.state.running)\n      return <JobProgress \n        title=\"Named Entity Recognition\"\n        jobId={this.state.jobId} />\n    else\n      return ReactDOM.createPortal(\n        <NERModal \n          onStart={this.startNER.bind(this)}\n          onCancel={this.props.onCancel} />, \n        document.body\n      )\n  }\n\n}\n","import React, { Component } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport Search from './search/Search.jsx';\nimport HeaderIcon from '../../common/content/HeaderIcon.jsx';\nimport Breadcrumbs from '../../common/content/Breadcrumbs.jsx';\nimport MenuPopup from '../../common/components/MenuPopup.jsx';\nimport DeleteAction from '../actions/DeleteAction.jsx';\nimport NERAction from '../actions/NERAction.jsx';\n\nexport default class Header extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      action: null,\n      menuVisible: false\n    };\n\n    document.body.addEventListener('keydown', this.onKeydown.bind(this), false);\n  }\n\n  onKeydown(evt) {\n    if (this.props.selection.length > 0 && evt.which === 46)\n      this.setState({ action: 'DELETE' });\n  }\n\n  /** User clicked the DELETE button in the mini-menu */\n  startDeleteAction() {\n    const deleteAction =\n      <DeleteAction\n        view={this.props.view}\n        selection={this.props.selection}\n        onStart={this.props.onDelete}\n        onSuccess={this.onDeleteSuccess.bind(this)}\n        onError={this.onDeleteError.bind(this)}\n        onCancel={this.cancelAction.bind(this)} />\n\n    this.setState({ action: deleteAction });\n  }\n\n  /** User clicked CANCEL in the warning prompt **/\n  cancelAction() {\n    this.setState({ action: null });\n  }\n\n  /** Delete executed successfully **/\n  onDeleteSuccess() {\n    this.setState({ action: null }, () => {\n      this.props.afterDelete();\n    });\n  }\n\n  onDeleteError(error) {\n    this.setState({ action: null }, () => {\n      this.props.afterDelete(); // TODO error message\n    });\n  }\n\n  showActionsMenu() {\n    this.setState({ menuVisible: true });\n  }\n\n  actionStarted(jobId) {\n    this.setState({ action: null });\n  }\n\n  onSelectMenuOption(option) { \n    this.setState({ menuVisible: false });\n    \n    if (option === 'NER')\n      this.setState({ action: \n        <NERAction\n          selection={this.props.selection}\n          onStarted={this.actionStarted.bind(this)}\n          onCancel={this.cancelAction.bind(this)} /> \n      });\n  }\n\n  onCancelMenu() {\n    this.setState({ menuVisible: false });\n  }\n\n  render() {\n    const isOpen = this.props.selection.length > 0;\n\n    return (\n      <div className={this.props.readme ? \"header\" : \"header no-readme\"}>\n        <div className=\"top-row\">\n          <Search/>\n          <div className=\"header-icons\">\n            <HeaderIcon icon=\"&#xe64a;\" className=\"help stroke7\" link=\"/help\" />\n            {/* <HeaderIcon icon=\"&#xe8ae;\" className=\"stats\" />\n            <HeaderIcon icon=\"&#xe8c1;\" className=\"notifications\" /> */}\n          </div>\n        </div>\n        <div className=\"subheader\">\n          <Breadcrumbs \n            view={this.props.view}\n            path={this.props.breadcrumbs}\n            count={this.props.docCount}>\n\n            {!this.props.readme && this.props.view === 'MY_DOCUMENTS' &&\n              <button \n                className=\"add-abstract nostyle\"\n                onClick={this.props.onCreateReadme} >\n                <span className=\"icon\">&#xf055;</span>\n                <span className=\"label\">Add a description...</span>\n              </button>\n            }\n          </Breadcrumbs>\n\n          <div className=\"subheader-icons\">\n            <CSSTransition\n              in={isOpen} \n              timeout={500} \n              classNames=\"selection-actions\">\n\n              <div className=\"selection-actions\">              \n                {/* <span className=\"share icon\">&#xf234;</span> */}\n\n                <span\n                  className=\"delete icon\" \n                  onClick={this.startDeleteAction.bind(this)}>&#xf014;</span>\n\n                <span \n                  className=\"more icon\"\n                  onClick={this.showActionsMenu.bind(this)}>&#xf078;</span>\n              </div>\n            </CSSTransition>\n\n            {this.state.menuVisible &&\n              <MenuPopup\n                className=\"selection-actions-menu\"\n                menu={[\n                  { group: 'root', options: [\n                    { icon: '\\uf085', label: 'Named Entity Recognition', value: 'NER' }\n                  ]}\n                ]} \n                onSelect={this.onSelectMenuOption.bind(this)}\n                onCancel={this.onCancelMenu.bind(this)} />\n            }\n\n            <HeaderIcon\n              className=\"presentation-toggle stroke7\"\n              icon={(this.props.presentation === 'TABLE') ? '\\ue645' : '\\ue636'} \n              onClick={this.props.onTogglePresentation} />\n\n            {this.state.action}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport ProfileInfo from '../../../common/content/profile/ProfileInfo.jsx';\nimport MenuPopup from '../../../common/components/MenuPopup.jsx';\n\nexport default class Account extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { menuVisible: false };\n  }\n\n  onSelectMenuOption(option) {\n    if (option === 'SETTINGS')\n      window.location.href= '/settings/account';\n    else if (option === 'SIGNOUT')\n      window.location.href= '/logout';\n    else if (option === 'HELP');\n      window.location.href= '/help';\n  }\n\n  showMenu() {\n    this.setState({ menuVisible: true });\n  }\n\n  closeMenu() {\n    this.setState({ menuVisible: false });\n  }\n\n  render() {\n    return (\n      <div\n        className=\"section account\"\n        onClick={this.showMenu.bind(this)} >\n\n        <ProfileInfo account={this.props.account} />\n\n        { this.state.menuVisible &&\n          <MenuPopup\n            className=\"account-menu\"\n            menu={[\n              { group: 'settings', options: [\n                { icon: '\\uf0ad', label: 'Account settings', link: '/settings/account' }\n              ]},\n              { group: 'general', options: [\n                { icon: '\\uf128', label: 'Help', link: '/help' },\n                { icon: '\\uf011', label: 'Sign out', link: '/logout' }\n              ]}\n            ]}\n            onSelect={this.onSelectMenuOption.bind(this)}\n            onCancel={this.closeMenu.bind(this)} />\n        }\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport API from '../../API.js';\nimport MenuPopup from '../../../common/components/MenuPopup.jsx';\n\nexport default class CreateNew extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { menuVisible: false };\n  }\n\n  onShowOptions() {\n    this.setState({ menuVisible: true });\n  }\n\n  onSelectOption(option) {\n    this.setState({ menuVisible: false });\n    if (option === 'FOLDER') {\n      const currentFolderId = document.location.hash.substring(1);\n      API.createFolder('Unnamed Folder', currentFolderId)\n         .then(() => this.props.onFolderCreated());\n    } else if (option === 'FILE') {\n      this._input.click();\n    }\n  }\n\n  onUploadFiles(evt) {\n    const files = Array.from(evt.target.files);\n    this.props.onUploadFiles(files);\n  }\n\n  onCancel() {\n    this.setState({ menuVisible: false });\n  }\n\n  render() {\n    return (\n      <div className=\"section create-new\">\n        <button\n          className=\"btn create-new\"\n          onClick={this.onShowOptions.bind(this)}>\n          <span className=\"icon\">&#xf067;</span>\n          <span className=\"label\">New</span>\n        </button>\n        <input\n          ref={c => this._input = c}\n          type=\"file\"\n          name=\"file\"\n          multiple\n          onChange={this.onUploadFiles.bind(this)}\n          style={{ display: 'none' }} />\n\n        {this.state.menuVisible &&\n          <MenuPopup\n            className=\"create-new\"\n            menu={[\n              { group: 'local', options: [\n                { icon: '\\uf07b', label: 'Folder', value: 'FOLDER' },\n                { icon: '\\uf15b', label: 'File upload', value: 'FILE' }\n              ]},\n\n              { group: 'remote', options: [\n                { icon: '\\uf0c1', label: 'From IIIF manifest', value: 'IIIF', disabled: true },\n                { icon: '\\uf121', label: 'From CTS service', value: 'CTS', disabled: true }\n              ]}\n            ]}\n            onSelect={this.onSelectOption.bind(this)}\n            onCancel={this.onCancel.bind(this)} />\n        }\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nclass ViewListItem extends Component {\n\n  render() {\n    return (\n      <li\n        className={this.props.current ? 'current' : null}\n        onClick={this.props.onClick}>\n        <span className=\"icon\">{this.props.icon}</span> {\n          this.props.children\n        }\n      </li>\n    )\n  }\n\n}\n\nexport default class ViewList extends Component {\n\n  render() {\n    return (\n      <div className=\"section views\">\n        <ul>\n          <ViewListItem\n            icon=\"&#xf2be;\"\n            current={this.props.currentView === 'MY_DOCUMENTS'}\n            onClick={this.props.onChangeView.bind(this, 'MY_DOCUMENTS')}>\n            My Documents\n          </ViewListItem>\n\n          <ViewListItem\n            icon=\"&#xf064;\"\n            current={this.props.currentView === 'SHARED_WITH_ME'}\n            onClick={this.props.onChangeView.bind(this, 'SHARED_WITH_ME')}>\n            Shared with me\n          </ViewListItem>\n\n          {/* <ViewListItem\n            icon=\"&#xf017;\"\n            current={this.props.currentView == 'RECENT'}\n            onClick={this.props.onChangeView.bind(this, 'RECENT')}>\n            Recent\n          </ViewListItem> */}\n        </ul>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport NumberFormat from 'react-number-format';\n\nimport Meter from '../../../common/components/Meter.jsx';\n\nexport default class Storage extends Component {\n\n  render() {\n    const dataAvailable = this.props.account && this.props.account.storage;\n    const quota = dataAvailable ? this.props.account.storage.quota_mb : 0;\n    const used = dataAvailable ? this.props.account.storage.used_mb : 0;\n\n    return (\n      <div className=\"section storage\">\n        <span className=\"icon\">&#xf1c0;</span> Storage\n        <div className=\"used-diskspace\">\n          <Meter\n            value={(quota > 0) ? used / quota : 0} />\n\n          <div className=\"label\">\n            <NumberFormat \n              displayType=\"text\"\n              value={used}\n              thousandSeparator={true} /> \n            {' of  '}\n            <NumberFormat \n              displayType=\"text\"\n              value={quota}\n              thousandSeparator={true} /> MB used\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport ActivityWidget from '../../common/content/activity/ActivityWidget.jsx';\nimport CollaboratorList from '../../common/content/profile/CollaboratorList.jsx';\n\nimport Account   from './sections/Account.jsx';\nimport CreateNew from './sections/CreateNew.jsx';\nimport ViewList  from './sections/Views.jsx';\nimport Storage   from './sections/Storage.jsx';\n\nexport default class Sidebar extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { collaborators: [] };\n  }\n\n  render() {\n    return (\n      <div className=\"sidebar\">\n        <Account\n          account={this.props.account} />\n\n        <CreateNew \n          onFolderCreated={this.props.onFolderCreated}\n          onUploadFiles={this.props.onUploadFiles} />\n          \n        <ViewList\n          account={this.props.account}\n          currentView={this.props.currentView}\n          onChangeView={this.props.onChangeView} />\n\n        <Storage \n          account={this.props.account} /> \n\n        <ActivityWidget \n          className=\"section\" \n          width={237}\n          height={55}\n          fill=\"#4483c4\"\n          stats={this.props.account && this.props.account.stats} />\n\n        <CollaboratorList \n          className=\"section collaborators\"\n          title=\"My top collaborators\"\n          username={this.props.account && this.props.account.username} />\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport { render } from 'react-dom';\n\nimport API from './API.js';\nimport GridPane from '../common/content/grid/GridPane.jsx';\nimport TablePane from '../common/content/table/TablePane.jsx';\nimport Readme from '../common/content/Readme.jsx';\nimport { Columns } from '../common/content/table/Columns.js';\nimport StoredUIState from '../common/StoredUIState.js';\nimport Uploader from '../common/content/upload/Uploader.jsx';\nimport JobProgress from '../common/content/job/JobProgress.jsx';\n\nimport Header from './header/Header.jsx';\nimport Sidebar from './sidebar/Sidebar.jsx';\n\nimport '../../assets/style/workspace/index.scss';\n\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const state = {\n      account       : null,           // account info\n      view          : 'MY_DOCUMENTS', // view, as selected in sidebar (My Documents, Shared, Recent)\n      breadcrumbs   : [],             // the current folder (and parent folders) we are in\n      presentation  : 'TABLE',        // presentation mode TABLE or GRID\n      table_columns : [               // current table view columns configuration\n        \"author\",\n        \"title\",\n        \"language\",\n        \"date_freeform\",\n        \"uploaded_at\",\n        \"last_edit_at\"\n      ],\n      table_sorting : null,          // current table sorting (if any)\n      busy          : false,          // Document pane in 'busy' state? (Docs loading, action onging, etc.)\n      folders       : [],             // Folders\n      documents     : [],             // Documents in view\n      total_docs    : null,           // Total number of documents\n      readme        : null,           // Current folder readme\n      selection     : [],             // Selected items (folders and documents)\n      fileUploads   : [],             // Files currently uploading\n      urlUpload     : null            // URLs currently uploading/registering\n    };\n\n    Object.assign(state, StoredUIState.load());\n    this.state = state;\n\n    this._root = document.getElementById('app');\n\n    this.onKeydown = this.onKeydown.bind(this);\n    this.onMousedown = this.onMousedown.bind(this);\n\n    window.onhashchange = this.changeFolder.bind(this);\n  }\n\n  /** Clear selection on ESC key **/\n  onKeydown(evt) {\n    if (evt.which === 27) this.setState({ selection: [] });\n  }\n\n  /** Clear selection on click ouside the document pane **/\n  onMousedown(evt) {\n    const isClickOutside = !(\n      document.querySelector('.documents-pane').contains(evt.target) ||\n      document.querySelector('.subheader-icons').contains(evt.target)\n    );\n\n    if (isClickOutside) this.setState({ selection: [] });\n  }\n\n  componentDidMount() {\n    this._root.addEventListener('keydown', this.onKeydown, false);\n    this._root.addEventListener('mousedown', this.onMousedown, false);\n\n    this.fetchAccountData();\n    this.refreshCurrentView();\n  }\n\n  componentWillUnmount() {\n    this._root.removeEventListener('keydown', this.onKeydown, false);\n    this._root.removeEventListener('mousedown', this.onMousedown, false);\n  }\n\n  getDisplayConfig() {\n    if (this.state.presentation === 'GRID')\n      return; // No configs for grid view\n\n    return {\n      columns: Columns.expandAggregatedColumns(this.state.table_columns),\n      sort: this.state.table_sorting\n    };\n  }\n\n  fetchAccountData() {\n    return API.accountData().then(result => { this.setState({ account: result.data }) });\n  }\n\n  fetchMyDocuments() {\n    this.setState({ busy: true });\n    const currentFolderId = document.location.hash.substring(1);\n    return API.myDocuments(this.getDisplayConfig(), currentFolderId).then(result => {\n      this.setState({\n        breadcrumbs: result.data.breadcrumbs,\n        readme: result.data.readme,\n        documents: result.data.items, \n        total_docs: result.data.total,\n        busy: false \n      });\n    });\n  }\n\n  fetchSharedWithMe() {\n    this.setState({ busy: true });\n    return API.sharedWithMe(this.getDisplayConfig()).then(result => { \n      this.setState({\n        breadcrumbs: [],\n        documents: result.data.items, \n        total_docs: result.data.total,\n        busy: false \n      }) \n    });\n  }\n\n  /** Switch between different document views (currently: 'my' vs. 'shared') **/\n  changeView(view) {\n    if (this.state.view !== view) {\n      StoredUIState.save('view', view);\n\n      this.setState({\n        view: view,\n        documents:[]\n      }, () => {\n        (view === 'MY_DOCUMENTS') ? this.fetchMyDocuments() : this.fetchSharedWithMe();\n      });\n    }\n  }\n\n  /** Reloads the current view from the API */\n  refreshCurrentView() {\n    if (this.state.view === 'MY_DOCUMENTS')\n      return this.fetchMyDocuments();\n    else \n      return this.fetchSharedWithMe();\n  }\n\n  changeFolder() {\n    this.setState({ selection: [] });\n    this.refreshCurrentView();\n  }\n\n  /** Toggles the view presentation (table vs. grid) **/\n  togglePresentation() {\n    this.setState(before => { \n      const p = (before.presentation === 'TABLE') ? 'GRID' : 'TABLE';\n      StoredUIState.save('presentation', p);\n      return { presentation: p };\n    });\n  }\n\n  onChangeColumnPrefs(columns) {\n    StoredUIState.save('table_columns', columns);\n    this.setState({ table_columns: columns }, () => {\n      this.refreshCurrentView();\n    });\n  }\n  \n  onSortTable(sorting) {\n    StoredUIState.save('table_sorting', sorting);\n    this.setState({ table_sorting: sorting }, () => {\n      this.refreshCurrentView();\n    });\n  }\n\n  /** File selection **/\n  onSelect(selection) {\n    this.setState({ selection: selection });\n  }\n\n  onRenameFolder(folder, title) {\n    API.renameFolder(folder.id, title)\n       .then(() => this.refreshCurrentView());\n  }\n\n  createReadme() {\n    this.setState({ readme: true });\n  }\n\n  onUpdateReadme(readme) {\n    const currentFolderId = document.location.hash.substring(1);\n    API.updateReadme(readme, currentFolderId)\n       .then(this.setState({ readme: readme }));\n  }\n\n  onDeleteReadme() {\n    const currentFolderId = document.location.hash.substring(1);\n    API.deleteReadme(currentFolderId)\n       .then(this.setState({ readme: null })); \n  }\n\n  /** File upload **/\n  startUpload(files) {\n    this.setState({ \n      fileUploads: files, \n      urlUpload: null\n    });\n  }\n\n  /** Remote file registration (IIIF, CTS) **/\n  startRegisterRemoteSource(url) {\n    this.setState({ \n      fileUploads: [],\n      urlUpload: url\n    });\n  } \n\n  onUploadComplete() {\n    this.setState({ \n      view: 'MY_DOCUMENTS', // Force view back to 'My Documents'\n      fileUploads: [], \n      urlUpload: null \n    }, () => {\n      this.refreshCurrentView()\n        .then(this.fetchAccountData.bind(this));\n    });\n  }\n\n  setBusy(busy) {\n    this.setState({ busy: busy });\n  }\n\n  afterDelete() {\n    this.refreshCurrentView()\n      .then(() => this.setState({ busy: false, selection: []}))\n      .then(this.fetchAccountData.bind(this));\n  }\n\n  render() {\n    const isUploading = this.state.fileUploads.length > 0 || this.state.urlUpload;\n\n    return(\n      <React.Fragment>\n        <Sidebar\n          account={this.state.account}\n          onFolderCreated={this.refreshCurrentView.bind(this)}\n          onUploadFiles={this.startUpload.bind(this)}\n          currentView={this.state.view}\n          onChangeView={this.changeView.bind(this)} />\n\n        <div className=\"container\">\n          <Header\n            view={this.state.view}\n            breadcrumbs={this.state.breadcrumbs}\n            readme={this.state.readme}\n            docCount={this.state.total_docs}\n            selection={this.state.selection}\n            presentation={this.state.presentation}\n            onDelete={this.setBusy.bind(this, true)}\n            afterDelete={this.afterDelete.bind(this)}\n            onTogglePresentation={this.togglePresentation.bind(this)} \n            onCreateReadme={this.createReadme.bind(this)} />\n\n          {this.state.presentation === 'TABLE' ?\n            <TablePane\n              view={this.state.view}\n              folders={this.state.folders}\n              documents={this.state.documents}\n              columns={this.state.table_columns}\n              sorting={this.state.table_sorting}\n              busy={this.state.busy}\n              selection={this.state.selection}\n              disableFiledrop={this.state.view !== 'MY_DOCUMENTS'}\n              onSort={this.onSortTable.bind(this)}\n              onSelect={this.onSelect.bind(this)} \n              onDropFiles={this.startUpload.bind(this)} \n              onDropURL={this.startRegisterRemoteSource.bind(this)} \n              onChangeColumnPrefs={this.onChangeColumnPrefs.bind(this)} \n              onRenameFolder={this.onRenameFolder.bind(this)}>\n\n              {this.state.readme && \n                <Readme\n                  content={this.state.readme} \n                  onUpdate={this.onUpdateReadme.bind(this)} \n                  onDelete={this.onDeleteReadme.bind(this)} /> \n              }\n            </TablePane>\n            :\n            <GridPane\n              folders={this.state.folders}\n              documents={this.state.documents}\n              busy={this.state.busy}\n              selection={this.state.selection}\n              onSelect={this.onSelect.bind(this)} \n              disableFiledrop={this.state.view !== 'MY_DOCUMENTS'}\n              onDropFiles={this.startUpload.bind(this)}\n              onDropURL={this.startRegisterRemoteSource.bind(this)} >\n              \n              {this.state.readme && \n                <Readme \n                  content={this.state.readme} \n                  onUpdate={this.onUpdateReadme.bind(this)} \n                  onDelete={this.onDeleteReadme.bind(this)} /> \n              }\n            </GridPane>\n          }\n        </div>\n\n        { isUploading && \n          <Uploader\n            files={this.state.fileUploads} \n            url={this.state.urlUpload}\n            onUploadComplete={this.onUploadComplete.bind(this)} /> \n        }\n      </React.Fragment>\n    )\n  }\n\n}\n\nrender(<App />, document.getElementById('app'));\n"],"sourceRoot":""}