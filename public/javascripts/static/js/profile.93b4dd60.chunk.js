(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{552:function(e,t,a){e.exports=a(556)},553:function(e,t,a){},556:function(e,t,a){"use strict";a.r(t);var n=a(4),s=a(5),o=a(8),c=a(6),r=a(7),i=a(1),l=a.n(i),u=a(24),m=a.n(u),h=a(20),d=a.n(h),p=function(){function e(){Object(n.a)(this,e)}return Object(s.a)(e,null,[{key:"fetchLoginStatus",value:function(){return d.a.get("/api/me")}},{key:"fetchPublicAccountInfo",value:function(e){return d.a.get("/api/account/".concat(e))}},{key:"fetchAccessibleDocuments",value:function(e,t){return d.a.post("/api/directory/".concat(e),t)}}]),e}(),f=a(128),g=a(127),b=a(118),v=a(86),E=a(45),y=a(42),O=a(119),_=a(124),j=a(126),k=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"section"},l.a.createElement(j.a,{account:this.props.account})),l.a.createElement(O.a,{className:"section",width:237,height:55,fill:"#4483c4",stats:this.props.account&&this.props.account.stats}),l.a.createElement(_.a,{className:"section",title:"Top collaborators",username:this.props.account&&this.props.account.username}))}}]),t}(i.Component),A=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"search"},l.a.createElement("div",{className:"wrapper"},l.a.createElement("input",{placeholder:"Search Recogito..."})),l.a.createElement("span",{className:"icon hand-lens"},"\uf002"))}}]),t}(i.Component),N=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"notLoggedIn",value:function(){return l.a.createElement("div",{className:"not logged-in"},l.a.createElement("a",{href:"/login"},"Log in"),"\xa0 | \xa0New to Recogito? \xa0",l.a.createElement("a",{href:"/"},"Learn more"))}},{key:"loggedInAs",value:function(){var e=this.props.me.real_name?this.props.me.real_name:this.props.me.username;return l.a.createElement("div",{className:"logged-in"},"Logged in as ",l.a.createElement("a",{href:"/".concat(this.props.me.username)},e))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"top-bar"},l.a.createElement("div",{className:"top-left"},l.a.createElement("a",{href:"/my",className:"home"},l.a.createElement("img",{src:"/assets/images/logo-recogito-small.png",alt:"Recogito logo"})),this.props.me&&this.props.me.logged_in&&l.a.createElement("a",{href:"/my"},"My Workspace"),l.a.createElement("a",{href:"/help"},"Help"),l.a.createElement("a",{href:"/help/about"},"About"),l.a.createElement(A,null)),l.a.createElement("div",{className:"top-right"},this.props.me&&this.props.me.logged_in?this.loggedInAs():this.notLoggedIn())))}}]),t}(i.Component),w=a(27);a(553);a.d(t,"default",function(){return C});var C=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(c.a)(t).call(this,e));var s={me:null,visitedAccount:null,presentation:"TABLE",table_columns:["author","title","language","date_freeform","uploaded_at","last_edit_at"],table_sorting:null,busy:!1,documents:null,total_docs:null,readme:null};return Object.assign(s,y.a.load()),a.state=s,a._profileOwner=window.location.pathname.substring(1),a}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.fetchPublicAccountInfo(this._profileOwner).then(function(t){return e.setState({visitedAccount:t.data})}),p.fetchLoginStatus().then(function(t){return e.setState({me:t.data})}),this.reloadDocuments()}},{key:"reloadDocuments",value:function(){var e=this;p.fetchAccessibleDocuments(this._profileOwner,this.getDisplayConfig()).then(function(t){return e.setState({readme:t.data.readme,documents:t.data.items,total_docs:t.data.total})})}},{key:"getDisplayConfig",value:function(){if("GRID"!==this.state.presentation)return{columns:w.b.expandAggregatedColumns(this.state.table_columns),sort:this.state.table_sorting}}},{key:"onTogglePresentation",value:function(e){this.setState(function(e){var t="TABLE"===e.presentation?"GRID":"TABLE";return y.a.save("presentation",t),{presentation:t}})}},{key:"onChangeColumnPrefs",value:function(e){var t=this;y.a.save("table_columns",e),this.setState({table_columns:e},function(){t.reloadDocuments()})}},{key:"onSortTable",value:function(e){var t=this;y.a.save("table_sorting",e),this.setState({table_sorting:e},function(){t.reloadDocuments()})}},{key:"render",value:function(){var e=this.state.documents||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement(N,{me:this.state.me}),l.a.createElement(k,{account:this.state.visitedAccount}),l.a.createElement("div",{className:"container"},l.a.createElement(b.a,{label:"Public Documents",count:this.state.total_docs}),l.a.createElement(v.a,{className:"presentation-toggle stroke7",icon:"TABLE"===this.state.presentation?"\ue645":"\ue636",onClick:this.onTogglePresentation.bind(this)}),this.state.visitedAccount&&(0===e.length?l.a.createElement("div",{className:"no-public-documents"},this.state.visitedAccount.username," has not shared any documents yet"):"TABLE"===this.state.presentation?l.a.createElement(g.a,{folders:[],documents:e,columns:this.state.table_columns,sorting:this.state.table_sorting,busy:this.state.busy,disableFiledrop:!0,onSort:this.onSortTable.bind(this),onChangeColumnPrefs:this.onChangeColumnPrefs.bind(this)},this.state.readme&&l.a.createElement(E.a,{content:this.state.readme})):l.a.createElement(f.a,{folders:[],documents:e,busy:this.state.busy,disableFiledrop:!0},this.state.readme&&l.a.createElement(E.a,{content:this.state.readme})))))}}]),t}(i.Component);m.a.render(l.a.createElement(C,null),document.getElementById("app"))}},[[552,5,0,1]]]);
//# sourceMappingURL=profile.93b4dd60.chunk.js.map