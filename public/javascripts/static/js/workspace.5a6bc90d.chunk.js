(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{20:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return l});var a=n(3),s=n(4),o=["author","title","language","date_freeform","uploaded_at","last_edit_at","last_edit_by","annotations","public_visibility"],i={author:"Author",title:"Title",language:"Language",date_freeform:"Date",uploaded_at:"Uploaded at",last_edit_at:"Last edit",last_edit_by:"Last edit by",annotations:"Annotations",public_visibility:"Visibility",status_ratio:"Verification ratio",activity:"Activity graph",owner:"Document owner",shared_by:"Shared by",access_level:"Access level"},r={agg_document:"XL",author:"M",title:"L",language:"M",date_freeform:"M",uploaded_at:"M",last_edit_at:"M",last_edit_by:"M",annotations:"M",public_visibility:"M",status_ratio:"M",activity:"M",owner:"M",shared_by:"M",access_level:"S"},c={agg_document:["author","document"]},l=function(){function e(){Object(a.a)(this,e)}return Object(s.a)(e,null,[{key:"getSpan",value:function(e){var t=r[e];return"XL"===t?6:"L"===t?4:"M"===t?2:"S"===t?1:void 0}},{key:"expandAggregatedColumns",value:function(e){return e.reduce(function(e,t){return t.startsWith("agg_")?e=e.concat(c[t]):e.push(t),e},[])}}]),e}()},222:function(e,t,n){e.exports=n(442)},318:function(e,t,n){},32:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(3),s=n(4),o=function(){function e(t,n){Object(a.a)(this,e),this._allItems=t,this._selection=n}return Object(s.a)(e,[{key:"clear",value:function(){this._selection=[]}},{key:"isEmpty",value:function(){return 0===this._selection.length}},{key:"getSelectedItems",value:function(){return this._selection}},{key:"selectItem",value:function(e,t){var n=this._selection.indexOf(e);t?n>-1?this._selection.splice(n,1):this._selection.push(e):this._selection=[e]}},{key:"selectRange",value:function(e){var t=this,n=this._selection.map(function(e){return t._allItems.indexOf(e)}),a=Math.min.apply(null,n),s=Math.max.apply(null,n),o=e>s||e<a,i=function(e,n){return t._allItems.slice(e,n+1)};this._selection=o&&e>s?i(a,e):o?i(e,s):i(a,e)}}]),e}()},35:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"readme"},l.a.createElement("div",{className:"inner"},this.props.children))}}]),t}(c.Component)},37:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(3),s=n(4),o=function(){function e(){Object(a.a)(this,e)}return Object(s.a)(e,null,[{key:"load",value:function(){var e={};return["view","presentation","table_columns","table_sorting"].map(function(t){var n=localStorage.getItem("r2.workspace.".concat(t));n&&(e[t]=JSON.parse(n))}),e}},{key:"save",value:function(e,t){var n="r2.workspace.".concat(e);localStorage.setItem(n,JSON.stringify(t))}}]),e}()},442:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(24),l=n(1),u=n.n(l),p=n(28),h=n.n(p),m=n(27),d=n.n(m),f=function(e,t){return d.a.post("/my/api/".concat(e),t)},b=function(){function e(){Object(a.a)(this,e)}return Object(s.a)(e,null,[{key:"accountData",value:function(){return d.a.get("/my/api/account")}},{key:"myDocuments",value:function(e){return f("my-documents",e)}},{key:"sharedWithMe",value:function(e){return f("shared-with-me",e)}},{key:"deleteDocument",value:function(e){return d.a.delete("/document/".concat(e))}},{key:"bulkDeleteDocuments",value:function(e){return d.a.delete("/document/bulk",{data:e})}}]),e}(),v=n(90),y=n(89),E=n(35),g=n(20),O=n(37),k=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"meter",style:{position:"relative"}},u.a.createElement("div",{className:"bar",style:{width:"".concat(100*this.props.value,"%"),height:"100%"}}))}}]),t}(l.Component),j=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state=n._emptyState(e),n.start(),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"_emptyState",value:function(e){return{files:e.files,remoteSource:e.url,phase:"Uploading",totalSize:e.files.reduce(function(e,t){return e+t.size},0),filepartIds:e.files.length>0?e.files.map(function(){return null}):[null],uploadId:null,uploadStatus:e.files.length>0?e.files.map(function(){return"UPLOADING"}):["UPLOADING"],progress:e.files.length>0?e.files.map(function(){return 0}):[0],errors:[]}}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.files===e.files&&this.props.url===e.url||this.setState(this._emptyState(e),function(){return t.start()})}},{key:"start",value:function(){var e=this;this.initNewDocument().then(function(t){return e.setState({uploadId:t.data.id}),e.state.files.length>0?e.uploadFiles():e.state.remoteSource?e.registerURL():void 0}).catch(function(t){e.setState(function(e){var n=e.errors.slice(0);return n.push(t.response.data),{errors:n}})}).then(this.finalizeDocument.bind(this))}},{key:"initNewDocument",value:function(){var e=1===this.state.files.length?this.state.files[0].name:"New document",t=new FormData;return t.append("title",e),d.a.post("/my/upload",t,{headers:{"X-Requested-With":"XMLHttpRequest"}})}},{key:"registerURL",value:function(){this.setState({phase:"Importing"});var e=new FormData;return e.append("url",this.state.remoteSource),d.a.post("/my/upload/".concat(this.state.uploadId,"/file"),e,{headers:{"X-Requested-With":"XMLHttpRequest"}})}},{key:"uploadFiles",value:function(){var e=this,t=this.state.files.map(function(t,n){return function(t,n){var a=new FormData;a.append("file",t);return d.a.post("/my/upload/".concat(e.state.uploadId,"/file"),a,{headers:{"X-Requested-With":"XMLHttpRequest"},onUploadProgress:function(t){var a=e.state.progress.slice(0);a[n]=t.loaded,e.setState({progress:a})}}).then(function(t){return e.setState(function(e){var a=e.filepartIds.slice(0);return a[n]=t.data.uuid,{filepartIds:a}}),t}).catch(function(t){e.setState(function(e){var a=e.uploadStatus.slice(0);a[n]="FAILED";var s=e.errors.slice(0);return s.push(t.response.data),{uploadStatus:a,errors:s}})})}(t,n)});return Promise.all(t)}},{key:"finalizeDocument",value:function(){var e=this;return d.a.post("/my/upload/".concat(this.state.uploadId,"/finalize"),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(t){var n=t.data.running_tasks;n.length>0?(e.setState({phase:"Importing..."}),e.pollTaskProgress(t.data.document_id,n)):e.props.onUploadComplete()}).catch(function(e){console.log("Upload contained errors")})}},{key:"updateStatusForFile",value:function(e,t){var n=this,a=t.subtasks.find(function(t){return t.filepart_id===e}),s=this.state.filepartIds.indexOf(e),o=function(e){n.setState(function(t){var n=t.uploadStatus.slice(0);return n[s]=e,{uploadStatus:n}})};o(a?a.status:"COMPLETED")}},{key:"pollTaskProgress",value:function(e,t){var n=this;d.a.get("/api/task?id=".concat(e)).then(function(a){n.state.filepartIds.map(function(e){return n.updateStatusForFile(e,a.data)}),"COMPLETED"===a.data.status||"FAILED"===a.data.status?n.props.onUploadComplete():setTimeout(function(){return n.pollTaskProgress(e,t)},1e3)})}},{key:"isUploadComplete",value:function(){return this.state.uploadStatus.reduce(function(e,t){return e&&("COMPLETED"===t||"FAILED"===t)})}},{key:"onCancel",value:function(e){this.isUploadComplete()&&this.props.onUploadComplete()}},{key:"render",value:function(){var e=this,t=this.state.progress.reduce(function(e,t){return e+t},0);return u.a.createElement("div",{className:"upload-progress"},u.a.createElement("div",{className:"phase"},this.state.phase,u.a.createElement("button",{className:"close nostyle",onClick:this.onCancel.bind(this)},"\ue897")),u.a.createElement("ul",{className:"files".concat(this.state.errors.length>0?" has-errors":"")},this.state.files.map(function(t,n){return u.a.createElement("li",{key:n},t.name,u.a.createElement("span",{className:"icon spinner ".concat(e.state.uploadStatus[n])}))}),this.state.remoteSource&&u.a.createElement("li",null,"Fetching content from remote source...",u.a.createElement("span",{className:"icon spinner RUNNING"}))),this.state.errors.length>0&&u.a.createElement("ul",{className:"errors"},this.state.errors.map(function(e,t){return u.a.createElement("li",{key:t},e)})),u.a.createElement("div",{className:"progress"},u.a.createElement(k,{value:t/this.state.totalSize})))}}]),t}(l.Component),w=n(74),S=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).onMousedown=n.onMousedown.bind(Object(c.a)(Object(c.a)(n))),n.onKeydown=n.onKeydown.bind(Object(c.a)(Object(c.a)(n))),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onMousedown,!1),document.addEventListener("keydown",this.onKeydown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onMousedown,!1),document.removeEventListener("keydown",this.onKeydown,!1)}},{key:"onMousedown",value:function(e){var t=!this._node.contains(e.target),n=e.target.classList.contains("advanced");t&&!n&&this.props.onClose()}},{key:"onKeydown",value:function(e){27===e.which&&this.props.onClose()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{ref:function(t){return e._node=t},className:"advanced-search"},u.a.createElement("button",{className:"close nostyle",onClick:this.props.onClose},"\ue897"),u.a.createElement("form",null,u.a.createElement("fieldset",null,u.a.createElement("p",null,u.a.createElement("label",null,"Search in"),u.a.createElement("select",null,u.a.createElement("option",null,"All of Recogito"),u.a.createElement("option",null,"My documents"),u.a.createElement("option",null,"Shared with me")),u.a.createElement("span",{className:"hint"})),u.a.createElement("p",null,u.a.createElement("label",null,"Document type"),u.a.createElement("select",null,u.a.createElement("option",null,"Any"),u.a.createElement("option",null,"Text"),u.a.createElement("option",null,"Image"),u.a.createElement("option",null,"Table")),u.a.createElement("span",{className:"hint"})),u.a.createElement("p",null,u.a.createElement("label",null,"Owner"),u.a.createElement("select",null,u.a.createElement("option",null,"Anyone"),u.a.createElement("option",null,"me"),u.a.createElement("option",null,"specific user")),u.a.createElement("span",{className:"hint"})),u.a.createElement("p",null,u.a.createElement("label",null,"Metadata contains"),u.a.createElement("input",{type:"text"}),u.a.createElement("span",{className:"hint"})),u.a.createElement("p",null,u.a.createElement("label",null,"Last modified"),u.a.createElement("select",null,u.a.createElement("option",null,"Any time"),u.a.createElement("option",null,"this week")),u.a.createElement("span",{className:"hint"}))),u.a.createElement("fieldset",{className:"buttons"},u.a.createElement("button",{className:"nostyle clear"},"Clear"),u.a.createElement("button",{type:"submit",className:"btn"},"Search"))))}}]),t}(l.Component),N=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={advancedSearchOpen:!1},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"toggleAdvancedSearch",value:function(){this.setState(function(e){return{advancedSearchOpen:!e.advancedSearchOpen}})}},{key:"render",value:function(){return u.a.createElement("div",{className:"wrapper"},u.a.createElement("div",{className:"search"},u.a.createElement("div",{className:"wrapper"},u.a.createElement("input",{placeholder:"Search Recogito..."})),u.a.createElement("span",{className:"icon hand-lens"},"\uf002")),this.state.advancedSearchOpen&&u.a.createElement(S,{onClose:this.toggleAdvancedSearch.bind(this)}))}}]),t}(l.Component),C=n(75),D=n(86),_=n(73),M=n.n(_),L=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).onKeydown=n.onKeydown.bind(Object(c.a)(Object(c.a)(n))),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"onKeydown",value:function(e){27===e.which&&this.props.onNo()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeydown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeydown,!1)}},{key:"render",value:function(){var e=this.props.type?"prompt ".concat(this.props.type.toLowerCase()):"prompt";return u.a.createElement("div",{className:"clicktrap"},u.a.createElement(M.a,{handle:".prompt-header"},u.a.createElement("div",{className:e},u.a.createElement("div",{className:"prompt-header"},u.a.createElement("h1",{className:"title"},this.props.title)),u.a.createElement("div",{className:"prompt-body"},u.a.createElement("p",{className:"message"},this.props.message),u.a.createElement("p",{className:"buttons"},u.a.createElement("button",{className:"btn yes",onClick:this.props.onYes},"YES"),u.a.createElement("button",{className:"btn outline no",onClick:this.props.onNo},"NO"))))))}}]),t}(l.Component),U=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"executeDelete",value:function(){var e=this,t=this.props.selection.map(function(e){return e.id});t.length>0?(this.props.onStart(),1===t.length?b.deleteDocument(t[0]).then(function(){e.props.onSuccess()}).catch(function(t){e.props.onError(t)}):b.bulkDeleteDocuments(t).then(function(){e.props.onSuccess()}).catch(function(t){e.props.onError(t)})):this.props.onCancel()}},{key:"render",value:function(){return h.a.createPortal(u.a.createElement(L,{title:"Delete Document",type:"WARNING",message:"You cannot undo this operation. Are you sure you want to do this?",onNo:this.props.onCancel,onYes:this.executeDelete.bind(this)}),document.body)}}]),t}(l.Component),I=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={action:null},document.body.addEventListener("keydown",n.onKeydown.bind(Object(c.a)(Object(c.a)(n))),!1),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"onKeydown",value:function(e){this.props.selection.length>0&&46===e.which&&this.setState({action:"DELETE"})}},{key:"startDeleteAction",value:function(){this.setState({action:"DELETE"})}},{key:"cancelDelete",value:function(){this.setState({action:null})}},{key:"onDeleteSuccess",value:function(){var e=this;this.setState({action:null},function(){e.props.afterDelete()})}},{key:"onDeleteError",value:function(e){var t=this;this.setState({action:null},function(){t.props.afterDelete()})}},{key:"render",value:function(){var e=this.props.selection.length>0;return u.a.createElement("div",{className:"header"},u.a.createElement("div",{className:"top-row"},u.a.createElement(N,null),u.a.createElement("div",{className:"header-icons"},u.a.createElement(C.a,{icon:"\ue64a",className:"help stroke7",link:"/help"}))),u.a.createElement("div",{className:"subheader"},u.a.createElement(D.a,{view:this.props.view}),u.a.createElement("div",{className:"subheader-icons"},u.a.createElement(w.CSSTransition,{in:e,timeout:500,classNames:"selection-actions"},u.a.createElement("div",{className:"selection-actions"},u.a.createElement("span",{className:"delete icon",onClick:this.startDeleteAction.bind(this)},"\uf014"))),u.a.createElement(C.a,{className:"presentation-toggle stroke7",icon:"TABLE"===this.props.presentation?"\ue645":"\ue636",onClick:this.props.onTogglePresentation}),"DELETE"===this.state.action&&u.a.createElement(U,{selection:this.props.selection,onStart:this.props.onDelete,onSuccess:this.onDeleteSuccess.bind(this),onError:this.onDeleteError.bind(this),onCancel:this.cancelDelete.bind(this)}))))}}]),t}(l.Component),T=n(87),A=n(88),R=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).onMousedown=n.onMousedown.bind(Object(c.a)(Object(c.a)(n))),n.onKeydown=n.onKeydown.bind(Object(c.a)(Object(c.a)(n))),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onMousedown,!1),document.addEventListener("keydown",this.onKeydown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onMousedown,!1),document.removeEventListener("keydown",this.onKeydown,!1)}},{key:"onMousedown",value:function(e){!this._node.contains(e.target)&&this.props.onCancel()}},{key:"onKeydown",value:function(e){27===e.which&&this.props.onCancel()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{ref:function(t){return e._node=t},className:"modal-menu ".concat(this.props.className)},u.a.createElement("ul",null,this.props.menu.map(function(t){return u.a.createElement("li",{key:t.group,className:"group ".concat(t.group)},u.a.createElement("ul",null,t.options.map(function(t){return u.a.createElement("li",{key:t.value||t.link,className:"option".concat(t.disabled?" disabled":""),onClick:t.disabled||!t.value?null:e.props.onSelect.bind(e,t.value)},t.link?u.a.createElement("a",{href:t.link},u.a.createElement("span",{className:"icon"},t.icon)," ",t.label):u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"icon"},t.icon)," ",t.label))})))})))}}]),t}(l.Component),F=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={menuVisible:!1},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"onSelectMenuOption",value:function(e){"SETTINGS"===e?window.location.href="/settings/account":"SIGNOUT"===e&&(window.location.href="/logout"),window.location.href="/help"}},{key:"showMenu",value:function(){this.setState({menuVisible:!0})}},{key:"closeMenu",value:function(){this.setState({menuVisible:!1})}},{key:"render",value:function(){return u.a.createElement("div",{className:"section account",onClick:this.showMenu.bind(this)},u.a.createElement(A.a,{account:this.props.account}),this.state.menuVisible&&u.a.createElement(R,{className:"account-menu",menu:[{group:"settings",options:[{icon:"\uf0ad",label:"Account settings",link:"/settings/account"}]},{group:"general",options:[{icon:"\uf128",label:"Help",link:"/help"},{icon:"\uf011",label:"Sign out",link:"/logout"}]}],onSelect:this.onSelectMenuOption.bind(this),onCancel:this.closeMenu.bind(this)}))}}]),t}(l.Component),P=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={menuVisible:!1},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"onShowOptions",value:function(){this.setState({menuVisible:!0})}},{key:"onSelectOption",value:function(e){this.setState({menuVisible:!1}),"FILE"===e&&this._input.click()}},{key:"onUploadFiles",value:function(e){var t=Array.from(e.target.files);this.props.onUploadFiles(t)}},{key:"onCancel",value:function(){this.setState({menuVisible:!1})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"section create-new"},u.a.createElement("button",{className:"btn create-new",onClick:this.onShowOptions.bind(this)},u.a.createElement("span",{className:"icon"},"\uf067"),u.a.createElement("span",{className:"label"},"New")),u.a.createElement("input",{ref:function(t){return e._input=t},type:"file",name:"file",multiple:!0,onChange:this.onUploadFiles.bind(this),style:{display:"none"}}),this.state.menuVisible&&u.a.createElement(R,{className:"create-new",menu:[{group:"local",options:[{icon:"\uf07b",label:"Folder",value:"FOLDER",disabled:!0},{icon:"\uf15b",label:"File upload",value:"FILE"}]},{group:"remote",options:[{icon:"\uf0c1",label:"From IIIF manifest",value:"IIIF",disabled:!0},{icon:"\uf121",label:"From CTS service",value:"CTS",disabled:!0}]}],onSelect:this.onSelectOption.bind(this),onCancel:this.onCancel.bind(this)}))}}]),t}(l.Component),V=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("li",{className:this.props.current?"current":null,onClick:this.props.onClick},u.a.createElement("span",{className:"icon"},this.props.icon)," ",this.props.children," ",null!=this.props.count&&u.a.createElement("span",{className:"doc-count badge"},this.props.count))}}]),t}(l.Component),W=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.account&&this.props.account.documents;return u.a.createElement("div",{className:"section views"},u.a.createElement("ul",null,u.a.createElement(V,{icon:"\uf2be",count:e&&this.props.account.documents.my_documents,current:"MY_DOCUMENTS"===this.props.currentView,onClick:this.props.onChangeView.bind(this,"MY_DOCUMENTS")},"My Documents"),u.a.createElement(V,{icon:"\uf064",count:e&&this.props.account.documents.shared_with_me,current:"SHARED_WITH_ME"===this.props.currentView,onClick:this.props.onChangeView.bind(this,"SHARED_WITH_ME")},"Shared with me")))}}]),t}(l.Component),x=n(50),K=n.n(x),H=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.account&&this.props.account.storage,t=e?this.props.account.storage.quota_mb:0,n=e?this.props.account.storage.used_mb:0;return u.a.createElement("div",{className:"section storage"},u.a.createElement("span",{className:"icon"},"\uf1c0")," Storage",u.a.createElement("div",{className:"used-diskspace"},u.a.createElement(k,{value:t>0?n/t:0}),u.a.createElement("div",{className:"label"},u.a.createElement(K.a,{displayType:"text",value:n,thousandSeparator:!0})," of  ",u.a.createElement(K.a,{displayType:"text",value:t,thousandSeparator:!0})," MB used")))}}]),t}(l.Component),B=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={collaborators:[]},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"sidebar"},u.a.createElement(F,{account:this.props.account}),u.a.createElement(P,{onUploadFiles:this.props.onUploadFiles}),u.a.createElement(W,{account:this.props.account,currentView:this.props.currentView,onChangeView:this.props.onChangeView}),u.a.createElement(H,{account:this.props.account}),u.a.createElement(T.a,{className:"section collaborators",title:"My top collaborators",username:this.props.account&&this.props.account.username}))}}]),t}(l.Component);n(318);n.d(t,"default",function(){return X});var X=function(e){function t(e){var n;Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e));var s={account:null,view:"MY_DOCUMENTS",presentation:"TABLE",table_columns:["author","title","language","date_freeform","uploaded_at","last_edit_at"],table_sorting:null,busy:!1,folders:[],documents:[],readme:null,selection:[],fileUploads:[],urlUpload:null};return Object.assign(s,O.a.load()),n.state=s,n._root=document.getElementById("app"),n.onKeydown=n.onKeydown.bind(Object(c.a)(Object(c.a)(n))),n.onMousedown=n.onMousedown.bind(Object(c.a)(Object(c.a)(n))),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"onKeydown",value:function(e){27===e.which&&this.setState({selection:[]})}},{key:"onMousedown",value:function(e){!(document.querySelector(".documents-pane").contains(e.target)||document.querySelector(".subheader-icons").contains(e.target))&&this.setState({selection:[]})}},{key:"componentDidMount",value:function(){this._root.addEventListener("keydown",this.onKeydown,!1),this._root.addEventListener("mousedown",this.onMousedown,!1),this.fetchAccountData(),this.refreshCurrentView()}},{key:"componentWillUnmount",value:function(){this._root.removeEventListener("keydown",this.onKeydown,!1),this._root.removeEventListener("mousedown",this.onMousedown,!1)}},{key:"getDisplayConfig",value:function(){if("GRID"!==this.state.presentation)return{columns:g.b.expandAggregatedColumns(this.state.table_columns),sort:this.state.table_sorting}}},{key:"fetchAccountData",value:function(){var e=this;return b.accountData().then(function(t){e.setState({account:t.data})})}},{key:"fetchMyDocuments",value:function(){var e=this;return this.setState({busy:!0}),b.myDocuments(this.getDisplayConfig()).then(function(t){e.setState({documents:t.data.items,busy:!1})})}},{key:"fetchSharedWithMe",value:function(){var e=this;return this.setState({busy:!0}),b.sharedWithMe(this.getDisplayConfig()).then(function(t){e.setState({documents:t.data.items,busy:!1})})}},{key:"changeView",value:function(e){var t=this;this.state.view!==e&&(O.a.save("view",e),this.setState({view:e,documents:[]},function(){"MY_DOCUMENTS"===e?t.fetchMyDocuments():t.fetchSharedWithMe()}))}},{key:"refreshCurrentView",value:function(){return"MY_DOCUMENTS"===this.state.view?this.fetchMyDocuments():this.fetchSharedWithMe()}},{key:"togglePresentation",value:function(){this.setState(function(e){var t="TABLE"===e.presentation?"GRID":"TABLE";return O.a.save("presentation",t),{presentation:t}})}},{key:"onChangeColumnPrefs",value:function(e){var t=this;O.a.save("table_columns",e),this.setState({table_columns:e},function(){t.refreshCurrentView()})}},{key:"onSortTable",value:function(e){var t=this;O.a.save("table_sorting",e),this.setState({table_sorting:e},function(){t.refreshCurrentView()})}},{key:"onSelect",value:function(e){this.setState({selection:e})}},{key:"startUpload",value:function(e){this.setState({fileUploads:e,urlUpload:null})}},{key:"startRegisterRemoteSource",value:function(e){this.setState({fileUploads:[],urlUpload:e})}},{key:"onUploadComplete",value:function(){var e=this;this.setState({fileUploads:[],urlUpload:null},function(){e.refreshCurrentView().then(e.fetchAccountData.bind(e))})}},{key:"setBusy",value:function(e){this.setState({busy:e})}},{key:"afterDelete",value:function(){var e=this;this.refreshCurrentView().then(function(){return e.setState({busy:!1,selection:[]})}).then(this.fetchAccountData.bind(this))}},{key:"render",value:function(){var e=this.state.fileUploads.length>0||this.state.urlUpload;return u.a.createElement(u.a.Fragment,null,u.a.createElement(B,{account:this.state.account,onUploadFiles:this.startUpload.bind(this),currentView:this.state.view,onChangeView:this.changeView.bind(this)}),u.a.createElement("div",{className:"container"},u.a.createElement(I,{view:this.state.view,selection:this.state.selection,presentation:this.state.presentation,onDelete:this.setBusy.bind(this,!0),afterDelete:this.afterDelete.bind(this),onTogglePresentation:this.togglePresentation.bind(this)}),"TABLE"===this.state.presentation?u.a.createElement(y.a,{folders:this.state.folders,documents:this.state.documents,columns:this.state.table_columns,sorting:this.state.table_sorting,busy:this.state.busy,selection:this.state.selection,onSort:this.onSortTable.bind(this),onSelect:this.onSelect.bind(this),disableFiledrop:"MY_DOCUMENTS"!==this.state.view,onDropFiles:this.startUpload.bind(this),onDropURL:this.startRegisterRemoteSource.bind(this),onChangeColumnPrefs:this.onChangeColumnPrefs.bind(this)},this.state.readme&&u.a.createElement(E.a,null,this.state.readme)):u.a.createElement(v.a,{folders:this.state.folders,documents:this.state.documents,busy:this.state.busy,selection:this.state.selection,onSelect:this.onSelect.bind(this),disableFiledrop:"MY_DOCUMENTS"!==this.state.view,onDropFiles:this.startUpload.bind(this),onDropURL:this.startRegisterRemoteSource.bind(this)},this.state.readme&&u.a.createElement(E.a,null,this.state.readme))),e&&u.a.createElement(j,{files:this.state.fileUploads,url:this.state.urlUpload,onUploadComplete:this.onUploadComplete.bind(this)}))}}]),t}(l.Component);Object(p.render)(u.a.createElement(X,null),document.getElementById("app"))},48:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=n(121).a.div({open:{bottom:"30px",transition:{ease:"easeOut",duration:200}},closed:{bottom:"-140px"}}),p=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={visible:!1},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){return l.a.createElement("div",{className:"dropzone-decoration"},l.a.createElement(u,{className:"inner",pose:this.state.visible?"open":"closed"},l.a.createElement("span",{className:"icon"},"\uf0ee"),l.a.createElement("p",{className:"instructions"},"Drop files or IIIF manifest URLs to add them to your workspace."),l.a.createElement("p",{className:"supported"},"Supported formats: plain text (UTF-8), TEI/XML, image files, CSV (UTF-8)")))}}]),t}(c.Component)},49:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"stringToHslColor",value:function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t%360}},{key:"render",value:function(){var e=this.props.username?"hsl(".concat(this.stringToHslColor(this.props.username),", 35%, 65%)"):"#e2e2e2";return l.a.createElement("div",{className:"avatar",style:{backgroundColor:e}},l.a.createElement("div",{className:"inner"},this.props.username&&this.props.username.charAt(0).toUpperCase()))}}]),t}(c.Component)},75:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"header-icon ".concat(this.props.className),onClick:this.props.onClick},this.props.link?l.a.createElement("a",{href:this.props.link,className:"icon inner"},this.props.icon):l.a.createElement("span",{className:"icon inner"},this.props.icon))}}]),t}(c.Component)},86:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u={MY_DOCUMENTS:"My Documents",SHARED_WITH_ME:"Shared with me"},p=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.view?u[this.props.view]:this.props.label;return l.a.createElement("div",{className:"breadcrumbs"},l.a.createElement("h2",null,e))}}]),t}(c.Component)},87:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=n(27),p=n.n(u),h=n(49),m=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={collaborators:[]},n.fetchCollaborators(e),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.fetchCollaborators(e)}},{key:"fetchCollaborators",value:function(e){var t=this;e.username&&p.a.get("/api/account/".concat(e.username,"/collaborators")).then(function(e){return t.setState({collaborators:e.data})})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.collaborators.length>0&&l.a.createElement("div",{className:this.props.className?"collaborator-list ".concat(this.props.className):"collaborator-list"},l.a.createElement("h2",null,this.props.title),l.a.createElement("ul",null,this.state.collaborators.map(function(e){return l.a.createElement("li",{key:e.username},l.a.createElement("a",{href:"/".concat(e.username),title:e.username},l.a.createElement(h.a,{username:e.username})))}))))}}]),t}(c.Component)},88:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=n(49),p=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"formatURL",value:function(e){return e.replace(/^https?:\/\//i,"")}},{key:"render",value:function(){var e=this.props.account&&this.props.account.username&&this.props.account.member_since;return l.a.createElement("div",{className:"identity"},l.a.createElement("div",{className:"user"},l.a.createElement(u.a,{username:e&&this.props.account.username}),l.a.createElement("h1",null,e?this.props.account.real_name?this.props.account.real_name:this.props.account.username:l.a.createElement("span",{className:"placeholder"})),l.a.createElement("p",{className:"member-since"},e?l.a.createElement(l.a.Fragment,null,"Joined on ",new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(this.props.account.member_since))):l.a.createElement("span",{className:"placeholder"}))),l.a.createElement("div",{className:"user-extended"},e&&this.props.account.bio&&l.a.createElement("p",{className:"bio"},this.props.account.bio),e&&this.props.account.website&&l.a.createElement("p",{className:"homepage"},l.a.createElement("a",{href:this.props.account.website},this.formatURL(this.props.account.website)))))}}]),t}(c.Component)},89:function(e,t,n){"use strict";var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=n(36),p=n(60),h=n(48),m=n(35),d=n(32),f=n(46),b=n(20),v=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).updateTotalRowSpan(e),n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.updateTotalRowSpan(e)}},{key:"updateTotalRowSpan",value:function(e){this._totalSpan=e.columns.reduce(function(e,t){return e+b.b.getSpan(t)},0)}},{key:"getWidth",value:function(e){return b.b.getSpan(e)/this._totalSpan}}]),t}(c.Component),y=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"column-labels"},this.props.columns.map(function(n){return l.a.createElement("span",{key:n,style:{width:"".concat(100*Object(f.a)(Object(i.a)(t.prototype),"getWidth",e).call(e,n),"%")},className:"label ".concat(n),onClick:e.props.onSort.bind(e,n)},l.a.createElement("span",{className:"inner-wrapper"},l.a.createElement("span",{className:"inner"},b.c[n]||n),e.props.sortColumn===n&&l.a.createElement("span",{className:"sort icon"},l.a.createElement("span",{className:"inner"},e.props.sortAsc?"\ue688":"\ue682"))))}))}}]),t}(v),E=n(50),g=n.n(E),O=n(116),k=n.n(O),j={TEXT_PLAIN:"icon_text.png",TEXT_TEIXML:"icon_tei.png",IMAGE_UPLOAD:"icon_image.png",IMAGE_IIIF:"icon_iiif.png",DATA_CSV:"icon_csv.png"},w={language:function(e){return e.toUpperCase()},uploaded_at:function(e){return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(e))},last_edit_at:function(e){return l.a.createElement(k.a,{date:e})},public_visibility:function(e){return"PUBLIC"===e?l.a.createElement("span",{className:"icon",title:"Open to anyone"},"\uf09c"):"WITH_LINK"===e?l.a.createElement("span",{className:"icon",title:"Open to anyone with the link"},"\uf0c1"):l.a.createElement("span",{className:"icon",title:"Private"},"\uf023")},annotations:function(e){return l.a.createElement(g.a,{displayType:"text",value:e,thousandSeparator:!0})}},S={agg_document:function(e){return e.author?"".concat(e.author,", ").concat(e.title):e.title}},N=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"createAggregateField",value:function(e,n){return l.a.createElement("a",{key:n,href:e,className:n.substring(4),style:{width:"".concat(100*Object(f.a)(Object(i.a)(t.prototype),"getWidth",this).call(this,n),"%")}},S[n](this.props.item))}},{key:"createField",value:function(e,n){var a=w[n],s=void 0!==this.props.item[n]?a?a(this.props.item[n]):this.props.item[n]:"";return l.a.createElement("a",{key:n,href:e,className:n,style:{width:"".concat(100*Object(f.a)(Object(i.a)(t.prototype),"getWidth",this).call(this,n),"%")}},s)}},{key:"render",value:function(){var e=this,t=this.props.item.filetypes[0],n="document/".concat(this.props.item.id,"/part/1/edit");return l.a.createElement("div",{className:"row".concat(this.props.selected?" selected":""),style:this.props.style,onClick:this.props.onClick},this.props.columns.map(function(t){return t.startsWith("agg_")?e.createAggregateField(n,t):e.createField(n,t)}),l.a.createElement("span",{className:"type icon ".concat(t)},l.a.createElement("img",{src:"/assets/images/".concat(j[t]),alt:"icon type ".concat(t)})))}}]),t}(v),C=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:this.props.style,className:"row folder"},l.a.createElement("a",{href:"#",className:"folder-icon"},"\uf07b"),l.a.createElement("a",{href:"#",className:"folder-name"},this.props.name))}}]),t}(c.Component),D=n(44),_=n(73),M=n.n(_),L=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"clicktrap ".concat(this.props.className)},l.a.createElement("div",{className:"modal-wrapper"},l.a.createElement(M.a,{handle:".modal-header"},l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h1",{className:"title"},this.props.title),l.a.createElement("button",{className:"close nostyle",onClick:this.props.onClose},"\ue897")),l.a.createElement("div",{className:"modal-body"},this.props.children)))))}}]),t}(c.Component),U=Object(D.SortableElement)(function(e){var t=e.label;return l.a.createElement("div",{className:"card"},t)}),I=Object(D.SortableContainer)(function(e){var t=e.items;return l.a.createElement("div",{className:"column-order"},t.map(function(e,t){return l.a.createElement(U,{key:"card-".concat(t),index:t,label:b.c[e]})}))}),T=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(I,{items:this.props.items,onSortEnd:function(t){return e.props.onSortEnd(t.oldIndex,t.newIndex)}})}}]),t}(c.Component),A=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={columns:e.columns.slice(0)},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.columns!==this.props.columns&&this.setState({columns:e.columns.slice(0)})}},{key:"getCheckboxStates",value:function(e){var t=this,n={};return b.a.forEach(function(e){var a=t.state.columns.includes(e);n[e]=a}),n}},{key:"setAllRows",value:function(e){var t=this;e?function(){var e=b.a.filter(function(e){return!t.state.columns.includes(e)});t.setState({columns:t.state.columns.concat(e)})}():t.setState({columns:[]})}},{key:"onClickAll",value:function(){b.a.length===this.state.columns.length?this.setAllRows(!1):this.setAllRows(!0)}},{key:"toggleOne",value:function(e){this.setState(function(t){var n=t.columns.indexOf(e);return n<0?t.columns.push(e):t.columns.splice(n,1),t})}},{key:"onSort",value:function(e,t){this.setState({columns:Object(D.arrayMove)(this.state.columns,e,t)})}},{key:"render",value:function(){var e=this;return l.a.createElement(L,{className:"preferences",title:"Configure Columns",onClose:this.props.onCancel},l.a.createElement("div",{className:"scroll-pane"},l.a.createElement("div",{className:"selected-columns"},l.a.createElement("button",{className:"all nostyle",onClick:this.onClickAll.bind(this)},"All"),l.a.createElement("ul",null,b.a.map(function(t){return l.a.createElement("li",{key:t},l.a.createElement("input",{type:"checkbox",id:t,name:t,checked:e.state.columns.includes(t),onChange:e.toggleOne.bind(e,t)}),l.a.createElement("label",{htmlFor:t},b.c[t]))}))),l.a.createElement(T,{items:this.state.columns,onSortEnd:this.onSort.bind(this)})),l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{className:"btn",onClick:this.props.onSave.bind(this,this.state.columns)},"Save"),l.a.createElement("button",{className:"btn outline",onClick:this.props.onCancel},"Cancel")))}}]),t}(c.Component);n.d(t,"a",function(){return R});var R=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={prefsOpen:!1,selection:new d.a(e.folders.concat(e.documents),e.selection)},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({selection:new d.a(e.folders.concat(e.documents),e.selection)})}},{key:"onClick",value:function(e,t,n){var a=e.getModifierState("Shift"),s=e.getModifierState("Control");(a||s||!this.props.selection.includes(t))&&(a?this.state.selection.selectRange(n):this.state.selection.selectItem(t,s),this.props.onSelect(this.state.selection.getSelectedItems()),e.preventDefault())}},{key:"rowRenderer",value:function(){var e=this,t=this.props.folders.concat(this.props.documents);return function(n){var a=t[n.index];return a.name?l.a.createElement(C,{key:n.key,style:n.style,name:a.name}):l.a.createElement(N,{key:n.key,style:n.style,columns:e.props.columns,item:a,selected:e.props.selection&&e.props.selection.includes(a),onClick:function(t){return e.onClick(t,a,n.index)}})}}},{key:"showPreferences",value:function(e){this.setState({prefsOpen:e})}},{key:"onSavePreferences",value:function(e){this.setState({prefsOpen:!1}),this.props.onChangeColumnPrefs(e)}},{key:"sortBy",value:function(e){var t=!this.props.sorting||(this.props.sorting.by!==e||!this.props.sorting.asc);this.props.onSort({by:e,asc:t})}},{key:"onDrag",value:function(e){this.setState({drag:e})}},{key:"onDrop",value:function(e,t,n){var a=n.dataTransfer.getData("URL"),s=a?function(){var e=document.createElement("a");return e.href=a,e.hostname}():null;this.setState({drag:!1}),e.length>0?this.props.onDropFiles(e):a&&s!==window.location.hostname&&this.props.onDropURL(a)}},{key:"render",value:function(){var e=this,t=l.a.Children.toArray(this.props.children).filter(function(e){return e.type===m.a}).shift(),n=l.a.createElement("div",{className:"documents-pane table-pane"},l.a.createElement(u.a,null,function(t){var n=t.height,a=t.width;return l.a.createElement(u.b,{className:"virtualized-list",width:a,height:n,rowCount:e.props.folders.length+e.props.documents.length,rowHeight:47,rowRenderer:e.rowRenderer()})}),this.state.drag&&l.a.createElement(h.a,null),this.props.busy&&l.a.createElement("div",{className:"busy-mask"}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"documents-table-header"},l.a.createElement(y,{columns:this.props.columns,onSort:this.sortBy.bind(this),sortColumn:this.props.sorting?this.props.sorting.by:null,sortAsc:this.props.sorting?this.props.sorting.asc:null}),l.a.createElement("button",{className:"column-options-btn nostyle icon",onClick:this.showPreferences.bind(this,!0)},"\uf141")),t,this.props.disableFiledrop?n:l.a.createElement(p.a,{className:"dropzone",disableClick:!0,onDragEnter:this.onDrag.bind(this,!0),onDragLeave:this.onDrag.bind(this,!1),onDrop:this.onDrop.bind(this)},n),this.state.prefsOpen&&l.a.createElement(A,{columns:this.props.columns,onCancel:this.showPreferences.bind(this,!1),onSave:this.onSavePreferences.bind(this)}))}}]),t}(c.Component)},90:function(e,t,n){"use strict";var a=n(3),s=n(4),o=n(7),i=n(6),r=n(8),c=n(1),l=n.n(c),u=n(60),p=n(36),h=n(32),m=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"cell"},l.a.createElement("div",{className:"item-wrapper"},l.a.createElement("a",{href:"#",className:"folder"},l.a.createElement("div",{className:"label"},this.props.name))))}}]),t}(c.Component),d=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.filetypes[0],t=this.props.fileCount>1;return l.a.createElement("div",{className:"cell".concat(this.props.selected?" selected":""),onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick},l.a.createElement("div",{className:"inner"},l.a.createElement("div",{className:"item-wrapper".concat(t?" stacked":"")},t&&l.a.createElement("div",{className:"stack"}),l.a.createElement("a",{href:"document/".concat(this.props.id,"/part/1/edit"),className:"document ".concat(e)},l.a.createElement("div",{className:"label"},this.props.title)))))}}]),t}(c.Component),f=n(35),b=n(48);n.d(t,"a",function(){return v});var v=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={selection:new h.a(e.folders.concat(e.documents),e.selection)},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({selection:new h.a(e.folders.concat(e.documents),e.selection)})}},{key:"onClick",value:function(e,t,n){var a=e.getModifierState("Shift"),s=e.getModifierState("Control");a?this.state.selection.selectRange(n):this.state.selection.selectItem(t,s),this.props.onSelect(this.state.selection.getSelectedItems()),e.preventDefault()}},{key:"onDoubleClick",value:function(e){window.location.href="document/".concat(e.id,"/part/1/edit")}},{key:"rowRenderer",value:function(e,t){var n=this,a=this.props.folders.concat(this.props.documents);return function(t){var s=t.index*e,o=Math.min(s+e,a.length)-s,i=new Array(o).fill(void 0).map(function(e,o){var i=o+s,r=a[i];return r.name?l.a.createElement(m,{key:i,name:r.name}):l.a.createElement(d,{key:i,id:r.id,title:r.title,filetypes:r.filetypes,fileCount:r.file_count,selected:n.props.selection&&n.props.selection.includes(r),onClick:function(e){return n.onClick(e,r,t.index)},onDoubleClick:n.onDoubleClick.bind(n,r)})});return o<e&&i.push(new Array(e-o).fill(void 0).map(function(e,t){return l.a.createElement("div",{className:"cell dummy",key:"dummy-".concat(t)})})),l.a.createElement("div",{key:t.key,style:t.style,className:"row"},i)}}},{key:"onDrag",value:function(e){this.setState({drag:e})}},{key:"onDrop",value:function(e,t,n){var a=n.dataTransfer.getData("URL");this.setState({drag:!1}),e.length>0?this.props.onDropFiles(e):a&&this.props.onDropURL(a)}},{key:"render",value:function(){var e=this,t=l.a.Children.toArray(this.props.children).filter(function(e){return e.type===f.a}).shift(),n=l.a.createElement(p.a,null,function(t){var n=t.height,a=t.width,s=e.props.folders.length+e.props.documents.length,o=Math.floor(a/192),i=Math.ceil(s/o);return l.a.createElement(p.b,{className:"virtualized-grid",width:a,height:n,rowCount:i,rowHeight:192,rowRenderer:e.rowRenderer(o,i)})});return l.a.createElement(l.a.Fragment,null,t,l.a.createElement("div",{className:"documents-pane grid-pane"},this.props.disableFiledrop?n:l.a.createElement(u.a,{className:"dropzone",disableClick:!0,onDragEnter:this.onDrag.bind(this,!0),onDragLeave:this.onDrag.bind(this,!1),onDrop:this.onDrop.bind(this)},n),this.state.drag&&l.a.createElement(b.a,null)))}}]),t}(c.Component)}},[[222,4,0]]]);
//# sourceMappingURL=workspace.5a6bc90d.chunk.js.map