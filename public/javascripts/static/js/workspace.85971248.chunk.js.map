{"version":3,"sources":["workspace/API.js","common/components/Meter.jsx","common/content/upload/Uploader.jsx","workspace/header/search/AdvancedSearch.jsx","workspace/header/search/Search.jsx","common/components/Prompt.jsx","workspace/actions/DeleteAction.jsx","workspace/header/Header.jsx","common/components/MenuPopup.jsx","workspace/sidebar/sections/Account.jsx","workspace/sidebar/sections/CreateNew.jsx","workspace/sidebar/sections/Views.jsx","workspace/sidebar/sections/Storage.jsx","workspace/sidebar/Sidebar.jsx","workspace/App.jsx"],"names":["fetchDocuments","path","config","axios","post","concat","API","get","id","delete","ids","data","Meter","react_default","a","createElement","className","style","position","width","this","props","value","height","Component","Uploader","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_emptyState","start","files","remoteSource","url","phase","totalSize","reduce","total","f","size","filepartIds","length","map","uploadId","uploadStatus","progress","errors","next","_this2","setState","_this3","initNewDocument","then","result","uploadFiles","registerURL","catch","error","prev","slice","push","response","finalizeDocument","bind","title","name","formdata","FormData","append","headers","X-Requested-With","_this4","requests","file","idx","onUploadProgress","evt","loaded","uuid","uploadOne","Promise","all","_this5","tasks","running_tasks","pollTaskProgress","document_id","onUploadComplete","console","log","filepartId","pollResult","_this6","subtasks","find","t","filepart_id","indexOf","setUploadStatus","status","documentId","taskTypes","_this7","updateStatusForFile","setTimeout","complete","isUploadComplete","_this8","totalLoaded","onClick","onCancel","key","message","Meter_Meter","AdvancedSearch","onMousedown","assertThisInitialized","onKeydown","document","addEventListener","removeEventListener","isClickOutside","_node","contains","target","isClickOnToggle","classList","onClose","which","ref","n","type","Search","advancedSearchOpen","placeholder","AdvancedSearch_AdvancedSearch","toggleAdvancedSearch","Prompt","onNo","toLowerCase","react_draggable_default","handle","onYes","DeleteAction","selection","r","onStart","deleteDocument","onSuccess","onError","bulkDeleteDocuments","ReactDOM","createPortal","Prompt_Prompt","executeDelete","body","Header","action","afterDelete","isOpen","Search_Search","HeaderIcon","icon","link","Breadcrumbs","view","react_transition_group","in","timeout","classNames","startDeleteAction","presentation","onTogglePresentation","DeleteAction_DeleteAction","onDelete","onDeleteSuccess","onDeleteError","cancelDelete","MenuPopup","menu","group","options","option","disabled","onSelect","href","label","Fragment","Account","menuVisible","window","location","showMenu","ProfileInfo","account","MenuPopup_MenuPopup","onSelectMenuOption","closeMenu","CreateNew","_input","click","Array","from","onUploadFiles","onShowOptions","c","multiple","onChange","display","onSelectOption","ViewListItem","current","children","count","ViewList","dataAvailable","documents","Views_ViewListItem","my_documents","currentView","onChangeView","shared_with_me","Storage","storage","quota","quota_mb","used","used_mb","number_format_default","displayType","thousandSeparator","Sidebar","collaborators","Account_Account","CreateNew_CreateNew","Views_ViewList","Storage_Storage","ActivityWidget","fill","stats","CollaboratorList","username","App","table_columns","table_sorting","busy","folders","readme","fileUploads","urlUpload","assign","StoredUIState","load","_root","getElementById","querySelector","fetchAccountData","refreshCurrentView","columns","Columns","expandAggregatedColumns","sort","accountData","myDocuments","getDisplayConfig","items","sharedWithMe","save","fetchMyDocuments","fetchSharedWithMe","before","p","sorting","_this9","isUploading","Sidebar_Sidebar","startUpload","changeView","Header_Header","setBusy","togglePresentation","TablePane","onSort","onSortTable","disableFiledrop","onDropFiles","onDropURL","startRegisterRemoteSource","onChangeColumnPrefs","Readme","GridPane","Uploader_Uploader","render","App_App"],"mappings":"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","file":"static/js/workspace.85971248.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst fetchDocuments = (path, config) => {\n  return axios.post(`/api/documents/${path}`, config);\n};\n\nexport default class API {\n\n  static accountData() {\n    return axios.get('/api/account/my');\n  }\n\n  static myDocuments(config) {\n    return fetchDocuments('my', config);\n  }\n\n  static sharedWithMe(config) {\n    return fetchDocuments('shared', config);\n  }\n\n  // Deletes one document via the API\n  static deleteDocument(id) {\n    return axios.delete(`/document/${id}`);\n  }\n\n  // Deletes multiple documents in one go via the bulk API\n  static bulkDeleteDocuments(ids) {\n    return axios.delete('/document/bulk', { data: ids });\n  }\n\n}","import React, { Component } from 'react';\n\nexport default class Meter extends Component {\n\n  render() {\n    return (\n      <div\n        className=\"meter\"\n        style={{ position: 'relative' }}>\n\n        <div\n          className=\"bar\"\n          style={{\n            width: `${100 * this.props.value}%`,\n            height: '100%'\n          }} />\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport Meter from '../../components/Meter.jsx';\n\nexport default class Uploader extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = this._emptyState(props);\n    this.start();\n  }\n\n  _emptyState(props) {\n    return {\n      files: props.files,\n      remoteSource: props.url,\n      phase: 'Uploading',\n      totalSize: props.files.reduce((total, f) => total + f.size, 0),\n      filepartIds: (props.files.length > 0) ? props.files.map(() => null) : [ null ],\n      uploadId: null,\n      uploadStatus: (props.files.length > 0) ? props.files.map(() => 'UPLOADING') : [ 'UPLOADING'],\n      progress: (props.files.length > 0) ? props.files.map(() => 0) : [ 0 ],\n      errors: []\n    };\n  }\n\n  componentWillReceiveProps(next) {\n    if (this.props.files === next.files && this.props.url === next.url)\n      return;\n\n    this.setState(this._emptyState(next), () => this.start());\n  }\n\n  /** \n   * Starts a new upload.\n   * \n   * Since one document generally consists of multiple files, the \n   * upload process is multi-stage: \n   * \n   * - first, the new document is initialized, and assigned an ID on the server\n   * - then, all files are uploaded to this document\n   * - finally, a finalization requests closes the document, and waits for any\n   *   processing (image tiling, TEI conversion) to finish\n   */\n  start() {\n    this.initNewDocument()\n      .then((result) => { \n        this.setState({ uploadId: result.data.id });\n\n        // Branch based on files vs. remote URL\n        if (this.state.files.length > 0)\n          return this.uploadFiles() \n        else if (this.state.remoteSource)\n          return this.registerURL()\n      })\n      .catch(error => {\n        this.setState(prev => {\n          const errors = prev.errors.slice(0);\n          errors.push(error.response.data);\n          return { errors: errors };\n        });\n      })\n      .then(this.finalizeDocument.bind(this));\n  }\n\n  /**\n   * Initializes a new document, using the filename as title,\n   * or a 'New document' placeholder in case there are multiple files.\n   */\n  initNewDocument() {\n    const title = (this.state.files.length === 1) ? this.state.files[0].name : 'New document';\n    const formdata = new FormData();\n    formdata.append('title', title);\n\n    return axios.post('/my/upload', formdata, {\n      headers: { 'X-Requested-With': 'XMLHttpRequest' }\n    });\n  }\n\n  registerURL() {\n    this.setState({ phase: 'Importing' });\n\n    const formdata = new FormData();\n    formdata.append('url', this.state.remoteSource);\n\n    return axios.post(`/my/upload/${this.state.uploadId}/file`, formdata, {\n      headers: { 'X-Requested-With': 'XMLHttpRequest' }\n    });\n  }\n\n  /**\n   * Uploads the files in parallel.\n   */\n  uploadFiles() {\n    // Helper: handles upload for one file\n    const uploadOne = (file, idx) => {\n      const formdata = new FormData();\n      formdata.append('file', file);\n\n      const onUploadProgress = (evt) => {\n        const progress = this.state.progress.slice(0); // Clone progress array\n        progress[idx] = evt.loaded;\n        this.setState({ progress: progress });\n      }\n\n      return axios.post(`/my/upload/${this.state.uploadId}/file`, formdata, {\n        headers: { 'X-Requested-With': 'XMLHttpRequest' },\n        onUploadProgress: onUploadProgress\n      }).then(result => {\n        this.setState(prev => {\n          const filepartIds = prev.filepartIds.slice(0);\n          filepartIds[idx] = result.data.uuid;\n          return { filepartIds: filepartIds };\n        });\n\n        return result;\n      }).catch(error => {\n        this.setState(prev => {\n          const uploadStatus = prev.uploadStatus.slice(0);\n          uploadStatus[idx] = 'FAILED';\n\n          const errors = prev.errors.slice(0);\n          errors.push(error.response.data);\n\n          return { \n            uploadStatus: uploadStatus,\n            errors: errors \n          };\n        });\n      });\n    }\n    \n    // The list of request promises...\n    const requests = this.state.files.map((file, idx) => uploadOne(file, idx));\n\n    // ... rolled into a promise of the list of request results\n    return Promise.all(requests);\n  }\n\n  /**\n   * Finalizes the upload, creating the document and starting processing tasks (if any)\n   */\n  finalizeDocument()  {\n    return axios.post(`/my/upload/${this.state.uploadId}/finalize`, {\n      headers: { 'X-Requested-With': 'XMLHttpRequest' }\n    }).then(result => {\n      const tasks = result.data.running_tasks;\n      if (tasks.length > 0) {\n        this.setState({ phase: 'Importing...' });\n        this.pollTaskProgress(result.data.document_id, tasks);\n      } else {\n        this.props.onUploadComplete();\n      }\n    }).catch(error => {\n      console.log('Upload contained errors');\n    });\n  }\n\n  updateStatusForFile(filepartId, pollResult) {\n    const progress = pollResult.subtasks.find(t => t.filepart_id === filepartId);\n    const idx = this.state.filepartIds.indexOf(filepartId);\n\n    const setUploadStatus = (value) => {\n      this.setState(prev => {\n        const uploadStatus = prev.uploadStatus.slice(0);\n        uploadStatus[idx] = value;\n        return { uploadStatus: uploadStatus };\n      })\n    }\n\n    if (progress)\n      setUploadStatus(progress.status);\n    else // No task running for this file - complete\n      setUploadStatus('COMPLETED');\n  }\n\n  /**\n   * Polls import task progress\n   */\n  pollTaskProgress(documentId, taskTypes) {    \n    axios.get(`/api/task?id=${documentId}`)\n      .then(result => {\n        // Update status per file\n        this.state.filepartIds.map(id => this.updateStatusForFile(id, result.data));\n        const isDone = result.data.status === 'COMPLETED' || result.data.status === 'FAILED';\n        if (isDone)\n          this.props.onUploadComplete()\n        else\n          setTimeout(() => this.pollTaskProgress(documentId, taskTypes), 1000);\n      });\n  }\n\n  isUploadComplete() {\n    return this.state.uploadStatus\n      .reduce((complete, next) => complete && (next === 'COMPLETED' || next === 'FAILED'));\n  }\n\n  onCancel(evt) {\n    if (this.isUploadComplete())\n      this.props.onUploadComplete();\n  }\n\n  render() {\n    const totalLoaded = this.state.progress.reduce((total, next) => total + next, 0);\n\n    return (\n      <div className=\"upload-progress\">\n        <div className=\"phase\">\n          {this.state.phase}\n          <button \n            className=\"close nostyle\"\n            onClick={this.onCancel.bind(this)}>&#xe897;</button>\n        </div>\n        <ul className={`files${(this.state.errors.length > 0) ? ' has-errors' : ''}`}>\n          {this.state.files.map((f, idx) =>\n            <li key={idx}>\n              {f.name}\n              <span className={`icon spinner ${this.state.uploadStatus[idx]}`}></span>\n            </li>\n          )}\n\n          {this.state.remoteSource &&\n            <li>\n              Fetching content from remote source...\n              <span className=\"icon spinner RUNNING\"></span>\n            </li>\n          }\n        </ul>\n        {this.state.errors.length > 0 && \n          <ul className=\"errors\">\n            {this.state.errors.map((message, idx) => <li key={idx}>{message}</li>)}\n          </ul>\n        }\n        <div className=\"progress\">\n          <Meter value={totalLoaded / this.state.totalSize} />\n        </div>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\n\nexport default class AdvancedSearch extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.onMousedown = this.onMousedown.bind(this);\n    this.onKeydown = this.onKeydown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.onMousedown, false);\n    document.addEventListener('keydown', this.onKeydown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.onMousedown, false);\n    document.removeEventListener('keydown', this.onKeydown, false);\n  }\n\n  onMousedown(evt) {\n    const isClickOutside = !this._node.contains(evt.target);\n    const isClickOnToggle = evt.target.classList.contains('advanced');\n    if (isClickOutside && !isClickOnToggle) this.props.onClose();\n  }\n\n  onKeydown(evt) {\n    if (evt.which === 27) this.props.onClose();\n  }\n\n  render() {\n    return (\n      <div\n        ref={n => this._node = n}\n        className=\"advanced-search\">\n        <button\n          className=\"close nostyle\"\n          onClick={this.props.onClose}>&#xe897;</button>\n\n        <form>\n          <fieldset>\n            <p>\n              <label>Search in</label>\n              <select>\n                <option>All of Recogito</option>\n                <option>My documents</option>\n                <option>Shared with me</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Document type</label>\n              <select>\n                <option>Any</option>\n                <option>Text</option>\n                <option>Image</option>\n                <option>Table</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Owner</label>\n              <select>\n                <option>Anyone</option>\n                <option>me</option>\n                <option>specific user</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Metadata contains</label>\n              <input type=\"text\" />\n              <span className=\"hint\" />\n            </p>\n\n            <p>\n              <label>Last modified</label>\n              <select>\n                <option>Any time</option>\n                <option>this week</option>\n              </select>\n              <span className=\"hint\" />\n            </p>\n          </fieldset>\n          <fieldset className=\"buttons\">\n            <button className=\"nostyle clear\">Clear</button>\n            <button type=\"submit\" className=\"btn\">Search</button>\n          </fieldset>\n        </form>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport AdvancedSearch from './AdvancedSearch.jsx';\n\nexport default class Search extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { advancedSearchOpen: false }\n  }\n\n  toggleAdvancedSearch() {\n    this.setState(prev => (\n      { advancedSearchOpen: !prev.advancedSearchOpen }\n    ));\n  }\n\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <div className=\"search\">\n          <div className=\"wrapper\">\n            <input placeholder=\"Search Recogito...\"/>\n            {/* <button\n              className=\"icon nostyle advanced\"\n            onClick={this.toggleAdvancedSearch.bind(this)}>{'\\ue688'}</button> */}\n          </div>\n          <span className=\"icon hand-lens\">&#xf002;</span>\n        </div>\n        {this.state.advancedSearchOpen &&\n          <AdvancedSearch onClose={this.toggleAdvancedSearch.bind(this)}/>\n        }\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport Draggable from 'react-draggable';\n\nexport default class Prompt extends Component {\n\n  constructor(props) {\n    super(props);\n    this.onKeydown = this.onKeydown.bind(this);\n  }\n\n  /** Clear selection on ESC **/\n  onKeydown(evt) {\n    if (evt.which === 27) this.props.onNo();\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.onKeydown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.onKeydown, false);\n  }\n\n  render() {\n    const className = (this.props.type) ? `prompt ${this.props.type.toLowerCase()}` : 'prompt';\n\n    return (\n      <div className=\"clicktrap\">\n        <Draggable handle=\".prompt-header\">\n          <div className={className}>\n            <div className=\"prompt-header\">\n              <h1 className=\"title\">{this.props.title}</h1>\n            </div>\n\n            <div className=\"prompt-body\">\n              <p className=\"message\">{this.props.message}</p>\n              <p className=\"buttons\">\n                 <button className=\"btn yes\" onClick={this.props.onYes}>YES</button>\n                 <button className=\"btn outline no\" onClick={this.props.onNo}>NO</button>\n              </p>\n            </div>\n          </div>\n        </Draggable>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport API from '../API.js';\nimport Prompt from '../../common/components/Prompt.jsx';\n\nexport default class DeleteAction extends Component {\n\n  executeDelete() {\n    const ids = this.props.selection.map(r => r.id);\n\n    if (ids.length > 0) {\n      this.props.onStart();\n\n      if (ids.length === 1) {\n        API.deleteDocument(ids[0])\n           .then(() => {\n             this.props.onSuccess();\n           })\n           .catch((error) => {\n             this.props.onError(error);\n           });\n      } else {\n        API.bulkDeleteDocuments(ids)\n          .then(() => {\n            this.props.onSuccess();\n          })\n          .catch((error) => {\n            this.props.onError(error);\n          });\n      }\n    } else {\n      this.props.onCancel();\n    }\n  }\n\n  render() {\n    return ReactDOM.createPortal(\n      <Prompt \n        title=\"Delete Document\"\n        type=\"WARNING\"\n        message=\"You cannot undo this operation. Are you sure you want to do this?\" \n        onNo={this.props.onCancel}\n        onYes={this.executeDelete.bind(this)} />,\n\n      document.body\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport Search from './search/Search.jsx';\nimport HeaderIcon from '../../common/content/HeaderIcon.jsx';\nimport Breadcrumbs from '../../common/content/Breadcrumbs.jsx';\nimport DeleteAction from '../actions/DeleteAction.jsx';\n\nexport default class Header extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      action: null \n    };\n\n    document.body.addEventListener('keydown', this.onKeydown.bind(this), false);\n  }\n\n  onKeydown(evt) {\n    if (this.props.selection.length > 0 && evt.which === 46)\n      this.setState({ action: 'DELETE' });\n  }\n\n  /** User clicked the DELETE button in the mini-menu */\n  startDeleteAction() {\n    this.setState({ action: 'DELETE' });\n  }\n\n  /** User clicked CANCEL in the warning prompt **/\n  cancelDelete() {\n    this.setState({ action: null });\n  }\n\n  /** Delete executed successfully **/\n  onDeleteSuccess() {\n    this.setState({ action: null }, () => {\n      this.props.afterDelete();\n    });\n  }\n\n  onDeleteError(error) {\n    this.setState({ action: null }, () => {\n      this.props.afterDelete(); // TODO error message\n    });\n  }\n\n  render() {\n    const isOpen = this.props.selection.length > 0;\n    return (\n      <div className=\"header\">\n        <div className=\"top-row\">\n          <Search/>\n          <div className=\"header-icons\">\n            <HeaderIcon icon=\"&#xe64a;\" className=\"help stroke7\" link=\"/help\" />\n            {/* <HeaderIcon icon=\"&#xe8ae;\" className=\"stats\" />\n            <HeaderIcon icon=\"&#xe8c1;\" className=\"notifications\" /> */}\n          </div>\n        </div>\n        <div className=\"subheader\">\n          <Breadcrumbs view={this.props.view}/>\n\n          <div className=\"subheader-icons\">\n            <CSSTransition\n              in={isOpen} \n              timeout={500} \n              classNames=\"selection-actions\">\n\n              <div className=\"selection-actions\">              \n                {/* <span className=\"share icon\">&#xf234;</span> */}\n\n                <span\n                  className=\"delete icon\" \n                  onClick={this.startDeleteAction.bind(this)}>&#xf014;</span>\n\n                {/* <span className=\"more icon\">&#xf078;</span> */}\n              </div>\n            </CSSTransition>\n\n            <HeaderIcon\n              className=\"presentation-toggle stroke7\"\n              icon={(this.props.presentation === 'TABLE') ? '\\ue645' : '\\ue636'} \n              onClick={this.props.onTogglePresentation} />\n\n            {this.state.action === 'DELETE' && \n                <DeleteAction\n                  selection={this.props.selection}\n                  onStart={this.props.onDelete}\n                  onSuccess={this.onDeleteSuccess.bind(this)}\n                  onError={this.onDeleteError.bind(this)}\n                  onCancel={this.cancelDelete.bind(this)} />\n            }\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class MenuPopup extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.onMousedown = this.onMousedown.bind(this);\n    this.onKeydown = this.onKeydown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.onMousedown, false);\n    document.addEventListener('keydown', this.onKeydown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.onMousedown, false);\n    document.removeEventListener('keydown', this.onKeydown, false);\n  }\n\n  onMousedown(evt) {\n    const isClickOutside = !this._node.contains(evt.target);\n    if (isClickOutside) this.props.onCancel();\n  }\n\n  onKeydown(evt) {\n    if (evt.which === 27) this.props.onCancel();\n  }\n\n  render() {\n    return (\n      <div\n        ref={n => this._node = n}\n        className={`modal-menu ${this.props.className}`}>\n        <ul>\n          {this.props.menu.map(group =>\n            <li\n              key={group.group}\n              className={`group ${group.group}`}>\n\n              <ul>\n                {group.options.map(option =>\n                  <li\n                    key={option.value || option.link}\n                    className={`option${option.disabled ? ' disabled' : '' }`}\n                    onClick={(option.disabled || !option.value) ? null : this.props.onSelect.bind(this, option.value) }>\n\n                    {(option.link) ? \n                      <a href={option.link}>\n                        <span className=\"icon\">{option.icon}</span> {option.label}\n                      </a>\n                      : \n                      <React.Fragment>\n                        <span className=\"icon\">{option.icon}</span> {option.label}\n                      </React.Fragment>\n                    }\n                  </li>\n                )}\n              </ul>\n            </li>\n          )}\n        </ul>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport ProfileInfo from '../../../common/content/profile/ProfileInfo.jsx';\nimport MenuPopup from '../../../common/components/MenuPopup.jsx';\n\nexport default class Account extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { menuVisible: false };\n  }\n\n  onSelectMenuOption(option) {\n    if (option === 'SETTINGS')\n      window.location.href= '/settings/account';\n    else if (option === 'SIGNOUT')\n      window.location.href= '/logout';\n    else if (option === 'HELP');\n      window.location.href= '/help';\n  }\n\n  showMenu() {\n    this.setState({ menuVisible: true });\n  }\n\n  closeMenu() {\n    this.setState({ menuVisible: false });\n  }\n\n  render() {\n    return (\n      <div\n        className=\"section account\"\n        onClick={this.showMenu.bind(this)} >\n\n        <ProfileInfo account={this.props.account} />\n\n        { this.state.menuVisible &&\n          <MenuPopup\n            className=\"account-menu\"\n            menu={[\n              { group: 'settings', options: [\n                { icon: '\\uf0ad', label: 'Account settings', link: '/settings/account' }\n              ]},\n              { group: 'general', options: [\n                { icon: '\\uf128', label: 'Help', link: '/help' },\n                { icon: '\\uf011', label: 'Sign out', link: '/logout' }\n              ]}\n            ]}\n            onSelect={this.onSelectMenuOption.bind(this)}\n            onCancel={this.closeMenu.bind(this)} />\n        }\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport MenuPopup from '../../../common/components/MenuPopup.jsx';\n\nexport default class CreateNew extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { menuVisible: false };\n  }\n\n  onShowOptions() {\n    this.setState({ menuVisible: true });\n  }\n\n  onSelectOption(option) {\n    this.setState({ menuVisible: false });\n\n    if (option === 'FILE') this._input.click();\n  }\n\n  onUploadFiles(evt) {\n    const files = Array.from(evt.target.files);\n    this.props.onUploadFiles(files);\n  }\n\n  onCancel() {\n    this.setState({ menuVisible: false });\n  }\n\n  render() {\n    return (\n      <div className=\"section create-new\">\n        <button\n          className=\"btn create-new\"\n          onClick={this.onShowOptions.bind(this)}>\n          <span className=\"icon\">&#xf067;</span>\n          <span className=\"label\">New</span>\n        </button>\n        <input\n          ref={c => this._input = c}\n          type=\"file\"\n          name=\"file\"\n          multiple\n          onChange={this.onUploadFiles.bind(this)}\n          style={{ display: 'none' }} />\n\n        {this.state.menuVisible &&\n          <MenuPopup\n            className=\"create-new\"\n            menu={[\n              { group: 'local', options: [\n                { icon: '\\uf07b', label: 'Folder', value: 'FOLDER', disabled: true },\n                { icon: '\\uf15b', label: 'File upload', value: 'FILE' }\n              ]},\n\n              { group: 'remote', options: [\n                { icon: '\\uf0c1', label: 'From IIIF manifest', value: 'IIIF', disabled: true },\n                { icon: '\\uf121', label: 'From CTS service', value: 'CTS', disabled: true }\n              ]}\n            ]}\n            onSelect={this.onSelectOption.bind(this)}\n            onCancel={this.onCancel.bind(this)} />\n        }\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nclass ViewListItem extends Component {\n\n  render() {\n    return (\n      <li\n        className={this.props.current ? 'current' : null}\n        onClick={this.props.onClick}>\n        <span className=\"icon\">{this.props.icon}</span> {\n          this.props.children\n        } {this.props.count != null &&\n          <span className=\"doc-count badge\">{this.props.count}</span>\n        }\n      </li>\n    )\n  }\n\n}\n\nexport default class ViewList extends Component {\n\n  render() {\n    const dataAvailable = this.props.account && this.props.account.documents;\n\n    return (\n      <div className=\"section views\">\n        <ul>\n          <ViewListItem\n            icon=\"&#xf2be;\"\n            count={dataAvailable && this.props.account.documents.my_documents}\n            current={this.props.currentView === 'MY_DOCUMENTS'}\n            onClick={this.props.onChangeView.bind(this, 'MY_DOCUMENTS')}>\n            My Documents\n          </ViewListItem>\n\n          <ViewListItem\n            icon=\"&#xf064;\"\n            count={dataAvailable && this.props.account.documents.shared_with_me}\n            current={this.props.currentView === 'SHARED_WITH_ME'}\n            onClick={this.props.onChangeView.bind(this, 'SHARED_WITH_ME')}>\n            Shared with me\n          </ViewListItem>\n\n          {/* <ViewListItem\n            icon=\"&#xf017;\"\n            current={this.props.currentView == 'RECENT'}\n            onClick={this.props.onChangeView.bind(this, 'RECENT')}>\n            Recent\n          </ViewListItem> */}\n        </ul>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport NumberFormat from 'react-number-format';\n\nimport Meter from '../../../common/components/Meter.jsx';\n\nexport default class Storage extends Component {\n\n  render() {\n    const dataAvailable = this.props.account && this.props.account.storage;\n    const quota = dataAvailable ? this.props.account.storage.quota_mb : 0;\n    const used = dataAvailable ? this.props.account.storage.used_mb : 0;\n\n    return (\n      <div className=\"section storage\">\n        <span className=\"icon\">&#xf1c0;</span> Storage\n        <div className=\"used-diskspace\">\n          <Meter\n            value={(quota > 0) ? used / quota : 0} />\n\n          <div className=\"label\">\n            <NumberFormat \n              displayType=\"text\"\n              value={used}\n              thousandSeparator={true} /> \n            {' of  '}\n            <NumberFormat \n              displayType=\"text\"\n              value={quota}\n              thousandSeparator={true} /> MB used\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\n\nimport ActivityWidget from '../../common/content/activity/ActivityWidget.jsx';\nimport CollaboratorList from '../../common/content/profile/CollaboratorList.jsx';\n\nimport Account   from './sections/Account.jsx';\nimport CreateNew from './sections/CreateNew.jsx';\nimport ViewList  from './sections/Views.jsx';\nimport Storage   from './sections/Storage.jsx';\n\nexport default class Sidebar extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { collaborators: [] };\n  }\n\n  render() {\n    return (\n      <div className=\"sidebar\">\n        <Account\n          account={this.props.account} />\n\n        <CreateNew \n          onUploadFiles={this.props.onUploadFiles} />\n          \n        <ViewList\n          account={this.props.account}\n          currentView={this.props.currentView}\n          onChangeView={this.props.onChangeView} />\n\n        <Storage \n          account={this.props.account} /> \n\n        <ActivityWidget \n          className=\"section\" \n          width={237}\n          height={55}\n          fill=\"#4483c4\"\n          stats={this.props.account && this.props.account.stats} />\n\n        <CollaboratorList \n          className=\"section collaborators\"\n          title=\"My top collaborators\"\n          username={this.props.account && this.props.account.username} />\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport { render } from 'react-dom';\n\nimport API from './API.js';\nimport GridPane from '../common/content/grid/GridPane.jsx';\nimport TablePane from '../common/content/table/TablePane.jsx';\nimport Readme from '../common/content/Readme.jsx';\nimport { Columns } from '../common/content/table/Columns.js';\nimport StoredUIState from '../common/StoredUIState.js';\nimport Uploader from '../common/content/upload/Uploader.jsx';\n\nimport Header from './header/Header.jsx';\nimport Sidebar from './sidebar/Sidebar.jsx';\n\nimport '../../assets/style/workspace/index.scss';\n\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const state = {\n      account       : null,           // account info\n      view          : 'MY_DOCUMENTS', // view, as selected in sidebar (My Documents, Shared, Recent)\n      presentation  : 'TABLE',        // presentation mode TABLE or GRID\n      table_columns : [               // current table view columns configuration\n        \"author\",\n        \"title\",\n        \"language\",\n        \"date_freeform\",\n        \"uploaded_at\",\n        \"last_edit_at\"\n      ],\n      table_sorting : null,          // current table sorting (if any)\n      busy          : false,          // Document pane in 'busy' state? (Docs loading, action onging, etc.)\n      folders       : [],             // Folders\n      documents     : [],             // Documents\n      readme        : null,           // Current folder readme\n      selection     : [],             // Selected items (folders and documents)\n      fileUploads   : [],             // Files currently uploading\n      urlUpload     : null            // URLs currently uploading/registering\n    };\n\n    Object.assign(state, StoredUIState.load());\n    this.state = state;\n\n    this._root = document.getElementById('app');\n\n    this.onKeydown = this.onKeydown.bind(this);\n    this.onMousedown = this.onMousedown.bind(this);\n  }\n\n  /** Clear selection on ESC key **/\n  onKeydown(evt) {\n    if (evt.which === 27) this.setState({ selection: [] });\n  }\n\n  /** Clear selection on click ouside the document pane **/\n  onMousedown(evt) {\n    const isClickOutside = !(\n      document.querySelector('.documents-pane').contains(evt.target) ||\n      document.querySelector('.subheader-icons').contains(evt.target)\n    );\n\n    if (isClickOutside) this.setState({ selection: [] });\n  }\n\n  componentDidMount() {\n    this._root.addEventListener('keydown', this.onKeydown, false);\n    this._root.addEventListener('mousedown', this.onMousedown, false);\n\n    this.fetchAccountData();\n    this.refreshCurrentView();\n  }\n\n  componentWillUnmount() {\n    this._root.removeEventListener('keydown', this.onKeydown, false);\n    this._root.removeEventListener('mousedown', this.onMousedown, false);\n  }\n\n  getDisplayConfig() {\n    if (this.state.presentation === 'GRID')\n      return; // No configs for grid view\n\n    return {\n      columns: Columns.expandAggregatedColumns(this.state.table_columns),\n      sort: this.state.table_sorting\n    };\n  }\n\n  fetchAccountData() {\n    return API.accountData().then(result => { this.setState({ account: result.data }) });\n  }\n\n  fetchMyDocuments() {\n    this.setState({ busy: true });\n    return API.myDocuments(this.getDisplayConfig()).then(result => {\n      this.setState({\n        documents: result.data.items, \n        busy: false \n      });\n    });\n  }\n\n  fetchSharedWithMe() {\n    this.setState({ busy: true });\n    return API.sharedWithMe(this.getDisplayConfig()).then(result => { \n      this.setState({\n        documents: result.data.items, \n        busy: false \n      }) \n    });\n  }\n\n  /** Switch between different document views (currently: 'my' vs. 'shared') **/\n  changeView(view) {\n    if (this.state.view !== view) {\n      StoredUIState.save('view', view);\n\n      this.setState({\n        view: view,\n        documents:[]\n      }, () => {\n        (view === 'MY_DOCUMENTS') ? this.fetchMyDocuments() : this.fetchSharedWithMe();\n      });\n    }\n  }\n\n  /** Reloads the current view from the API */\n  refreshCurrentView() {\n    if (this.state.view === 'MY_DOCUMENTS')\n      return this.fetchMyDocuments();\n    else \n      return this.fetchSharedWithMe();\n  }\n\n  /** Toggles the view presentation (table vs. grid) **/\n  togglePresentation() {\n    this.setState(before => { \n      const p = (before.presentation === 'TABLE') ? 'GRID' : 'TABLE';\n      StoredUIState.save('presentation', p);\n      return { presentation: p };\n    });\n  }\n\n  onChangeColumnPrefs(columns) {\n    StoredUIState.save('table_columns', columns);\n    this.setState({ table_columns: columns }, () => {\n      this.refreshCurrentView();\n    });\n  }\n  \n  onSortTable(sorting) {\n    StoredUIState.save('table_sorting', sorting);\n    this.setState({ table_sorting: sorting }, () => {\n      this.refreshCurrentView();\n    });\n  }\n\n  /** File selection **/\n  onSelect(selection) {\n    this.setState({ selection: selection });\n  }\n\n  /** File upload **/\n  startUpload(files) {\n    this.setState({ \n      fileUploads: files, \n      urlUpload: null\n    });\n  }\n\n  /** Remote file registration (IIIF, CTS) **/\n  startRegisterRemoteSource(url) {\n    this.setState({ \n      fileUploads: [],\n      urlUpload: url\n    });\n  } \n\n  onUploadComplete() {\n    this.setState({ fileUploads: [], urlUpload: null }, () => {\n      this.refreshCurrentView()\n        .then(this.fetchAccountData.bind(this));\n    });\n  }\n\n  setBusy(busy) {\n    this.setState({ busy: busy });\n  }\n\n  afterDelete() {\n    this.refreshCurrentView()\n      .then(() => this.setState({ busy: false, selection: []}))\n      .then(this.fetchAccountData.bind(this));\n  }\n\n  render() {\n    const isUploading = this.state.fileUploads.length > 0 || this.state.urlUpload;\n\n    return(\n      <React.Fragment>\n        <Sidebar\n          account={this.state.account}\n          onUploadFiles={this.startUpload.bind(this)}\n          currentView={this.state.view}\n          onChangeView={this.changeView.bind(this)} />\n\n        <div className=\"container\">\n          <Header\n            view={this.state.view}\n            selection={this.state.selection}\n            presentation={this.state.presentation}\n            onDelete={this.setBusy.bind(this, true)}\n            afterDelete={this.afterDelete.bind(this)}\n            onTogglePresentation={this.togglePresentation.bind(this)} />\n\n          {this.state.presentation === 'TABLE' ?\n            <TablePane\n              folders={this.state.folders}\n              documents={this.state.documents}\n              columns={this.state.table_columns}\n              sorting={this.state.table_sorting}\n              busy={this.state.busy}\n              selection={this.state.selection}\n              onSort={this.onSortTable.bind(this)}\n              onSelect={this.onSelect.bind(this)} \n              disableFiledrop={this.state.view !== 'MY_DOCUMENTS'}\n              onDropFiles={this.startUpload.bind(this)} \n              onDropURL={this.startRegisterRemoteSource.bind(this)} \n              onChangeColumnPrefs={this.onChangeColumnPrefs.bind(this)} >\n\n              {this.state.readme && <Readme>{this.state.readme}</Readme> }\n            </TablePane>\n            :\n            <GridPane\n              folders={this.state.folders}\n              documents={this.state.documents}\n              busy={this.state.busy}\n              selection={this.state.selection}\n              onSelect={this.onSelect.bind(this)} \n              disableFiledrop={this.state.view !== 'MY_DOCUMENTS'}\n              onDropFiles={this.startUpload.bind(this)}\n              onDropURL={this.startRegisterRemoteSource.bind(this)} >\n              \n              {this.state.readme && \n                <Readme>{this.state.readme}</Readme> }\n            </GridPane>\n          }\n        </div>\n\n        { isUploading && \n          <Uploader\n            files={this.state.fileUploads} \n            url={this.state.urlUpload}\n            onUploadComplete={this.onUploadComplete.bind(this)} /> \n        }\n      </React.Fragment>\n    )\n  }\n\n}\n\nrender(<App />, document.getElementById('app'));\n"],"sourceRoot":""}