(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{20:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"c",function(){return c}),a.d(t,"b",function(){return l});var n=a(3),s=a(4),r=["author","title","language","date_freeform","uploaded_at","last_edit_at","last_edit_by","annotations","public_visibility"],c={author:"Author",title:"Title",language:"Language",date_freeform:"Date",uploaded_at:"Uploaded at",last_edit_at:"Last edit",last_edit_by:"Last edit by",annotations:"Annotations",public_visibility:"Visibility",status_ratio:"Verification ratio",activity:"Activity graph",owner:"Document owner",shared_by:"Shared by",access_level:"Access level"},i={agg_document:"XL",author:"M",title:"L",language:"M",date_freeform:"M",uploaded_at:"M",last_edit_at:"M",last_edit_by:"M",annotations:"M",public_visibility:"M",status_ratio:"M",activity:"M",owner:"M",shared_by:"M",access_level:"S"},o={agg_document:["author","document"]},l=function(){function e(){Object(n.a)(this,e)}return Object(s.a)(e,null,[{key:"getSpan",value:function(e){var t=i[e];return"XL"===t?6:"L"===t?4:"M"===t?2:"S"===t?1:void 0}},{key:"expandAggregatedColumns",value:function(e){return e.reduce(function(e,t){return t.startsWith("agg_")?e=e.concat(o[t]):e.push(t),e},[])}}]),e}()},32:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(3),s=a(4),r=function(){function e(t,a){Object(n.a)(this,e),this._allItems=t,this._selection=a}return Object(s.a)(e,[{key:"clear",value:function(){this._selection=[]}},{key:"isEmpty",value:function(){return 0===this._selection.length}},{key:"getSelectedItems",value:function(){return this._selection}},{key:"selectItem",value:function(e,t){var a=this._selection.indexOf(e);t?a>-1?this._selection.splice(a,1):this._selection.push(e):this._selection=[e]}},{key:"selectRange",value:function(e){var t=this,a=this._selection.map(function(e){return t._allItems.indexOf(e)}),n=Math.min.apply(null,a),s=Math.max.apply(null,a),r=e>s||e<n,c=function(e,a){return t._allItems.slice(e,a+1)};this._selection=r&&e>s?c(n,e):r?c(e,s):c(n,e)}}]),e}()},320:function(e,t,a){e.exports=a(443)},35:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"readme"},l.a.createElement("div",{className:"inner"},this.props.children))}}]),t}(o.Component)},37:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(3),s=a(4),r=function(){function e(){Object(n.a)(this,e)}return Object(s.a)(e,null,[{key:"load",value:function(){var e={};return["view","presentation","table_columns","table_sorting"].map(function(t){var a=localStorage.getItem("r2.workspace.".concat(t));a&&(e[t]=JSON.parse(a))}),e}},{key:"save",value:function(e,t){var a="r2.workspace.".concat(e);localStorage.setItem(a,JSON.stringify(t))}}]),e}()},440:function(e,t,a){},443:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=a(28),m=a.n(u),p=a(27),h=a.n(p),d=function(){function e(){Object(n.a)(this,e)}return Object(s.a)(e,null,[{key:"fetchLoginStatus",value:function(){return h.a.get("/api/me")}},{key:"fetchPublicAccountInfo",value:function(e){return h.a.get("/api/account/".concat(e))}},{key:"fetchAccessibleDocuments",value:function(e,t){return h.a.post("/api/documents/accessible/".concat(e),t)}}]),e}(),f=a(90),b=a(89),v=a(86),y=a(75),g=a(37),E=a(447),O=a(446),k=a(439),j=a(444),N=a(50),C=a.n(N),_={stroke:"#c2c2c2",strokeWidth:1},w={fontSize:"12px",color:"#3f3f3f"},S=function(e){return new Intl.DateTimeFormat("en-GB",{month:"short"}).format(new Date(e))},D=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"createEmptySeries",value:function(e,t){var a=new Array(e);return a.fill(0),a.reduce(function(e,t){var a=e[e.length-1];return e.push(a-6048e5),e},[t-6048e5]).reverse().map(function(e){return{timestamp:e,value:0}})}},{key:"padTimeseries",value:function(e){var t=e.length>0?e[0].timestamp:(new Date).getTime();return this.createEmptySeries(19-e.length,t).concat(e)}},{key:"computeChart",value:function(){var e=this.props.stats.over_time.map(function(e){return{timestamp:Date.parse(e.date),value:e.value}});return e.length<20?this.padTimeseries(e):e}},{key:"render",value:function(){return l.a.createElement("div",{className:this.props.className?"activity-widget ".concat(this.props.className):"activity-widget"},l.a.createElement("h2",null,"Activity",this.props.stats&&l.a.createElement("span",{className:"count"},l.a.createElement(C.a,{displayType:"text",value:this.props.stats.total_contributions,thousandSeparator:!0})," edits")),this.props.stats&&l.a.createElement(E.a,{width:this.props.width,height:this.props.height,barCategoryGap:1.5,data:this.computeChart()},l.a.createElement(O.a,{strokeDasharray:"3",horizontal:!1}),l.a.createElement(k.a,{type:"number",dataKey:"timestamp",axisLine:_,tick:w,tickSize:4,tickCount:6,tickLine:_,tickFormatter:S,height:20,domain:["dataMin","dataMax"],padding:{left:5,right:5}}),l.a.createElement(j.a,{dataKey:"value",fill:this.props.fill})))}}]),t}(o.Component),A=a(87),I=a(88),T=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"section"},l.a.createElement(I.a,{account:this.props.account})),l.a.createElement(D,{className:"section",width:237,height:55,fill:"#4483c4",stats:this.props.account&&this.props.account.stats}),l.a.createElement(A.a,{className:"section",title:"Top collaborators",username:this.props.account&&this.props.account.username}))}}]),t}(o.Component),L=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"search"},l.a.createElement("div",{className:"wrapper"},l.a.createElement("input",{placeholder:"Search Recogito..."})),l.a.createElement("span",{className:"icon hand-lens"},"\uf002"))}}]),t}(o.Component),M=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"notLoggedIn",value:function(){return l.a.createElement("div",{className:"not logged-in"},l.a.createElement("a",{href:"/login"},"Log in"),"\xa0 | \xa0New to Recogito? \xa0",l.a.createElement("a",{href:"/"},"Learn more"))}},{key:"loggedInAs",value:function(){var e=this.props.me.real_name?this.props.me.real_name:this.props.me.username;return l.a.createElement("div",{className:"logged-in"},"Logged in as ",l.a.createElement("a",{href:"/".concat(this.props.me.username)},e))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"top-bar"},l.a.createElement("div",{className:"top-left"},l.a.createElement("a",{href:"/my",className:"home"},l.a.createElement("img",{src:"/assets/images/logo-recogito-small.png",alt:"Recogito logo"})),this.props.me&&this.props.me.logged_in&&l.a.createElement("a",{href:"/my"},"My Workspace"),l.a.createElement("a",{href:"/help"},"Help"),l.a.createElement("a",{href:"/help/about"},"About"),l.a.createElement(L,null)),l.a.createElement("div",{className:"top-right"},this.props.me&&this.props.me.logged_in?this.loggedInAs():this.notLoggedIn())))}}]),t}(o.Component),R=a(20);a(440);a.d(t,"default",function(){return x});var x=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(r.a)(this,Object(c.a)(t).call(this,e));var s={me:null,visitedAccount:null,presentation:"TABLE",table_columns:["author","title","language","date_freeform","uploaded_at","last_edit_at"],table_sorting:null,busy:!1,documents:null};return Object.assign(s,g.a.load()),a.state=s,a._profileOwner=window.location.pathname.substring(1),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.fetchPublicAccountInfo(this._profileOwner).then(function(t){return e.setState({visitedAccount:t.data})}),d.fetchLoginStatus().then(function(t){return e.setState({me:t.data})}),this.reloadDocuments()}},{key:"reloadDocuments",value:function(){var e=this;d.fetchAccessibleDocuments(this._profileOwner,this.getDisplayConfig()).then(function(t){return e.setState({documents:t.data.items})})}},{key:"getDisplayConfig",value:function(){if("GRID"!==this.state.presentation)return{columns:R.b.expandAggregatedColumns(this.state.table_columns),sort:this.state.table_sorting}}},{key:"onTogglePresentation",value:function(e){this.setState(function(e){var t="TABLE"===e.presentation?"GRID":"TABLE";return g.a.save("presentation",t),{presentation:t}})}},{key:"onChangeColumnPrefs",value:function(e){var t=this;g.a.save("table_columns",e),this.setState({table_columns:e},function(){t.reloadDocuments()})}},{key:"onSortTable",value:function(e){var t=this;g.a.save("table_sorting",e),this.setState({table_sorting:e},function(){t.reloadDocuments()})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(M,{me:this.state.me}),l.a.createElement(T,{account:this.state.visitedAccount}),l.a.createElement("div",{className:"container"},l.a.createElement(v.a,{label:"Public Documents"}),l.a.createElement(y.a,{className:"presentation-toggle stroke7",icon:"TABLE"===this.state.presentation?"\ue645":"\ue636",onClick:this.onTogglePresentation.bind(this)}),this.state.documents&&this.state.visitedAccount&&(0===this.state.documents.length?l.a.createElement("div",{className:"no-public-documents"},this.state.visitedAccount.username," has not shared any documents yet"):"TABLE"===this.state.presentation?l.a.createElement(b.a,{folders:[],documents:this.state.documents,columns:this.state.table_columns,sorting:this.state.table_sorting,busy:this.state.busy,disableFiledrop:!0,onSort:this.onSortTable.bind(this),onChangeColumnPrefs:this.onChangeColumnPrefs.bind(this)}):l.a.createElement(f.a,{folders:[],documents:this.state.documents,busy:this.state.busy,disableFiledrop:!0}))))}}]),t}(o.Component);m.a.render(l.a.createElement(x,null),document.getElementById("app"))},48:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=a(121).a.div({open:{bottom:"30px",transition:{ease:"easeOut",duration:200}},closed:{bottom:"-140px"}}),m=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={visible:!1},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){return l.a.createElement("div",{className:"dropzone-decoration"},l.a.createElement(u,{className:"inner",pose:this.state.visible?"open":"closed"},l.a.createElement("span",{className:"icon"},"\uf0ee"),l.a.createElement("p",{className:"instructions"},"Drop files or IIIF manifest URLs to add them to your workspace."),l.a.createElement("p",{className:"supported"},"Supported formats: plain text (UTF-8), TEI/XML, image files, CSV (UTF-8)")))}}]),t}(o.Component)},49:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"stringToHslColor",value:function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return t%360}},{key:"render",value:function(){var e=this.props.username?"hsl(".concat(this.stringToHslColor(this.props.username),", 35%, 65%)"):"#e2e2e2";return l.a.createElement("div",{className:"avatar",style:{backgroundColor:e}},l.a.createElement("div",{className:"inner"},this.props.username&&this.props.username.charAt(0).toUpperCase()))}}]),t}(o.Component)},75:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"header-icon ".concat(this.props.className),onClick:this.props.onClick},this.props.link?l.a.createElement("a",{href:this.props.link,className:"icon inner"},this.props.icon):l.a.createElement("span",{className:"icon inner"},this.props.icon))}}]),t}(o.Component)},86:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u={MY_DOCUMENTS:"My Documents",SHARED_WITH_ME:"Shared with me"},m=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.view?u[this.props.view]:this.props.label;return l.a.createElement("div",{className:"breadcrumbs"},l.a.createElement("h2",null,e))}}]),t}(o.Component)},87:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=a(27),m=a.n(u),p=a(49),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={collaborators:[]},a.fetchCollaborators(e),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.fetchCollaborators(e)}},{key:"fetchCollaborators",value:function(e){var t=this;e.username&&m.a.get("/api/account/".concat(e.username,"/collaborators")).then(function(e){return t.setState({collaborators:e.data})})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.collaborators.length>0&&l.a.createElement("div",{className:this.props.className?"collaborator-list ".concat(this.props.className):"collaborator-list"},l.a.createElement("h2",null,this.props.title),l.a.createElement("ul",null,this.state.collaborators.map(function(e){return l.a.createElement("li",{key:e.username},l.a.createElement("a",{href:"/".concat(e.username),title:e.username},l.a.createElement(p.a,{username:e.username})))}))))}}]),t}(o.Component)},88:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=a(49),m=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"formatURL",value:function(e){return e.replace(/^https?:\/\//i,"")}},{key:"render",value:function(){var e=this.props.account&&this.props.account.username&&this.props.account.member_since;return l.a.createElement("div",{className:"identity"},l.a.createElement("div",{className:"user"},l.a.createElement(u.a,{username:e&&this.props.account.username}),l.a.createElement("h1",null,e?this.props.account.real_name?this.props.account.real_name:this.props.account.username:l.a.createElement("span",{className:"placeholder"})),l.a.createElement("p",{className:"member-since"},e?l.a.createElement(l.a.Fragment,null,"Joined on ",new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(this.props.account.member_since))):l.a.createElement("span",{className:"placeholder"}))),l.a.createElement("div",{className:"user-extended"},e&&this.props.account.bio&&l.a.createElement("p",{className:"bio"},this.props.account.bio),e&&this.props.account.website&&l.a.createElement("p",{className:"homepage"},l.a.createElement("a",{href:this.props.account.website},this.formatURL(this.props.account.website)))))}}]),t}(o.Component)},89:function(e,t,a){"use strict";var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=a(36),m=a(60),p=a(48),h=a(35),d=a(32),f=a(46),b=a(20),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).updateTotalRowSpan(e),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.updateTotalRowSpan(e)}},{key:"updateTotalRowSpan",value:function(e){this._totalSpan=e.columns.reduce(function(e,t){return e+b.b.getSpan(t)},0)}},{key:"getWidth",value:function(e){return b.b.getSpan(e)/this._totalSpan}}]),t}(o.Component),y=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"column-labels"},this.props.columns.map(function(a){return l.a.createElement("span",{key:a,style:{width:"".concat(100*Object(f.a)(Object(c.a)(t.prototype),"getWidth",e).call(e,a),"%")},className:"label ".concat(a),onClick:e.props.onSort.bind(e,a)},l.a.createElement("span",{className:"inner-wrapper"},l.a.createElement("span",{className:"inner"},b.c[a]||a),e.props.sortColumn===a&&l.a.createElement("span",{className:"sort icon"},l.a.createElement("span",{className:"inner"},e.props.sortAsc?"\ue688":"\ue682"))))}))}}]),t}(v),g=a(50),E=a.n(g),O=a(116),k=a.n(O),j={TEXT_PLAIN:"icon_text.png",TEXT_TEIXML:"icon_tei.png",IMAGE_UPLOAD:"icon_image.png",IMAGE_IIIF:"icon_iiif.png",DATA_CSV:"icon_csv.png"},N={language:function(e){return e.toUpperCase()},uploaded_at:function(e){return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(e))},last_edit_at:function(e){return l.a.createElement(k.a,{date:e})},public_visibility:function(e){return"PUBLIC"===e?l.a.createElement("span",{className:"icon",title:"Open to anyone"},"\uf09c"):"WITH_LINK"===e?l.a.createElement("span",{className:"icon",title:"Open to anyone with the link"},"\uf0c1"):l.a.createElement("span",{className:"icon",title:"Private"},"\uf023")},annotations:function(e){return l.a.createElement(E.a,{displayType:"text",value:e,thousandSeparator:!0})}},C={agg_document:function(e){return e.author?"".concat(e.author,", ").concat(e.title):e.title}},_=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"createAggregateField",value:function(e,a){return l.a.createElement("a",{key:a,href:e,className:a.substring(4),style:{width:"".concat(100*Object(f.a)(Object(c.a)(t.prototype),"getWidth",this).call(this,a),"%")}},C[a](this.props.item))}},{key:"createField",value:function(e,a){var n=N[a],s=void 0!==this.props.item[a]?n?n(this.props.item[a]):this.props.item[a]:"";return l.a.createElement("a",{key:a,href:e,className:a,style:{width:"".concat(100*Object(f.a)(Object(c.a)(t.prototype),"getWidth",this).call(this,a),"%")}},s)}},{key:"render",value:function(){var e=this,t=this.props.item.filetypes[0],a="document/".concat(this.props.item.id,"/part/1/edit");return l.a.createElement("div",{className:"row".concat(this.props.selected?" selected":""),style:this.props.style,onClick:this.props.onClick},this.props.columns.map(function(t){return t.startsWith("agg_")?e.createAggregateField(a,t):e.createField(a,t)}),l.a.createElement("span",{className:"type icon ".concat(t)},l.a.createElement("img",{src:"/assets/images/".concat(j[t]),alt:"icon type ".concat(t)})))}}]),t}(v),w=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:this.props.style,className:"row folder"},l.a.createElement("a",{href:"#",className:"folder-icon"},"\uf07b"),l.a.createElement("a",{href:"#",className:"folder-name"},this.props.name))}}]),t}(o.Component),S=a(44),D=a(73),A=a.n(D),I=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"clicktrap ".concat(this.props.className)},l.a.createElement("div",{className:"modal-wrapper"},l.a.createElement(A.a,{handle:".modal-header"},l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h1",{className:"title"},this.props.title),l.a.createElement("button",{className:"close nostyle",onClick:this.props.onClose},"\ue897")),l.a.createElement("div",{className:"modal-body"},this.props.children)))))}}]),t}(o.Component),T=Object(S.SortableElement)(function(e){var t=e.label;return l.a.createElement("div",{className:"card"},t)}),L=Object(S.SortableContainer)(function(e){var t=e.items;return l.a.createElement("div",{className:"column-order"},t.map(function(e,t){return l.a.createElement(T,{key:"card-".concat(t),index:t,label:b.c[e]})}))}),M=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(L,{items:this.props.items,onSortEnd:function(t){return e.props.onSortEnd(t.oldIndex,t.newIndex)}})}}]),t}(o.Component),R=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={columns:e.columns.slice(0)},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.columns!==this.props.columns&&this.setState({columns:e.columns.slice(0)})}},{key:"getCheckboxStates",value:function(e){var t=this,a={};return b.a.forEach(function(e){var n=t.state.columns.includes(e);a[e]=n}),a}},{key:"setAllRows",value:function(e){var t=this;e?function(){var e=b.a.filter(function(e){return!t.state.columns.includes(e)});t.setState({columns:t.state.columns.concat(e)})}():t.setState({columns:[]})}},{key:"onClickAll",value:function(){b.a.length===this.state.columns.length?this.setAllRows(!1):this.setAllRows(!0)}},{key:"toggleOne",value:function(e){this.setState(function(t){var a=t.columns.indexOf(e);return a<0?t.columns.push(e):t.columns.splice(a,1),t})}},{key:"onSort",value:function(e,t){this.setState({columns:Object(S.arrayMove)(this.state.columns,e,t)})}},{key:"render",value:function(){var e=this;return l.a.createElement(I,{className:"preferences",title:"Configure Columns",onClose:this.props.onCancel},l.a.createElement("div",{className:"scroll-pane"},l.a.createElement("div",{className:"selected-columns"},l.a.createElement("button",{className:"all nostyle",onClick:this.onClickAll.bind(this)},"All"),l.a.createElement("ul",null,b.a.map(function(t){return l.a.createElement("li",{key:t},l.a.createElement("input",{type:"checkbox",id:t,name:t,checked:e.state.columns.includes(t),onChange:e.toggleOne.bind(e,t)}),l.a.createElement("label",{htmlFor:t},b.c[t]))}))),l.a.createElement(M,{items:this.state.columns,onSortEnd:this.onSort.bind(this)})),l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{className:"btn",onClick:this.props.onSave.bind(this,this.state.columns)},"Save"),l.a.createElement("button",{className:"btn outline",onClick:this.props.onCancel},"Cancel")))}}]),t}(o.Component);a.d(t,"a",function(){return x});var x=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={prefsOpen:!1,selection:new d.a(e.folders.concat(e.documents),e.selection)},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({selection:new d.a(e.folders.concat(e.documents),e.selection)})}},{key:"onClick",value:function(e,t,a){var n=e.getModifierState("Shift"),s=e.getModifierState("Control");(n||s||!this.props.selection.includes(t))&&(n?this.state.selection.selectRange(a):this.state.selection.selectItem(t,s),this.props.onSelect(this.state.selection.getSelectedItems()),e.preventDefault())}},{key:"rowRenderer",value:function(){var e=this,t=this.props.folders.concat(this.props.documents);return function(a){var n=t[a.index];return n.name?l.a.createElement(w,{key:a.key,style:a.style,name:n.name}):l.a.createElement(_,{key:a.key,style:a.style,columns:e.props.columns,item:n,selected:e.props.selection&&e.props.selection.includes(n),onClick:function(t){return e.onClick(t,n,a.index)}})}}},{key:"showPreferences",value:function(e){this.setState({prefsOpen:e})}},{key:"onSavePreferences",value:function(e){this.setState({prefsOpen:!1}),this.props.onChangeColumnPrefs(e)}},{key:"sortBy",value:function(e){var t=!this.props.sorting||(this.props.sorting.by!==e||!this.props.sorting.asc);this.props.onSort({by:e,asc:t})}},{key:"onDrag",value:function(e){this.setState({drag:e})}},{key:"onDrop",value:function(e,t,a){var n=a.dataTransfer.getData("URL"),s=n?function(){var e=document.createElement("a");return e.href=n,e.hostname}():null;this.setState({drag:!1}),e.length>0?this.props.onDropFiles(e):n&&s!==window.location.hostname&&this.props.onDropURL(n)}},{key:"render",value:function(){var e=this,t=l.a.Children.toArray(this.props.children).filter(function(e){return e.type===h.a}).shift(),a=l.a.createElement("div",{className:"documents-pane table-pane"},l.a.createElement(u.a,null,function(t){var a=t.height,n=t.width;return l.a.createElement(u.b,{className:"virtualized-list",width:n,height:a,rowCount:e.props.folders.length+e.props.documents.length,rowHeight:47,rowRenderer:e.rowRenderer()})}),this.state.drag&&l.a.createElement(p.a,null),this.props.busy&&l.a.createElement("div",{className:"busy-mask"}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"documents-table-header"},l.a.createElement(y,{columns:this.props.columns,onSort:this.sortBy.bind(this),sortColumn:this.props.sorting?this.props.sorting.by:null,sortAsc:this.props.sorting?this.props.sorting.asc:null}),l.a.createElement("button",{className:"column-options-btn nostyle icon",onClick:this.showPreferences.bind(this,!0)},"\uf141")),t,this.props.disableFiledrop?a:l.a.createElement(m.a,{className:"dropzone",disableClick:!0,onDragEnter:this.onDrag.bind(this,!0),onDragLeave:this.onDrag.bind(this,!1),onDrop:this.onDrop.bind(this)},a),this.state.prefsOpen&&l.a.createElement(R,{columns:this.props.columns,onCancel:this.showPreferences.bind(this,!1),onSave:this.onSavePreferences.bind(this)}))}}]),t}(o.Component)},90:function(e,t,a){"use strict";var n=a(3),s=a(4),r=a(7),c=a(6),i=a(8),o=a(1),l=a.n(o),u=a(60),m=a(36),p=a(32),h=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"cell"},l.a.createElement("div",{className:"item-wrapper"},l.a.createElement("a",{href:"#",className:"folder"},l.a.createElement("div",{className:"label"},this.props.name))))}}]),t}(o.Component),d=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.filetypes[0],t=this.props.fileCount>1;return l.a.createElement("div",{className:"cell".concat(this.props.selected?" selected":""),onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick},l.a.createElement("div",{className:"inner"},l.a.createElement("div",{className:"item-wrapper".concat(t?" stacked":"")},t&&l.a.createElement("div",{className:"stack"}),l.a.createElement("a",{href:"document/".concat(this.props.id,"/part/1/edit"),className:"document ".concat(e)},l.a.createElement("div",{className:"label"},this.props.title)))))}}]),t}(o.Component),f=a(35),b=a(48);a.d(t,"a",function(){return v});var v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={selection:new p.a(e.folders.concat(e.documents),e.selection)},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({selection:new p.a(e.folders.concat(e.documents),e.selection)})}},{key:"onClick",value:function(e,t,a){var n=e.getModifierState("Shift"),s=e.getModifierState("Control");n?this.state.selection.selectRange(a):this.state.selection.selectItem(t,s),this.props.onSelect(this.state.selection.getSelectedItems()),e.preventDefault()}},{key:"onDoubleClick",value:function(e){window.location.href="document/".concat(e.id,"/part/1/edit")}},{key:"rowRenderer",value:function(e,t){var a=this,n=this.props.folders.concat(this.props.documents);return function(t){var s=t.index*e,r=Math.min(s+e,n.length)-s,c=new Array(r).fill(void 0).map(function(e,r){var c=r+s,i=n[c];return i.name?l.a.createElement(h,{key:c,name:i.name}):l.a.createElement(d,{key:c,id:i.id,title:i.title,filetypes:i.filetypes,fileCount:i.file_count,selected:a.props.selection&&a.props.selection.includes(i),onClick:function(e){return a.onClick(e,i,t.index)},onDoubleClick:a.onDoubleClick.bind(a,i)})});return r<e&&c.push(new Array(e-r).fill(void 0).map(function(e,t){return l.a.createElement("div",{className:"cell dummy",key:"dummy-".concat(t)})})),l.a.createElement("div",{key:t.key,style:t.style,className:"row"},c)}}},{key:"onDrag",value:function(e){this.setState({drag:e})}},{key:"onDrop",value:function(e,t,a){var n=a.dataTransfer.getData("URL");this.setState({drag:!1}),e.length>0?this.props.onDropFiles(e):n&&this.props.onDropURL(n)}},{key:"render",value:function(){var e=this,t=l.a.Children.toArray(this.props.children).filter(function(e){return e.type===f.a}).shift(),a=l.a.createElement(m.a,null,function(t){var a=t.height,n=t.width,s=e.props.folders.length+e.props.documents.length,r=Math.floor(n/192),c=Math.ceil(s/r);return l.a.createElement(m.b,{className:"virtualized-grid",width:n,height:a,rowCount:c,rowHeight:192,rowRenderer:e.rowRenderer(r,c)})});return l.a.createElement(l.a.Fragment,null,t,l.a.createElement("div",{className:"documents-pane grid-pane"},this.props.disableFiledrop?a:l.a.createElement(u.a,{className:"dropzone",disableClick:!0,onDragEnter:this.onDrag.bind(this,!0),onDragLeave:this.onDrag.bind(this,!1),onDrop:this.onDrop.bind(this)},a),this.state.drag&&l.a.createElement(b.a,null)))}}]),t}(o.Component)}},[[320,5,0,3]]]);
//# sourceMappingURL=profile.13f49d5e.chunk.js.map